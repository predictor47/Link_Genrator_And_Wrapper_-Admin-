(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{6361:function(e,t,n){"use strict";let i={},o={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),i[e]=t,o[t]=e}},8602:function(e,t,n){"use strict";n.d(t,{f:function(){return u}}),"function"==typeof SuppressedError&&SuppressedError;var i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=function(){function e(){this.state=Int32Array.from(o),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>9007199254740991)throw Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%64>=56){for(var i=this.bufferLength;i<64;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<56;i++)t.setUint8(i,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(32),i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],o=t[1],r=t[2],s=t[3],a=t[4],c=t[5],u=t[6],d=t[7],l=0;l<64;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var p=this.temp[l-2],h=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,g=((p=this.temp[l-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[l]=(h+this.temp[l-7]|0)+(g+this.temp[l-16]|0)}var f=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(d+(i[l]+this.temp[l]|0)|0)|0,E=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&o^n&r^o&r)|0;d=u,u=c,c=a,a=s+f|0,s=r,r=o,o=n,n=f+E|0}t[0]+=n,t[1]+=o,t[2]+=r,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=d},e}(),s=n(8764).lW,a=void 0!==s&&s.from?function(e){return s.from(e,"utf8")}:e=>new TextEncoder().encode(e);function c(e){return e instanceof Uint8Array?e:"string"==typeof e?a(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var u=function(){function e(e){this.secret=e,this.hash=new r,this.reset()}return e.prototype.update=function(e){if(("string"==typeof e?0!==e.length:0!==e.byteLength)&&!this.error)try{this.hash.update(c(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){var e,t,n,i;return e=this,t=void 0,n=void 0,i=function(){return function(e,t){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(e){return[2,this.digestSync()]})},new(n||(n=Promise))(function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})},e.prototype.reset=function(){if(this.hash=new r,this.secret){this.outer=new r;var e=function(e){var t=c(e);if(t.byteLength>64){var n=new r;n.update(t),t=n.digest()}var i=new Uint8Array(64);return i.set(t),i}(this.secret),t=new Uint8Array(64);t.set(e);for(var n=0;n<64;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(var n=0;n<e.byteLength;n++)e[n]=0}},e}()},1163:function(e,t,n){e.exports=n(3079)},7655:function(e,t,n){"use strict";n.d(t,{h:function(){return h}});var i=n(5),o=n(2562),r=n(105);n(8602);var s=n(6378),a=n(3638),c=n(6605),u=n(8357),d=n(7978),l=n(2655),p=n(1667);async function h({username:e,password:t,clientMetadata:n,config:h,tokenOrchestrator:g,authFlow:f,preferredChallenge:E}){let{userPoolId:m,userPoolClientId:y,userPoolEndpoint:I}=h,S=m?.split("_")[1]||"",x=await (0,r.d)(S),v={USERNAME:e,SRP_A:x.A.toString(16)};"USER_AUTH"===f&&E&&(v.PREFERRED_CHALLENGE=E);let w=(0,o.u)({username:e,userPoolId:m,userPoolClientId:y}),A=(0,s.N)({endpointResolver:(0,a.e)({endpointOverride:I})}),C=await A({region:(0,c.y)(m),userAgentValue:(0,u.W)(i.g4.SignIn)},{AuthFlow:f,AuthParameters:v,ClientMetadata:n,ClientId:y,UserContextData:w}),{ChallengeParameters:R,Session:P}=C,T=R?.USERNAME??e;return((0,p.r)(T),"PASSWORD_VERIFIER"===C.ChallengeName)?(0,l.H)(d.i,[t,R,n,P,x,h,g],T,g):C}},1326:function(e,t,n){"use strict";var i;let o;function r(){return{active:!1}}n.d(t,{E:function(){return s}});let s=(o=(i=(e,t)=>{switch(t.type){case"SET_USERNAME":return{...e,username:t.value};case"SET_SESSION":return{...e,session:t.value};case"START":return{...e,active:!0};case"RESET":return r();default:return e}})(r(),{type:"RESET"}),{getState:()=>o,dispatch:e=>{o=i(o,e)}})},5474:function(e,t,n){"use strict";let i;n.d(t,{fZ:function(){return u},k4:function(){return g},signInStore:function(){return h}});var o,r=n(4685);let s="CognitoSignInState",a={username:`${s}.username`,challengeName:`${s}.challengeName`,signInSession:`${s}.signInSession`,expiry:`${s}.expiry`},c=e=>Number(e)<=Date.now(),u=()=>{h.dispatch({type:"RESET_STATE"})},d=()=>{for(let e of Object.values(a))r.$2.removeItem(e)},l=()=>({username:void 0,challengeName:void 0,signInSession:void 0}),p=()=>{let e=r.$2.getItem(a.expiry);return!e||c(e)?(d(),l()):{username:r.$2.getItem(a.username)??void 0,challengeName:r.$2.getItem(a.challengeName)??void 0,signInSession:r.$2.getItem(a.signInSession)??void 0}},h=(i=(o=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return f({signInSession:t.value}),{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return f(t.value),{...t.value};case"SET_CHALLENGE_NAME":return f({challengeName:t.value}),{...e,challengeName:t.value};case"SET_USERNAME":return f({username:t.value}),{...e,username:t.value};case"SET_INITIAL_STATE":return p();case"RESET_STATE":return d(),l();default:return e}})(l(),{type:"SET_INITIAL_STATE"}),{getState:()=>i,dispatch:e=>{i=o(i,e)}});function g(e){h.dispatch({type:"SET_SIGN_IN_STATE",value:e})}let f=({challengeName:e,signInSession:t,username:n})=>{n&&r.$2.setItem(a.username,n),e&&r.$2.setItem(a.challengeName,e),t&&(r.$2.setItem(a.signInSession,t),r.$2.setItem(a.expiry,String(Date.now()+18e4)))}},9012:function(e,t,n){"use strict";n.d(t,{By:function(){return c},kq:function(){return s}});var i,o,r,s,a=n(5227);let c={[a.X.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[a.X.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[a.X.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[a.X.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[a.X.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[a.X.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[a.X.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[a.X.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[a.X.EmptySignInPassword]:{message:"password is required to signIn"},[a.X.EmptySignInUsername]:{message:"username is required to signIn"},[a.X.EmptySignUpPassword]:{message:"password is required to signUp"},[a.X.EmptySignUpUsername]:{message:"username is required to signUp"},[a.X.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[a.X.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[a.X.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[a.X.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[a.X.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};(i=r||(r={})).DEFAULT_MSG="Authentication Error",i.EMPTY_EMAIL="Email cannot be empty",i.EMPTY_PHONE="Phone number cannot be empty",i.EMPTY_USERNAME="Username cannot be empty",i.INVALID_USERNAME="The username should either be a string or one of the sign in types",i.EMPTY_PASSWORD="Password cannot be empty",i.EMPTY_CODE="Confirmation code cannot be empty",i.SIGN_UP_ERROR="Error creating account",i.NO_MFA="No valid MFA method provided",i.INVALID_MFA="Invalid MFA type",i.EMPTY_CHALLENGE="Challenge response cannot be empty",i.NO_USER_SESSION="Failed to get the session because the user is empty",i.NETWORK_ERROR="Network Error",i.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",i.AUTOSIGNIN_ERROR="Please use your credentials to sign in",i.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",(o=s||(s={})).SignInException="SignInException",o.OAuthSignInError="OAuthSignInException"},4686:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(5967);class o extends i._{constructor(e){super(e),this.constructor=o,Object.setPrototypeOf(this,o.prototype)}}},9509:function(e,t,n){"use strict";n.d(t,{EU:function(){return r},Jg:function(){return o},MA:function(){return a},VL:function(){return d},hj:function(){return p},mP:function(){return s},sX:function(){return h},vC:function(){return c},wW:function(){return l},x9:function(){return u}});var i=n(4686);let o="UserUnAuthenticatedException",r="UserAlreadyAuthenticatedException",s="DeviceMetadataNotFoundException",a="AutoSignInException",c=new i.l({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new i.l({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});let u=new i.l({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),d=new i.l({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),l="OAuthSignOutException",p="TokenRefreshException",h="UnexpectedSignInInterruptionException"},5227:function(e,t,n){"use strict";var i,o;n.d(t,{X:function(){return i}}),(o=i||(i={})).EmptySignInUsername="EmptySignInUsername",o.EmptySignInPassword="EmptySignInPassword",o.CustomAuthSignInPassword="CustomAuthSignInPassword",o.EmptySignUpUsername="EmptySignUpUsername",o.EmptySignUpPassword="EmptySignUpPassword",o.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",o.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",o.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",o.EmptyChallengeResponse="EmptyChallengeResponse",o.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",o.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",o.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",o.EmptyResetPasswordUsername="EmptyResetPasswordUsername",o.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",o.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",o.IncorrectMFAMethod="IncorrectMFAMethod",o.EmptyUpdatePassword="EmptyUpdatePassword"},9559:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var i=n(4982),o=n(4686);function r(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new o.l({name:i.Z.Unknown,message:"An unknown error has occurred.",underlyingError:e})}},1131:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var i=n(9012),o=n(4686);function r(e,t){let{message:n,recoverySuggestion:r}=i.By[t];if(!e)throw new o.l({name:t,message:n,recoverySuggestion:r})}},9874:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});let i="cognito-idp"},8196:function(e,t,n){"use strict";n.d(t,{n:function(){return a}});var i=n(7836),o=n(5434),r=n(8991),s=n(1847);let a={service:n(9874).t,retryDecider:(0,i.j)(o.f),computeDelay:r.k,userAgentValue:(0,s.Zm)(),cache:"no-store"}},6378:function(e,t,n){"use strict";n.d(t,{N:function(){return c}});var i=n(7099),o=n(4719),r=n(5059),s=n(5409),a=n(8196);let c=e=>(0,i.z)(s.x,(0,o.u)("InitiateAuth"),(0,r.o)(),{...a.n,...e})},8225:function(e,t,n){"use strict";n.d(t,{u:function(){return c}});var i=n(7099),o=n(5409),r=n(4719),s=n(5059),a=n(8196);let c=e=>(0,i.z)(o.x,(0,r.u)("RespondToAuthChallenge"),(0,s.o)(),{...a.n,...e})},5409:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var i=n(182),o=n(9045);let r=(0,i.V)(o.y,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}])},5059:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var i=n(5434),o=n(9559),r=n(4686);let s=()=>async e=>{if(e.statusCode>=300){let t=await (0,i.f)(e);throw(0,o.R)(t),new r.l({name:t.name,message:t.message,metadata:t.$metadata})}return(0,i.e)(e)}},4719:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});let i=e=>(t,n)=>r(n,o(e),JSON.stringify(t)),o=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),r=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"})},6605:function(e,t,n){"use strict";n.d(t,{N:function(){return r},y:function(){return o}});var i=n(4686);function o(e){let t=e?.split("_")[0];if(!e||0>e.indexOf("_")||!t||"string"!=typeof t)throw new i.l({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function r(e){if(!e||!e.includes(":"))throw new i.l({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}},9663:function(e,t,n){"use strict";n.d(t,{Dv:function(){return r},I:function(){return o}});var i=n(1326);function o(e){}function r(e=!0){i.E.dispatch({type:"RESET"})}n(4686),n(9509)},5566:function(e,t,n){"use strict";n.d(t,{f:function(){return y}});var i=n(5165),o=n(3461),r=n(5),s=n(5227),a=n(1131),c=n(8357),u=n(2562),d=n(7099),l=n(5409),p=n(4719),h=n(5059),g=n(8196);let f=e=>(0,d.z)(l.x,(0,p.u)("ConfirmForgotPassword"),(0,h.o)(),{...g.n,...e});var E=n(3638),m=n(6605);async function y(e){let t=i.d.getConfig().Auth?.Cognito;(0,o.FG)(t);let{userPoolClientId:n,userPoolId:d,userPoolEndpoint:l}=t,{username:p,newPassword:h}=e;(0,a.n)(!!p,s.X.EmptyConfirmResetPasswordUsername),(0,a.n)(!!h,s.X.EmptyConfirmResetPasswordNewPassword);let g=e.confirmationCode;(0,a.n)(!!g,s.X.EmptyConfirmResetPasswordConfirmationCode);let y=e.options?.clientMetadata,I=(0,u.u)({username:p,userPoolId:d,userPoolClientId:n}),S=f({endpointResolver:(0,E.e)({endpointOverride:l})});await S({region:(0,m.y)(t.userPoolId),userAgentValue:(0,c.W)(r.g4.ConfirmResetPassword)},{Username:p,ConfirmationCode:g,Password:h,ClientMetadata:y,ClientId:t.userPoolClientId,UserContextData:I})}},7271:function(e,t,n){"use strict";n.d(t,{_:function(){return x}});var i=n(5165),o=n(3461),r=n(5),s=n(305),a=n(1131),c=n(5227),u=n(6605),d=n(8357),l=n(2562),p=n(7099),h=n(8196),g=n(5409),f=n(4719),E=n(5059);let m=e=>(0,p.z)(g.x,(0,f.u)("ConfirmSignUp"),(0,E.o)(),{...h.n,...e});var y=n(3638),I=n(1326),S=n(9663);async function x(e){let{username:t,confirmationCode:n,options:p}=e,h=i.d.getConfig().Auth?.Cognito;(0,o.FG)(h);let{userPoolId:g,userPoolClientId:f,userPoolEndpoint:E}=h,x=p?.clientMetadata;(0,a.n)(!!t,c.X.EmptyConfirmSignUpUsername),(0,a.n)(!!n,c.X.EmptyConfirmSignUpCode);let v=(0,l.u)({username:t,userPoolId:g,userPoolClientId:f}),w=m({endpointResolver:(0,y.e)({endpointOverride:E})}),{Session:A}=await w({region:(0,u.y)(h.userPoolId),userAgentValue:(0,d.W)(r.g4.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:x,ForceAliasCreation:p?.forceAliasCreation,ClientId:h.userPoolClientId,UserContextData:v});return new Promise((e,n)=>{try{let n={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},i=I.E.getState();if(!i.active||i.username!==t){e(n),(0,S.Dv)();return}I.E.dispatch({type:"SET_SESSION",value:A});let o=s.qC.listen("auth-internal",({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),o())});s.qC.dispatch("auth-internal",{event:"confirmSignUp",data:n})}catch(e){n(e)}})}},1231:function(e,t,n){"use strict";n.d(t,{v:function(){return I}});var i=n(5165),o=n(3461),r=n(695),s=n(5),a=n(6605),c=n(6566),u=n(8460),d=n(8357),l=n(7099),p=n(5409),h=n(4719),g=n(5059),f=n(8196);let E=e=>(0,l.z)(p.x,(0,h.u)("GetUser"),(0,g.o)(),{...f.n,...e});var m=n(3638);let y=async e=>{let t=e.getConfig().Auth?.Cognito;(0,o.FG)(t);let{userPoolEndpoint:n,userPoolId:i}=t,{tokens:l}=await (0,r.y)(e,{forceRefresh:!1});(0,c.CA)(l);let p=E({endpointResolver:(0,m.e)({endpointOverride:n})}),{UserAttributes:h}=await p({region:(0,a.y)(i),userAgentValue:(0,d.W)(s.g4.FetchUserAttributes)},{AccessToken:l.accessToken.toString()});return(0,u.R)(h)},I=()=>y(i.d)},6398:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var i=n(5165),o=n(3461),r=n(6566);let s=async e=>{let t=e.getConfig().Auth?.Cognito;(0,o.FG)(t);let n=await e.Auth.getTokens({forceRefresh:!1});(0,r.CA)(n);let{"cognito:username":i,sub:s}=n.idToken?.payload??{},a={username:i,userId:s},c=n?.signInDetails;return c&&(a.signInDetails=c),a},a=async()=>s(i.d)},379:function(e,t,n){"use strict";n.d(t,{T:function(){return y}});var i=n(5165),o=n(3461),r=n(5),s=n(1131),a=n(5227),c=n(6605),u=n(8357),d=n(2562),l=n(7099),p=n(5409),h=n(4719),g=n(5059),f=n(8196);let E=e=>(0,l.z)(p.x,(0,h.u)("ResendConfirmationCode"),(0,g.o)(),{...f.n,...e});var m=n(3638);async function y(e){let{username:t}=e;(0,s.n)(!!t,a.X.EmptySignUpUsername);let n=i.d.getConfig().Auth?.Cognito;(0,o.FG)(n);let{userPoolClientId:l,userPoolId:p,userPoolEndpoint:h}=n,g=e.options?.clientMetadata,f=(0,d.u)({username:t,userPoolId:p,userPoolClientId:l}),y=E({endpointResolver:(0,m.e)({endpointOverride:h})}),{CodeDeliveryDetails:I}=await y({region:(0,c.y)(n.userPoolId),userAgentValue:(0,u.W)(r.g4.ResendSignUpCode)},{Username:t,ClientMetadata:g,ClientId:n.userPoolClientId,UserContextData:f}),{DeliveryMedium:S,AttributeName:x,Destination:v}={...I};return{destination:v,deliveryMedium:S,attributeName:x||void 0}}},267:function(e,t,n){"use strict";n.d(t,{c:function(){return y}});var i=n(5165),o=n(3461),r=n(5),s=n(5227),a=n(1131),c=n(6605),u=n(8357),d=n(2562),l=n(7099),p=n(5409),h=n(4719),g=n(5059),f=n(8196);let E=e=>(0,l.z)(p.x,(0,h.u)("ForgotPassword"),(0,g.o)(),{...f.n,...e});var m=n(3638);async function y(e){let{username:t}=e;(0,a.n)(!!t,s.X.EmptyResetPasswordUsername);let n=i.d.getConfig().Auth?.Cognito;(0,o.FG)(n);let{userPoolClientId:l,userPoolId:p,userPoolEndpoint:h}=n,g=e.options?.clientMetadata,f=(0,d.u)({username:t,userPoolId:p,userPoolClientId:l}),y=E({endpointResolver:(0,m.e)({endpointOverride:h})}),I=(await y({region:(0,c.y)(p),userAgentValue:(0,u.W)(r.g4.ResetPassword)},{Username:t,ClientMetadata:g,ClientId:l,UserContextData:f})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:I?.DeliveryMedium,destination:I?.Destination,attributeName:I?.AttributeName}}}}},4638:function(e,t,n){"use strict";n.d(t,{z:function(){return x}});var i=n(269),o=n(5165),r=n(3461),s=n(5227),a=n(1131),c=n(9559),u=n(5474),d=n(4388),l=n(8714),p=n(9749),h=n(2655),g=n(6772);async function f(e){let t=o.d.getConfig().Auth?.Cognito;(0,r.FG)(t);let{username:n,password:f,options:E}=e,m={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},y=E?.clientMetadata;(0,a.n)(!!n,s.X.EmptySignInUsername),(0,a.n)(!f,s.X.CustomAuthSignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:s}=await (0,h.H)(i.pB,[n,y,t,l.C],n,l.C),a=(0,i.QS)(n);if((0,u.k4)({signInSession:s,username:a,challengeName:e,signInDetails:m}),r)return await (0,d.x)({username:a,...r,NewDeviceMetadata:await (0,g.F)({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:m}),(0,u.fZ)(),await (0,p.O)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.cP)({challengeName:e,challengeParameters:o})}catch(t){(0,u.fZ)(),(0,c.R)(t);let e=(0,i.yM)(t.name);if(e)return e;throw t}}async function E(e){let{username:t,password:n,options:h}=e,f={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},E=o.d.getConfig().Auth?.Cognito;(0,r.FG)(E);let m=h?.clientMetadata;(0,a.n)(!!t,s.X.EmptySignInUsername),(0,a.n)(!!n,s.X.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:s}=await (0,i.Mf)(t,n,m,E,l.C),a=(0,i.QS)(t);if((0,u.k4)({signInSession:s,username:a,challengeName:e,signInDetails:f}),r)return await (0,d.x)({username:a,...r,NewDeviceMetadata:await (0,g.F)({userPoolId:E.userPoolId,userPoolEndpoint:E.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:f}),(0,u.fZ)(),await (0,p.O)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.cP)({challengeName:e,challengeParameters:o})}catch(t){(0,u.fZ)(),(0,c.R)(t);let e=(0,i.yM)(t.name);if(e)return e;throw t}}var m=n(9663);async function y(e){let{username:t,password:n}=e,h=o.d.getConfig().Auth?.Cognito,f={loginId:t,authFlowType:"USER_SRP_AUTH"};(0,r.FG)(h);let E=e.options?.clientMetadata;(0,a.n)(!!t,s.X.EmptySignInUsername),(0,a.n)(!!n,s.X.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:s}=await (0,i.U)(t,n,E,h,l.C),a=(0,i.QS)(t);if((0,u.k4)({signInSession:s,username:a,challengeName:e,signInDetails:f}),r)return await (0,d.x)({username:a,...r,NewDeviceMetadata:await (0,g.F)({userPoolId:h.userPoolId,userPoolEndpoint:h.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:f}),(0,u.fZ)(),await (0,p.O)(),(0,m.Dv)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.cP)({challengeName:e,challengeParameters:o})}catch(t){(0,u.fZ)(),(0,m.Dv)(),(0,c.R)(t);let e=(0,i.yM)(t.name);if(e)return e;throw t}}async function I(e){let{username:t,password:n,options:f}=e,E=o.d.getConfig().Auth?.Cognito,y={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};(0,r.FG)(E);let I=f?.clientMetadata;(0,a.n)(!!t,s.X.EmptySignInUsername),(0,a.n)(!!n,s.X.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:s}=await (0,h.H)(i.x6,[t,n,I,E,l.C],t,l.C),a=(0,i.QS)(t);if((0,u.k4)({signInSession:s,username:a,challengeName:e,signInDetails:y}),r)return await (0,d.x)({...r,username:a,NewDeviceMetadata:await (0,g.F)({userPoolId:E.userPoolId,userPoolEndpoint:E.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:y}),(0,u.fZ)(),await (0,p.O)(),(0,m.Dv)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.cP)({challengeName:e,challengeParameters:o})}catch(t){(0,u.fZ)(),(0,m.Dv)(),(0,c.R)(t);let e=(0,i.yM)(t.name);if(e)return e;throw t}}var S=n(8972);async function x(e){(0,m.Dv)(!1);let t=e.options?.authFlowType;switch(await (0,i.OP)(),t){case"USER_SRP_AUTH":default:return y(e);case"USER_PASSWORD_AUTH":return I(e);case"CUSTOM_WITHOUT_SRP":return f(e);case"CUSTOM_WITH_SRP":return E(e);case"USER_AUTH":return(0,S.G)(e)}}},8972:function(e,t,n){"use strict";n.d(t,{G:function(){return C}});var i=n(5165),o=n(3461),r=n(5227),s=n(1131),a=n(9559),c=n(269),u=n(1326),d=n(5474),l=n(4388),p=n(9749),h=n(8714),g=n(5),f=n(2562),E=n(6378),m=n(3638),y=n(6605),I=n(8357),S=n(7655),x=n(1667);async function v({username:e,clientMetadata:t,config:n,tokenOrchestrator:i,preferredChallenge:o,password:a,session:c}){let{userPoolId:u,userPoolClientId:d,userPoolEndpoint:l}=n,p=(0,f.u)({username:e,userPoolId:u,userPoolClientId:d}),h={USERNAME:e};if(o){if("PASSWORD_SRP"===o)return(0,s.n)(!!a,r.X.EmptySignInPassword),(0,S.h)({username:e,password:a,clientMetadata:t,config:n,tokenOrchestrator:i,authFlow:"USER_AUTH",preferredChallenge:o});"PASSWORD"===o&&((0,s.n)(!!a,r.X.EmptySignInPassword),h.PASSWORD=a),h.PREFERRED_CHALLENGE=o}let v={AuthFlow:"USER_AUTH",AuthParameters:h,ClientMetadata:t,ClientId:d,UserContextData:p};c&&(v.Session=c);let w=(0,E.N)({endpointResolver:(0,m.e)({endpointOverride:l})}),A=await w({region:(0,y.y)(u),userAgentValue:(0,I.W)(g.g4.SignIn)},v);return(0,x.r)(e),A}var w=n(6772),A=n(9663);async function C(e){let{username:t,password:n,options:g}=e,f=i.d.getConfig().Auth?.Cognito,E={loginId:t,authFlowType:"USER_AUTH"};(0,o.FG)(f);let m=g?.clientMetadata,y=g?.preferredChallenge;(0,s.n)(!!t,r.X.EmptySignInUsername);try{let e={username:t,config:f,tokenOrchestrator:h.C,clientMetadata:m,preferredChallenge:y,password:n},i=u.E.getState();i.active&&i.username===t&&(e.session=i.session);let o=await v(e),r=(0,c.QS)(t);if((0,d.k4)({signInSession:o.Session,username:r,challengeName:o.ChallengeName,signInDetails:E}),o.AuthenticationResult)return await (0,l.x)({username:r,...o.AuthenticationResult,NewDeviceMetadata:await (0,w.F)({userPoolId:f.userPoolId,userPoolEndpoint:f.userPoolEndpoint,newDeviceMetadata:o.AuthenticationResult.NewDeviceMetadata,accessToken:o.AuthenticationResult.AccessToken}),signInDetails:E}),(0,d.fZ)(),await (0,p.O)(),(0,A.Dv)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,c.cP)({challengeName:o.ChallengeName,challengeParameters:o.ChallengeParameters,availableChallenges:"AvailableChallenges"in o?o.AvailableChallenges:void 0})}catch(t){(0,d.fZ)(),(0,A.Dv)(),(0,a.R)(t);let e=(0,c.yM)(t.name);if(e)return e;throw t}}},8689:function(e,t,n){"use strict";n.d(t,{w:function(){return D}});var i=n(6344),o=n(5165),r=n(4685);function s(){return o.d.Auth.clearCredentials()}var a=n(305),c=n(3461),u=n(5),d=n(8357),l=n(4686),p=n(4574),h=n(8714),g=n(6605),f=n(6566);n(8602);let E=async e=>{await e.clearOAuthData(),h.C.clearTokens(),await s(),a.Xb.dispatch("auth",{event:"signedOut"},"Auth",a.SQ)},m=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var y=n(9509);let I=e=>e.startsWith(String((window.location.origin+window.location.pathname)??"/")),S=e=>e.includes(String(window.location.hostname)),x=e=>e.startsWith("http://"),v=e=>e.startsWith("https://"),w=async(e,t=!1,n)=>{(0,c.V0)(e);let{loginWith:i,userPoolClientId:o}=e,{domain:r,redirectSignOut:s}=i.oauth,a=function(e,t){if(t){let n=e?.find(e=>e===t);if(!n)throw y.x9;return n}{let t=e?.find(I)??e?.find(S),n=e?.find(v)??e?.find(x);if(t)return t;if(n)throw y.VL;throw y.vC}}(s,n);return m(`https://${r}/logout?${Object.entries({client_id:o,logout_uri:encodeURIComponent(a)}).map(([e,t])=>`${e}=${t}`).join("&")}`)},A=async(e,t,n,i)=>{let{isOAuthSignIn:o}=await t.loadOAuthSignIn(),r=await n.getOAuthMetadata();if(await E(t),o||r?.oauthSignIn)return w(e,!1,i)};var C=n(7099),R=n(5409),P=n(4719),T=n(5059),N=n(8196);let U=e=>(0,C.z)(R.x,(0,P.u)("RevokeToken"),(0,T.o)(),{...N.n,...e}),b=e=>(0,C.z)(R.x,(0,P.u)("GlobalSignOut"),(0,T.o)(),{...N.n,...e});var _=n(3638);let F=new i.k("Auth");async function D(e){let t;let n=o.d.getConfig().Auth?.Cognito;(0,c.FG)(n),e?.global?await M(n):await k(n);try{(0,c.V0)(n),t=!0}catch(e){t=!1}if(t){let t=new p.R(r.Fm);t.setAuthConfig(n);let{type:i}=await A(n,t,h.C,e?.oauth?.redirectUrl)??{};if("error"===i)throw new l.l({name:y.wW,message:"An error occurred when attempting to log out from OAuth provider."})}else h.C.clearTokens(),await s(),a.Xb.dispatch("auth",{event:"signedOut"},"Auth",a.SQ)}async function k(e){try{let{userPoolEndpoint:t,userPoolId:n,userPoolClientId:i}=e,o=await h.C.getTokenStore().loadTokens();if((0,f.XD)(o),O(o.accessToken)){let e=U({endpointResolver:(0,_.e)({endpointOverride:t})});await e({region:(0,g.y)(n),userAgentValue:(0,d.W)(u.g4.SignOut)},{ClientId:i,Token:o.refreshToken})}}catch(e){F.debug("Client signOut error caught but will proceed with token removal")}}async function M(e){try{let{userPoolEndpoint:t,userPoolId:n}=e,i=await h.C.getTokenStore().loadTokens();(0,f.CA)(i);let o=b({endpointResolver:(0,_.e)({endpointOverride:t})});await o({region:(0,g.y)(n),userAgentValue:(0,d.W)(u.g4.SignOut)},{AccessToken:i.accessToken.toString()})}catch(e){F.debug("Global signOut error caught but will proceed with token removal")}}let O=e=>!!e?.payload?.origin_jti},2195:function(e,t,n){"use strict";n.d(t,{y:function(){return k}});var i=n(5165),o=n(3461),r=n(5),s=n(1131),a=n(5227),c=n(6605),u=n(8460),d=n(305),l=n(4638),p=n(4686),h=n(9663),g=n(9509),f=n(8972);function E(e,t){let n;return i=>{n||e(...i),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}let m=E(function(e,t,n){let i=Date.now(),o=setInterval(async()=>{if(Date.now()-i>18e4)clearInterval(o),n(new p.l({name:g.MA,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),(0,h.Dv)();else try{let n=await (0,l.z)(e);"CONFIRM_SIGN_UP"!==n.nextStep.signInStep&&(t(n),clearInterval(o),(0,h.Dv)())}catch(e){clearInterval(o),n(e),(0,h.Dv)()}},5e3)},300),y=E(I,300);async function I(e,t,n){try{let n=e?.options?.authFlowType==="USER_AUTH"?await (0,f.G)(e):await (0,l.z)(e);t(n),(0,h.Dv)()}catch(e){n(e),(0,h.Dv)()}}function S(e){return async()=>new Promise((t,n)=>{y([e,t,n])})}var x=n(2562),v=n(8357),w=n(7099),A=n(5434),C=n(9012),R=n(9559),P=n(4808),T=n(4719),N=n(5409),U=n(8196);let b=()=>async e=>{if(e.statusCode>=300){let t=await (0,A.f)(e);if((0,R.R)(t),t.name===P.y3.InvalidParameterException&&/'password'/.test(t.message)&&/Member must not be null/.test(t.message)){let e=a.X.EmptySignUpPassword,{message:t,recoverySuggestion:n}=C.By[e];throw new p.l({name:e,message:t,recoverySuggestion:n})}throw new p.l({name:t.name,message:t.message})}return(0,A.e)(e)},_=e=>(0,w.z)(N.x,(0,T.u)("SignUp"),b(),{...U.n,...e});var F=n(3638),D=n(1326);async function k(e){let{username:t,password:n,options:l}=e,p=i.d.getConfig().Auth?.Cognito,g=p?.signUpVerificationMethod??"code",{clientMetadata:f,validationData:E,autoSignIn:y}=e.options??{};(0,o.FG)(p),(0,s.n)(!!t,a.X.EmptySignUpUsername);let I="boolean"!=typeof y?y:void 0,w={username:t,options:I};I?.authFlowType!=="CUSTOM_WITHOUT_SRP"&&(w.password=n);let{userPoolId:A,userPoolClientId:C,userPoolEndpoint:R}=p,P=_({endpointResolver:(0,F.e)({endpointOverride:R})}),T={Username:t,Password:void 0,UserAttributes:l?.userAttributes&&(0,u.J)(l?.userAttributes),ClientMetadata:f,ValidationData:E&&(0,u.J)(E),ClientId:C,UserContextData:(0,x.u)({username:t,userPoolId:A,userPoolClientId:C})};n&&(T.Password=n);let{UserSub:N,CodeDeliveryDetails:U,UserConfirmed:b,Session:k}=await P({region:(0,c.y)(A),userAgentValue:(0,v.W)(r.g4.SignUp)},T);(I||!0===y)&&(D.E.dispatch({type:"START"}),D.E.dispatch({type:"SET_USERNAME",value:t}),D.E.dispatch({type:"SET_SESSION",value:k}));let M={destination:U?.Destination,deliveryMedium:U?.DeliveryMedium,attributeName:U?.AttributeName},O=D.E.getState().active;if(b)return O?((0,h.I)(S(w)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:N}):{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:N};if(O){if("link"===g)return(0,h.I)(async()=>new Promise((e,t)=>{m([w,e,t])})),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:M},userId:N};!function(e){let t=d.qC.listen("auth-internal",async({payload:n})=>{if("confirmSignUp"===n.event){let i=n.data;i?.isSignUpComplete&&(d.qC.dispatch("auth-internal",{event:"autoSignIn"}),(0,h.I)(S(e)),t())}}),n=setTimeout(()=>{t(),clearTimeout(n),(0,h.Dv)()},18e4)}(w)}return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:M},userId:N}}},4669:function(e,t,n){"use strict";n.d(t,{V:function(){return I}});var i=n(5165),o=n(695);let r=e=>(0,o.y)(i.d,e);var s=n(3461),a=n(5),c=n(6566),u=n(6605),d=n(8460),l=n(8357),p=n(7099),h=n(5409),g=n(4719),f=n(5059),E=n(8196);let m=e=>(0,p.z)(h.x,(0,g.u)("UpdateUserAttributes"),(0,f.o)(),{...E.n,...e});var y=n(3638);let I=async e=>{let{userAttributes:t,options:n}=e,o=i.d.getConfig().Auth?.Cognito,p=n?.clientMetadata;(0,s.FG)(o);let{userPoolEndpoint:h,userPoolId:g}=o,{tokens:f}=await r({forceRefresh:!1});(0,c.CA)(f);let E=m({endpointResolver:(0,y.e)({endpointOverride:h})}),{CodeDeliveryDetailsList:I}=await E({region:(0,u.y)(g),userAgentValue:(0,l.W)(a.g4.UpdateUserAttributes)},{AccessToken:f.accessToken.toString(),ClientMetadata:p,UserAttributes:(0,d.J)(t)});return{...function(e){let t={};return Object.keys(e)?.forEach(e=>{t[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}(t),...function(e){let t={};return e?.forEach(e=>{let{AttributeName:n,DeliveryMedium:i,Destination:o}=e;n&&(t[n]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:n,deliveryMedium:i,destination:o}}})}),t}(I)}}},3638:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(6743),o=n(8481),r=n(9874);let s=({region:e})=>({url:new i.a(`https://${r.t}.${e}.${(0,o.b)(e)}`)}),a=({endpointOverride:e})=>t=>e?{url:new i.a(e)}:s(t)},2684:function(e,t,n){"use strict";n.d(t,{sI:function(){return l},_X:function(){return h}});var i,o=n(3461),r=n(4686);let s={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var a=n(2199);(i||(i={})).InvalidAuthTokens="InvalidAuthTokens";let c={[i.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},u=(0,a.$)(c),d="CognitoIdentityServiceProvider";class l{getKeyValueStorage(){if(!this.keyValueStorage)throw new r.l({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{let e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new r.l({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let n=(0,o.xp)(t),i=await this.getKeyValueStorage().getItem(e.idToken),s=i?(0,o.xp)(i):void 0,a=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,c=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",u=Number.parseInt(c),d=await this.getKeyValueStorage().getItem(e.signInDetails),l={accessToken:n,idToken:s,refreshToken:a,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:u,username:await this.getLastAuthUser()};return d&&(l.signInDetails=JSON.parse(d)),l}catch(e){return null}}async storeTokens(e){u(void 0!==e,i.InvalidAuthTokens);let t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(n.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${e.clockDrift}`)}async clearTokens(){let e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){let t=await this.getAuthKeys(e),n=await this.getKeyValueStorage().getItem(t.deviceKey),i=await this.getKeyValueStorage().getItem(t.deviceGroupKey),o=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return o&&i&&n?{deviceKey:n,deviceGroupKey:i,randomPassword:o}:null}async clearDeviceMetadata(e){let t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){(0,o.FG)(this.authConfig?.Cognito);let t=e??await this.getLastAuthUser();return p(d,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){(0,o.FG)(this.authConfig?.Cognito);let e=this.authConfig.Cognito.userPoolClientId;return`${d}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){let{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){let{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}let p=(e,t)=>h(s)(`${e}`,t);function h(e){let t=Object.values({...e});return(e,n)=>t.reduce((t,i)=>({...t,[i]:`${e}.${n}.${i}`}),{})}},4388:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var i=n(3461),o=n(5967),r=n(8714);async function s(e){if(e.AccessToken){let t,n,o;let s=(0,i.xp)(e.AccessToken),a=1e3*(s.payload.iat||0),c=new Date().getTime();e.RefreshToken&&(n=e.RefreshToken),e.IdToken&&(t=(0,i.xp)(e.IdToken)),e?.NewDeviceMetadata&&(o=e.NewDeviceMetadata);let u={accessToken:s,idToken:t,refreshToken:n,clockDrift:a>0?a-c:0,deviceMetadata:o,username:e.username};e?.signInDetails&&(u.signInDetails=e.signInDetails),await r.C.setTokens({tokens:u})}else throw new o._({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}},8714:function(e,t,n){"use strict";let i;n.d(t,{D:function(){return C},C:function(){return R}});var o,r=n(4685),s=n(3461),a=n(6605),c=n(6566),u=n(4686),d=n(6378),l=n(3638),p=n(2562);let h=(o=async({tokens:e,authConfig:t,username:n})=>{(0,s.FG)(t?.Cognito);let{userPoolId:i,userPoolClientId:o,userPoolEndpoint:r}=t.Cognito,h=(0,a.y)(i);(0,c.XD)(e);let g=e.refreshToken,f={REFRESH_TOKEN:g};e.deviceMetadata?.deviceKey&&(f.DEVICE_KEY=e.deviceMetadata.deviceKey);let E=(0,p.u)({username:n,userPoolId:i,userPoolClientId:o}),m=(0,d.N)({endpointResolver:(0,l.e)({endpointOverride:r})}),{AuthenticationResult:y}=await m({region:h},{ClientId:o,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:f,UserContextData:E}),I=(0,s.xp)(y?.AccessToken??""),S=y?.IdToken?(0,s.xp)(y.IdToken):void 0,{iat:x}=I.payload;if(!x)throw new u.l({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:I,idToken:S,clockDrift:1e3*x-new Date().getTime(),refreshToken:g,username:n}},async(...e)=>i||(i=new Promise((t,n)=>{o(...e).then(e=>{t(e)}).catch(e=>{n(e)}).finally(()=>{i=void 0})})));var g=n(2684),f=n(305),E=n(2459);function m({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}var y=n(4982),I=n(9559);let S=new(n(4574)).R(r.Fm),x=[],v=e=>{x.push(e)};class w{constructor(){this.waitForInflightOAuth=(0,E.j)()?async()=>await S.loadOAuthInFlight()?(this.inflightPromise||(this.inflightPromise=new Promise((e,t)=>{v(e)})),this.inflightPromise):void 0:async()=>{}}setAuthConfig(e){S.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new u.l({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new u.l({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{(0,s.FG)(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();let n=await this.getTokenStore().getLastAuthUser();if(null===t)return null;let i=!!t?.idToken&&m({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),o=m({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(e?.forceRefresh||i||o)&&null===(t=await this.refreshTokens({tokens:t,username:n}))?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{let{signInDetails:n}=e,i=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return i.signInDetails=n,await this.setTokens({tokens:i}),f.Xb.dispatch("auth",{event:"tokenRefresh"},"Auth",f.SQ),i}catch(e){return this.handleErrors(e)}}handleErrors(e){if((0,I.R)(e),e.name!==y.Z.NetworkError&&this.clearTokens(),f.Xb.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",f.SQ),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class A{constructor(){this.authTokenStore=new g.sI,this.authTokenStore.setKeyValueStorage(r.Fm),this.tokenOrchestrator=new w,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(h)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}let C=new A,{tokenOrchestrator:R}=C},4808:function(e,t,n){"use strict";var i,o,r,s,a,c,u,d,l,p,h,g,f,E,m,y,I,S,x,v,w,A,C,R,P,T,N,U,b,_,F,D,k,M,O,L,V,K,q,G,B,W,$,z,H,j,Z,X;n.d(t,{OK:function(){return m},y3:function(){return x}}),(P=i||(i={})).ConcurrentModificationException="ConcurrentModificationException",P.ForbiddenException="ForbiddenException",P.InternalErrorException="InternalErrorException",P.InvalidParameterException="InvalidParameterException",P.NotAuthorizedException="NotAuthorizedException",P.ResourceNotFoundException="ResourceNotFoundException",P.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",(T=o||(o={})).ForbiddenException="ForbiddenException",T.InternalErrorException="InternalErrorException",T.InvalidParameterException="InvalidParameterException",T.InvalidPasswordException="InvalidPasswordException",T.LimitExceededException="LimitExceededException",T.NotAuthorizedException="NotAuthorizedException",T.PasswordResetRequiredException="PasswordResetRequiredException",T.ResourceNotFoundException="ResourceNotFoundException",T.TooManyRequestsException="TooManyRequestsException",T.UserNotConfirmedException="UserNotConfirmedException",T.UserNotFoundException="UserNotFoundException",(N=r||(r={})).ForbiddenException="ForbiddenException",N.InternalErrorException="InternalErrorException",N.InvalidLambdaResponseException="InvalidLambdaResponseException",N.InvalidParameterException="InvalidParameterException",N.InvalidPasswordException="InvalidPasswordException",N.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",N.NotAuthorizedException="NotAuthorizedException",N.PasswordResetRequiredException="PasswordResetRequiredException",N.ResourceNotFoundException="ResourceNotFoundException",N.TooManyRequestsException="TooManyRequestsException",N.UsernameExistsException="UsernameExistsException",N.UserNotConfirmedException="UserNotConfirmedException",N.UserNotFoundException="UserNotFoundException",(U=s||(s={})).CodeMismatchException="CodeMismatchException",U.ExpiredCodeException="ExpiredCodeException",U.ForbiddenException="ForbiddenException",U.InternalErrorException="InternalErrorException",U.InvalidLambdaResponseException="InvalidLambdaResponseException",U.InvalidParameterException="InvalidParameterException",U.InvalidPasswordException="InvalidPasswordException",U.LimitExceededException="LimitExceededException",U.NotAuthorizedException="NotAuthorizedException",U.ResourceNotFoundException="ResourceNotFoundException",U.TooManyFailedAttemptsException="TooManyFailedAttemptsException",U.TooManyRequestsException="TooManyRequestsException",U.UnexpectedLambdaException="UnexpectedLambdaException",U.UserLambdaValidationException="UserLambdaValidationException",U.UserNotConfirmedException="UserNotConfirmedException",U.UserNotFoundException="UserNotFoundException",(b=a||(a={})).AliasExistsException="AliasExistsException",b.CodeMismatchException="CodeMismatchException",b.ExpiredCodeException="ExpiredCodeException",b.ForbiddenException="ForbiddenException",b.InternalErrorException="InternalErrorException",b.InvalidLambdaResponseException="InvalidLambdaResponseException",b.InvalidParameterException="InvalidParameterException",b.LimitExceededException="LimitExceededException",b.NotAuthorizedException="NotAuthorizedException",b.ResourceNotFoundException="ResourceNotFoundException",b.TooManyFailedAttemptsException="TooManyFailedAttemptsException",b.TooManyRequestsException="TooManyRequestsException",b.UnexpectedLambdaException="UnexpectedLambdaException",b.UserLambdaValidationException="UserLambdaValidationException",b.UserNotFoundException="UserNotFoundException",(_=c||(c={})).ForbiddenException="ForbiddenException",_.InternalErrorException="InternalErrorException",_.InvalidParameterException="InvalidParameterException",_.NotAuthorizedException="NotAuthorizedException",_.PasswordResetRequiredException="PasswordResetRequiredException",_.ResourceNotFoundException="ResourceNotFoundException",_.TooManyRequestsException="TooManyRequestsException",_.UserNotConfirmedException="UserNotConfirmedException",_.UserNotFoundException="UserNotFoundException",(F=u||(u={})).ForbiddenException="ForbiddenException",F.InternalErrorException="InternalErrorException",F.InvalidParameterException="InvalidParameterException",F.NotAuthorizedException="NotAuthorizedException",F.PasswordResetRequiredException="PasswordResetRequiredException",F.ResourceNotFoundException="ResourceNotFoundException",F.TooManyRequestsException="TooManyRequestsException",F.UserNotConfirmedException="UserNotConfirmedException",F.UserNotFoundException="UserNotFoundException",(D=d||(d={})).ForbiddenException="ForbiddenException",D.InternalErrorException="InternalErrorException",D.InvalidParameterException="InvalidParameterException",D.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",D.NotAuthorizedException="NotAuthorizedException",D.PasswordResetRequiredException="PasswordResetRequiredException",D.ResourceNotFoundException="ResourceNotFoundException",D.TooManyRequestsException="TooManyRequestsException",D.UserNotConfirmedException="UserNotConfirmedException",D.UserNotFoundException="UserNotFoundException",(k=l||(l={})).CodeDeliveryFailureException="CodeDeliveryFailureException",k.ForbiddenException="ForbiddenException",k.InternalErrorException="InternalErrorException",k.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",k.InvalidLambdaResponseException="InvalidLambdaResponseException",k.InvalidParameterException="InvalidParameterException",k.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",k.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",k.LimitExceededException="LimitExceededException",k.NotAuthorizedException="NotAuthorizedException",k.ResourceNotFoundException="ResourceNotFoundException",k.TooManyRequestsException="TooManyRequestsException",k.UnexpectedLambdaException="UnexpectedLambdaException",k.UserLambdaValidationException="UserLambdaValidationException",k.UserNotFoundException="UserNotFoundException",(M=p||(p={})).ForbiddenException="ForbiddenException",M.InternalErrorException="InternalErrorException",M.InvalidParameterException="InvalidParameterException",M.NotAuthorizedException="NotAuthorizedException",M.PasswordResetRequiredException="PasswordResetRequiredException",M.ResourceNotFoundException="ResourceNotFoundException",M.TooManyRequestsException="TooManyRequestsException",M.UserNotConfirmedException="UserNotConfirmedException",M.UserNotFoundException="UserNotFoundException",(O=h||(h={})).ExternalServiceException="ExternalServiceException",O.InternalErrorException="InternalErrorException",O.InvalidParameterException="InvalidParameterException",O.LimitExceededException="LimitExceededException",O.NotAuthorizedException="NotAuthorizedException",O.ResourceConflictException="ResourceConflictException",O.ResourceNotFoundException="ResourceNotFoundException",O.TooManyRequestsException="TooManyRequestsException",(L=g||(g={})).ExternalServiceException="ExternalServiceException",L.InternalErrorException="InternalErrorException",L.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",L.InvalidParameterException="InvalidParameterException",L.NotAuthorizedException="NotAuthorizedException",L.ResourceConflictException="ResourceConflictException",L.ResourceNotFoundException="ResourceNotFoundException",L.TooManyRequestsException="TooManyRequestsException",(V=f||(f={})).CodeDeliveryFailureException="CodeDeliveryFailureException",V.ForbiddenException="ForbiddenException",V.InternalErrorException="InternalErrorException",V.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",V.InvalidLambdaResponseException="InvalidLambdaResponseException",V.InvalidParameterException="InvalidParameterException",V.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",V.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",V.LimitExceededException="LimitExceededException",V.NotAuthorizedException="NotAuthorizedException",V.PasswordResetRequiredException="PasswordResetRequiredException",V.ResourceNotFoundException="ResourceNotFoundException",V.TooManyRequestsException="TooManyRequestsException",V.UnexpectedLambdaException="UnexpectedLambdaException",V.UserLambdaValidationException="UserLambdaValidationException",V.UserNotConfirmedException="UserNotConfirmedException",V.UserNotFoundException="UserNotFoundException",(K=E||(E={})).ForbiddenException="ForbiddenException",K.InternalErrorException="InternalErrorException",K.InvalidParameterException="InvalidParameterException",K.NotAuthorizedException="NotAuthorizedException",K.PasswordResetRequiredException="PasswordResetRequiredException",K.ResourceNotFoundException="ResourceNotFoundException",K.TooManyRequestsException="TooManyRequestsException",K.UserNotConfirmedException="UserNotConfirmedException",(q=m||(m={})).PasswordResetRequiredException="PasswordResetRequiredException",q.ForbiddenException="ForbiddenException",q.InternalErrorException="InternalErrorException",q.InvalidLambdaResponseException="InvalidLambdaResponseException",q.InvalidParameterException="InvalidParameterException",q.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",q.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",q.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",q.NotAuthorizedException="NotAuthorizedException",q.ResourceNotFoundException="ResourceNotFoundException",q.TooManyRequestsException="TooManyRequestsException",q.UnexpectedLambdaException="UnexpectedLambdaException",q.UserLambdaValidationException="UserLambdaValidationException",q.UserNotConfirmedException="UserNotConfirmedException",q.UserNotFoundException="UserNotFoundException",(G=y||(y={})).CodeDeliveryFailureException="CodeDeliveryFailureException",G.ForbiddenException="ForbiddenException",G.InternalErrorException="InternalErrorException",G.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",G.InvalidLambdaResponseException="InvalidLambdaResponseException",G.InvalidParameterException="InvalidParameterException",G.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",G.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",G.LimitExceededException="LimitExceededException",G.NotAuthorizedException="NotAuthorizedException",G.ResourceNotFoundException="ResourceNotFoundException",G.TooManyRequestsException="TooManyRequestsException",G.UnexpectedLambdaException="UnexpectedLambdaException",G.UserLambdaValidationException="UserLambdaValidationException",G.UserNotFoundException="UserNotFoundException",(B=I||(I={})).AliasExistsException="AliasExistsException",B.CodeMismatchException="CodeMismatchException",B.ExpiredCodeException="ExpiredCodeException",B.ForbiddenException="ForbiddenException",B.InternalErrorException="InternalErrorException",B.InvalidLambdaResponseException="InvalidLambdaResponseException",B.InvalidParameterException="InvalidParameterException",B.InvalidPasswordException="InvalidPasswordException",B.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",B.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",B.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",B.MFAMethodNotFoundException="MFAMethodNotFoundException",B.NotAuthorizedException="NotAuthorizedException",B.PasswordResetRequiredException="PasswordResetRequiredException",B.ResourceNotFoundException="ResourceNotFoundException",B.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",B.TooManyRequestsException="TooManyRequestsException",B.UnexpectedLambdaException="UnexpectedLambdaException",B.UserLambdaValidationException="UserLambdaValidationException",B.UserNotConfirmedException="UserNotConfirmedException",B.UserNotFoundException="UserNotFoundException",(W=S||(S={})).ForbiddenException="ForbiddenException",W.InternalErrorException="InternalErrorException",W.InvalidParameterException="InvalidParameterException",W.NotAuthorizedException="NotAuthorizedException",W.PasswordResetRequiredException="PasswordResetRequiredException",W.ResourceNotFoundException="ResourceNotFoundException",W.UserNotConfirmedException="UserNotConfirmedException",W.UserNotFoundException="UserNotFoundException",($=x||(x={})).CodeDeliveryFailureException="CodeDeliveryFailureException",$.InternalErrorException="InternalErrorException",$.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",$.InvalidLambdaResponseException="InvalidLambdaResponseException",$.InvalidParameterException="InvalidParameterException",$.InvalidPasswordException="InvalidPasswordException",$.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",$.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",$.NotAuthorizedException="NotAuthorizedException",$.ResourceNotFoundException="ResourceNotFoundException",$.TooManyRequestsException="TooManyRequestsException",$.UnexpectedLambdaException="UnexpectedLambdaException",$.UserLambdaValidationException="UserLambdaValidationException",$.UsernameExistsException="UsernameExistsException",(z=v||(v={})).AliasExistsException="AliasExistsException",z.CodeDeliveryFailureException="CodeDeliveryFailureException",z.CodeMismatchException="CodeMismatchException",z.ExpiredCodeException="ExpiredCodeException",z.ForbiddenException="ForbiddenException",z.InternalErrorException="InternalErrorException",z.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",z.InvalidLambdaResponseException="InvalidLambdaResponseException",z.InvalidParameterException="InvalidParameterException",z.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",z.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",z.NotAuthorizedException="NotAuthorizedException",z.PasswordResetRequiredException="PasswordResetRequiredException",z.ResourceNotFoundException="ResourceNotFoundException",z.TooManyRequestsException="TooManyRequestsException",z.UnexpectedLambdaException="UnexpectedLambdaException",z.UserLambdaValidationException="UserLambdaValidationException",z.UserNotConfirmedException="UserNotConfirmedException",z.UserNotFoundException="UserNotFoundException",(H=w||(w={})).CodeMismatchException="CodeMismatchException",H.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",H.ForbiddenException="ForbiddenException",H.InternalErrorException="InternalErrorException",H.InvalidParameterException="InvalidParameterException",H.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",H.NotAuthorizedException="NotAuthorizedException",H.PasswordResetRequiredException="PasswordResetRequiredException",H.ResourceNotFoundException="ResourceNotFoundException",H.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",H.TooManyRequestsException="TooManyRequestsException",H.UserNotConfirmedException="UserNotConfirmedException",H.UserNotFoundException="UserNotFoundException",(j=A||(A={})).AliasExistsException="AliasExistsException",j.CodeMismatchException="CodeMismatchException",j.ExpiredCodeException="ExpiredCodeException",j.ForbiddenException="ForbiddenException",j.InternalErrorException="InternalErrorException",j.InvalidParameterException="InvalidParameterException",j.LimitExceededException="LimitExceededException",j.NotAuthorizedException="NotAuthorizedException",j.PasswordResetRequiredException="PasswordResetRequiredException",j.ResourceNotFoundException="ResourceNotFoundException",j.TooManyRequestsException="TooManyRequestsException",j.UserNotConfirmedException="UserNotConfirmedException",j.UserNotFoundException="UserNotFoundException",(Z=C||(C={})).ForbiddenException="ForbiddenException",Z.InternalErrorException="InternalErrorException",Z.InvalidParameterException="InvalidParameterException",Z.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",Z.NotAuthorizedException="NotAuthorizedException",Z.PasswordResetRequiredException="PasswordResetRequiredException",Z.ResourceNotFoundException="ResourceNotFoundException",Z.TooManyRequestsException="TooManyRequestsException",Z.UserNotConfirmedException="UserNotConfirmedException",Z.UserNotFoundException="UserNotFoundException",(X=R||(R={})).ForbiddenException="ForbiddenException",X.InternalErrorException="InternalErrorException",X.InvalidParameterException="InvalidParameterException",X.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",X.NotAuthorizedException="NotAuthorizedException",X.PasswordResetRequiredException="PasswordResetRequiredException",X.ResourceNotFoundException="ResourceNotFoundException",X.TooManyRequestsException="TooManyRequestsException",X.UserNotConfirmedException="UserNotConfirmedException",X.UserNotFoundException="UserNotFoundException"},8460:function(e,t,n){"use strict";function i(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}function o(e){let t={};return e?.forEach(e=>{e.Name&&(t[e.Name]=e.Value)}),t}n.d(t,{J:function(){return i},R:function(){return o}})},9749:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var i=n(305),o=n(6398),r=n(9509),s=n(4686);let a=async()=>{try{i.Xb.dispatch("auth",{event:"signedIn",data:await (0,o.t)()},"Auth",i.SQ)}catch(e){if(e.name===r.Jg)throw new s.l({name:r.sX,message:"Unable to get user session following successful sign-in.",recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."});throw e}}},6772:function(e,t,n){"use strict";n.d(t,{F:function(){return f}});var i=n(1698);let o=async()=>{let{userAgentData:e}=navigator;if(!e)return navigator.userAgent;let{platform:t="",platformVersion:n="",model:i="",architecture:o="",fullVersionList:r=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]);return[t,n,o,i,t,r.map(e=>`${e.brand}/${e.version}`).join(";")].filter(e=>e).join(" ")||navigator.userAgent};var r=n(7099),s=n(5409),a=n(4719),c=n(5059),u=n(8196);let d=e=>(0,r.z)(s.x,(0,a.u)("ConfirmDevice"),(0,c.o)(),{...u.n,...e});var l=n(3638),p=n(6605),h=n(105),g=n(3019);async function f({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:r}){if(!n)return;let s=e.split("_")[1]||"",a=await (0,h.d)(s),c=n?.DeviceKey,u=n?.DeviceGroupKey;try{await a.generateHashDevice(u??"",c??"")}catch(e){return}let f={Salt:i.u.convert((0,g.z)(a.getSaltToHashDevices())),PasswordVerifier:i.u.convert((0,g.z)(a.getVerifierDevices()))},E=a.getRandomPassword();try{let i=d({endpointResolver:(0,l.e)({endpointOverride:t})});return await i({region:(0,p.y)(e)},{AccessToken:r,DeviceName:await o(),DeviceKey:n?.DeviceKey,DeviceSecretVerifierConfig:f}),{deviceKey:c,deviceGroupKey:u,randomPassword:E}}catch(e){return}}n(8602)},1838:function(e,t,n){"use strict";n.d(t,{z:function(){return p}});var i=n(8225),o=n(3638),r=n(6605),s=n(6566),a=n(105),c=n(393),u=n(2675),d=n(6963),l=n(2562);async function p({username:e,config:t,clientMetadata:n,session:c,tokenOrchestrator:u}){let{userPoolId:d,userPoolEndpoint:l}=t,p=t.userPoolClientId,g=await u?.getDeviceMetadata(e);(0,s.tr)(g);let f=await (0,a.d)(g.deviceGroupKey),E={USERNAME:e,SRP_A:f.A.toString(16),DEVICE_KEY:g.deviceKey},m=(0,i.u)({endpointResolver:(0,o.e)({endpointOverride:l})}),{ChallengeParameters:y,Session:I}=await m({region:(0,r.y)(d)},{ChallengeName:"DEVICE_SRP_AUTH",ClientId:p,ChallengeResponses:E,ClientMetadata:n,Session:c});return h(e,y,n,I,f,t,u)}async function h(e,t,n,a,p,{userPoolId:h,userPoolClientId:g,userPoolEndpoint:f},E){let m=await E?.getDeviceMetadata(e);(0,s.tr)(m);let y=new d.Z(t?.SRP_B,16),I=new d.Z(t?.SALT,16),{deviceKey:S}=m,{deviceGroupKey:x}=m,v=await p.getPasswordAuthenticationKey({username:m.deviceKey,password:m.randomPassword,serverBValue:y,salt:I}),w=(0,c.H)(),A={USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:w,PASSWORD_CLAIM_SIGNATURE:(0,u.i)({username:S,userPoolName:x,challengeParameters:t,dateNow:w,hkdf:v}),DEVICE_KEY:S},C=(0,l.u)({username:e,userPoolId:h,userPoolClientId:g});return(0,i.u)({endpointResolver:(0,o.e)({endpointOverride:f})})({region:(0,r.y)(h)},{ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:g,ChallengeResponses:A,Session:a,ClientMetadata:n,UserContextData:C})}},7978:function(e,t,n){"use strict";n.d(t,{i:function(){return p}});var i=n(4686),o=n(8225),r=n(3638),s=n(6605),a=n(6963);n(8602);var c=n(393),u=n(2675),d=n(2562),l=n(1838);async function p(e,t,n,p,h,g,f){let{userPoolId:E,userPoolClientId:m,userPoolEndpoint:y}=g,I=E?.split("_")[1]||"",S=new a.Z(t?.SRP_B,16),x=new a.Z(t?.SALT,16),v=t?.USER_ID_FOR_SRP;if(!v)throw new i.l({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});let w=await h.getPasswordAuthenticationKey({username:v,password:e,serverBValue:S,salt:x}),A=(0,c.H)(),C={USERNAME:v,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:A,PASSWORD_CLAIM_SIGNATURE:(0,u.i)({username:v,userPoolName:I,challengeParameters:t,dateNow:A,hkdf:w})},R=await f.getDeviceMetadata(v);R&&R.deviceKey&&(C.DEVICE_KEY=R.deviceKey);let P=(0,d.u)({username:v,userPoolId:E,userPoolClientId:m}),T=(0,o.u)({endpointResolver:(0,r.e)({endpointOverride:y})}),N=await T({region:(0,s.y)(E)},{ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:C,ClientMetadata:n,Session:p,ClientId:m,UserContextData:P});return"DEVICE_SRP_AUTH"===N.ChallengeName?(0,l.z)({username:v,config:g,clientMetadata:n,session:N.Session,tokenOrchestrator:f}):N}},2655:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var i=n(4686);async function o(e,t,n,o){try{return await e(...t)}catch(r){if(r instanceof i.l&&"ResourceNotFoundException"===r.name&&r.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw r}}},1667:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var i=n(5474);function o(e){let{dispatch:t}=i.signInStore;t({type:"SET_USERNAME",value:e})}},269:function(e,t,n){"use strict";n.d(t,{OP:function(){return eh},QS:function(){return eg},cP:function(){return ec},yM:function(){return eu},pB:function(){return es},Mf:function(){return ea},x6:function(){return eo},U:function(){return er}});var i,o,r=n(5165),s=n(5),a=n(3461),c=n(6743),u=n(4686),d=n(4808),l=n(9012),p=n(9509),h=n(6398),g=n(8357),f=n(6378),E=n(7099),m=n(5409),y=n(4719),I=n(5059),S=n(8196);let x=e=>(0,E.z)(m.x,(0,y.u)("AssociateSoftwareToken"),(0,I.o)(),{...S.n,...e});var v=n(3638),w=n(6605),A=n(8225),C=n(4388),R=n(9749),P=n(5474),T=n(5967),N=n(2199),U=n(4982);class b extends T._{constructor(e){super(e),this.constructor=b,Object.setPrototypeOf(this,b.prototype)}}(i=o||(o={})).PasskeyNotSupported="PasskeyNotSupported",i.PasskeyAlreadyExists="PasskeyAlreadyExists",i.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",i.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",i.RelyingPartyMismatch="RelyingPartyMismatch",i.PasskeyRegistrationFailed="PasskeyRegistrationFailed",i.PasskeyRetrievalFailed="PasskeyRetrievalFailed",i.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",i.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",i.PasskeyOperationAborted="PasskeyOperationAborted";let _="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.",F="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",D="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",k={[o.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:_},[o.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:D},[o.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:D},[o.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:_},[o.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[o.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[o.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:F},[o.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:F},[o.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:F},[o.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},M=(0,N.$)(k,b),O=e=>{if(e instanceof b)return e;if(e instanceof Error&&"NotAllowedError"===e.name){let{message:t,recoverySuggestion:n}=k[o.PasskeyAuthenticationCanceled];return new b({name:o.PasskeyAuthenticationCanceled,message:t,recoverySuggestion:n,underlyingError:e})}return L(e)},L=e=>{if(e instanceof Error){if("AbortError"===e.name){let{message:t,recoverySuggestion:n}=k[o.PasskeyOperationAborted];return new b({name:o.PasskeyOperationAborted,message:t,recoverySuggestion:n,underlyingError:e})}if("SecurityError"===e.name){let{message:t,recoverySuggestion:n}=k[o.RelyingPartyMismatch];return new b({name:o.RelyingPartyMismatch,message:t,recoverySuggestion:n,underlyingError:e})}}return new b({name:U.Z.Unknown,message:"An unknown error has occurred.",underlyingError:e})};var V=n(2459);let K=()=>(0,V.j)()&&window.isSecureContext&&"credentials"in navigator&&"function"==typeof window.PublicKeyCredential;var q=n(1698);let G=e=>q.u.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0});var B=n(905);let W=e=>Uint8Array.from(B.$.convert(e,{urlSafe:!0}),e=>e.charCodeAt(0)).buffer,$=e=>{let t=W(e.challenge),n=(e.allowCredentials||[]).map(e=>({...e,id:W(e.id)}));return{...e,challenge:t,allowCredentials:n}},z=e=>{let t={clientDataJSON:G(e.response.clientDataJSON),authenticatorData:G(e.response.authenticatorData),signature:G(e.response.signature)};e.response.userHandle&&(t.userHandle=G(e.response.userHandle));let n={id:e.id,rawId:G(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:t};return e.authenticatorAttachment&&(n.authenticatorAttachment=e.authenticatorAttachment),n},H=async e=>{try{let t=K();M(t,o.PasskeyNotSupported);let n=$(e),i=await navigator.credentials.get({publicKey:n});return M(i&&i instanceof PublicKeyCredential&&i.response instanceof AuthenticatorAssertionResponse,o.PasskeyRetrievalFailed),z(i)}catch(e){throw O(e)}};var j=n(6772);async function Z(e){let t=r.d.getConfig().Auth?.Cognito;(0,a.FG)(t);let{username:n,signInSession:i,signInDetails:c,challengeName:d}=P.signInStore.getState();if("WEB_AUTHN"!==d||!n)throw new u.l({name:l.kq.SignInException,message:"Unable to proceed due to invalid sign in state."});let{CREDENTIAL_REQUEST_OPTIONS:p}=e;M(!!p,o.InvalidPasskeyAuthenticationOptions);let h=await H(JSON.parse(p)),f=(0,A.u)({endpointResolver:(0,v.e)({endpointOverride:t.userPoolEndpoint})}),{ChallengeName:E,ChallengeParameters:m,AuthenticationResult:y,Session:I}=await f({region:(0,w.y)(t.userPoolId),userAgentValue:(0,g.W)(s.g4.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:n,CREDENTIAL:JSON.stringify(h)},ClientId:t.userPoolClientId,Session:i});if((0,P.k4)({signInSession:I,username:n,challengeName:E,signInDetails:c}),y)return await (0,C.x)({...y,username:n,NewDeviceMetadata:await (0,j.F)({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:y.NewDeviceMetadata,accessToken:y.AccessToken}),signInDetails:c}),P.signInStore.dispatch({type:"RESET_STATE"}),await (0,R.O)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if("WEB_AUTHN"===E)throw new u.l({name:l.kq.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return{challengeName:E,challengeParameters:m}}var X=n(7655),Q=n(105);n(8602);var J=n(2562),Y=n(7978),ee=n(1838),et=n(2655),en=n(1667);let ei="userAttributes.";async function eo(e,t,n,i,o){let{userPoolClientId:r,userPoolId:a,userPoolEndpoint:c}=i,u={USERNAME:e,PASSWORD:t},d=await o.getDeviceMetadata(e);d&&d.deviceKey&&(u.DEVICE_KEY=d.deviceKey);let l=(0,J.u)({username:e,userPoolId:a,userPoolClientId:r}),p=(0,f.N)({endpointResolver:(0,v.e)({endpointOverride:c})}),h=await p({region:(0,w.y)(a),userAgentValue:(0,g.W)(s.g4.SignIn)},{AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:l}),E=h.ChallengeParameters?.USERNAME??h.ChallengeParameters?.USER_ID_FOR_SRP??e;return((0,en.r)(E),"DEVICE_SRP_AUTH"===h.ChallengeName)?(0,ee.z)({username:E,config:i,clientMetadata:n,session:h.Session,tokenOrchestrator:o}):h}async function er(e,t,n,i,o){return(0,X.h)({username:e,password:t,clientMetadata:n,config:i,tokenOrchestrator:o,authFlow:"USER_SRP_AUTH"})}async function es(e,t,n,i){let{userPoolClientId:o,userPoolId:r,userPoolEndpoint:a}=n,c={USERNAME:e},u=await i.getDeviceMetadata(e);u&&u.deviceKey&&(c.DEVICE_KEY=u.deviceKey);let d=(0,J.u)({username:e,userPoolId:r,userPoolClientId:o}),l=(0,f.N)({endpointResolver:(0,v.e)({endpointOverride:a})}),p=await l({region:(0,w.y)(r),userAgentValue:(0,g.W)(s.g4.SignIn)},{AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:t,ClientId:o,UserContextData:d}),h=p.ChallengeParameters?.USERNAME??e;return((0,en.r)(h),"DEVICE_SRP_AUTH"===p.ChallengeName)?(0,ee.z)({username:h,config:n,clientMetadata:t,session:p.Session,tokenOrchestrator:i}):p}async function ea(e,t,n,i,o){(0,a.FG)(i);let{userPoolId:r,userPoolClientId:c,userPoolEndpoint:u}=i,d=r?.split("_")[1]||"",l=await (0,Q.d)(d),p={USERNAME:e,SRP_A:l.A.toString(16),CHALLENGE_NAME:"SRP_A"},h=(0,J.u)({username:e,userPoolId:r,userPoolClientId:c}),E=(0,f.N)({endpointResolver:(0,v.e)({endpointOverride:u})}),{ChallengeParameters:m,Session:y}=await E({region:(0,w.y)(r),userAgentValue:(0,g.W)(s.g4.SignIn)},{AuthFlow:"CUSTOM_AUTH",AuthParameters:p,ClientMetadata:n,ClientId:c,UserContextData:h}),I=m?.USERNAME??e;return(0,en.r)(I),(0,et.H)(Y.i,[t,m,n,y,l,i,o],I,o)}async function ec(e){var t;let{challengeName:n,challengeParameters:i,availableChallenges:o}=e,s=r.d.getConfig().Auth?.Cognito;switch((0,a.FG)(s),n){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:i}};case"MFA_SETUP":{let{signInSession:e,username:t}=P.signInStore.getState(),n=el(ep(i.MFAS_CAN_SETUP))||[],o=n.filter(e=>"EMAIL"===e||"TOTP"===e),r=o.includes("TOTP"),a=o.includes("EMAIL");if(r&&a)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:o}};if(a)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(r){let n=x({endpointResolver:(0,v.e)({endpointOverride:s.userPoolEndpoint})}),{Session:i,SecretCode:o}=await n({region:(0,w.y)(s.userPoolId)},{Session:e});return P.signInStore.dispatch({type:"SET_SIGN_IN_SESSION",value:i}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:{sharedSecret:o,getSetupUri:(e,n)=>{let i=`otpauth://totp/${e}:${n??t}?secret=${o}&issuer=${e}`;return new c.a(i)}}}}}throw new u.l({name:l.kq.SignInException,message:`Cannot initiate MFA setup from available types: ${n}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:(t=i.requiredAttributes)?JSON.parse(t).map(e=>e.includes(ei)?e.replace(ei,""):e):[]}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:el(ep(i.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:i.CODE_DELIVERY_DELIVERY_MEDIUM,destination:i.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:i.CODE_DELIVERY_DELIVERY_MEDIUM,destination:i.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":{let e=await Z(i);if("isSignedIn"in e&&"nextStep"in e)return e;return ec(e)}case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:o}}}throw new u.l({name:l.kq.SignInException,message:`An error occurred during the sign in process. ${n} challengeName returned by the underlying service was not addressed.`})}function eu(e){return e===d.OK.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===d.OK.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}function ed(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":"EMAIL_OTP"===e?"EMAIL":void 0}function el(e){if(e)return e.map(ed).filter(Boolean)}function ep(e){return e?JSON.parse(e):[]}async function eh(){let e;try{e=await (0,h.t)()}catch(e){}if(e&&e.userId&&e.username)throw new u.l({name:p.EU,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}function eg(e){return P.signInStore.getState().username??e}},4574:function(e,t,n){"use strict";n.d(t,{R:function(){return c}});var i=n(3461),o=n(2684),r=n(6566);let s="amplify-signin-with-hostedUI",a="CognitoIdentityServiceProvider";class c{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){(0,i.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){(0,i.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(s),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){(0,i.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){(0,i.FG)(this.cognitoConfig);let t=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){(0,i.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){(0,i.FG)(this.cognitoConfig);let t=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){(0,i.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){(0,i.FG)(this.cognitoConfig);let t=u(a,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){(0,i.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(s),[n,o]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===t,preferPrivateSession:"true"===o}}async storeOAuthSignIn(e,t=!1){(0,i.FG)(this.cognitoConfig);let n=u(a,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${e},${t}`)}}let u=(e,t)=>(0,o._X)(r.Bx)(e,t)},6963:function(e,t,n){"use strict";let i,o,r;function s(e,t){null!=e&&this.fromString(e,t)}function a(){return new s(null,null)}n.d(t,{Z:function(){return s}});let c="undefined"!=typeof navigator;c&&"Microsoft Internet Explorer"===navigator.appName?(s.prototype.am=function(e,t,n,i,o,r){let s=32767&t,a=t>>15;for(;--r>=0;){let t=32767&this[e],r=this[e++]>>15,c=a*t+r*s;o=((t=s*t+((32767&c)<<15)+n[i]+(1073741823&o))>>>30)+(c>>>15)+a*r+(o>>>30),n[i++]=1073741823&t}return o},i=30):c&&"Netscape"!==navigator.appName?(s.prototype.am=function(e,t,n,i,o,r){for(;--r>=0;){let r=t*this[e++]+n[i]+o;o=Math.floor(r/67108864),n[i++]=67108863&r}return o},i=26):(s.prototype.am=function(e,t,n,i,o,r){let s=16383&t,a=t>>14;for(;--r>=0;){let t=16383&this[e],r=this[e++]>>14,c=a*t+r*s;o=((t=s*t+((16383&c)<<14)+n[i]+o)>>28)+(c>>14)+a*r,n[i++]=268435455&t}return o},i=28),s.prototype.DB=i,s.prototype.DM=(1<<i)-1,s.prototype.DV=1<<i,s.prototype.FV=4503599627370496,s.prototype.F1=52-i,s.prototype.F2=2*i-52;let u=[];for(r=0,o=48;r<=9;++r)u[o++]=r;for(r=10,o=97;r<36;++r)u[o++]=r;for(r=10,o=65;r<36;++r)u[o++]=r;function d(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function l(e){let t=a();return t.fromInt(e),t}function p(e){let t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function h(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}h.prototype.convert=function(e){let t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t},h.prototype.revert=function(e){let t=a();return e.copyTo(t),this.reduce(t),t},h.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},h.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},s.prototype.copyTo=function(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},s.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},s.prototype.fromString=function(e,t){let n;if(16===t)n=4;else if(8===t)n=3;else if(2===t)n=1;else if(32===t)n=5;else if(4===t)n=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let i=e.length,o=!1,r=0;for(;--i>=0;){let t=function(e,t){let n=u[e.charCodeAt(t)];return null==n?-1:n}(e,i);if(t<0){"-"===e.charAt(i)&&(o=!0);continue}o=!1,0===r?this[this.t++]=t:r+n>this.DB?(this[this.t-1]|=(t&(1<<this.DB-r)-1)<<r,this[this.t++]=t>>this.DB-r):this[this.t-1]|=t<<r,(r+=n)>=this.DB&&(r-=this.DB)}this.clamp(),o&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){let e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t},s.prototype.dlShiftTo=function(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},s.prototype.drShiftTo=function(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},s.prototype.lShiftTo=function(e,t){let n;let i=e%this.DB,o=this.DB-i,r=(1<<o)-1,s=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>o|a,a=(this[n]&r)<<i;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},s.prototype.rShiftTo=function(e,t){t.s=this.s;let n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}let i=e%this.DB,o=this.DB-i,r=(1<<i)-1;t[0]=this[n]>>i;for(let e=n+1;e<this.t;++e)t[e-n-1]|=(this[e]&r)<<o,t[e-n]=this[e]>>i;i>0&&(t[this.t-n-1]|=(this.s&r)<<o),t.t=this.t-n,t.clamp()},s.prototype.subTo=function(e,t){let n=0,i=0,o=Math.min(e.t,this.t);for(;n<o;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},s.prototype.multiplyTo=function(e,t){let n=this.abs(),i=e.abs(),o=n.t;for(t.t=o+i.t;--o>=0;)t[o]=0;for(o=0;o<i.t;++o)t[o+n.t]=n.am(0,i[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&s.ZERO.subTo(t,t)},s.prototype.squareTo=function(e){let t=this.abs(),n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){let i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},s.prototype.divRemTo=function(e,t,n){let i=e.abs();if(i.t<=0)return;let o=this.abs();if(o.t<i.t){null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);return}null===n&&(n=a());let r=a(),c=this.s,u=e.s,d=this.DB-p(i[i.t-1]);d>0?(i.lShiftTo(d,r),o.lShiftTo(d,n)):(i.copyTo(r),o.copyTo(n));let l=r.t,h=r[l-1];if(0===h)return;let g=h*(1<<this.F1)+(l>1?r[l-2]>>this.F2:0),f=this.FV/g,E=(1<<this.F1)/g,m=1<<this.F2,y=n.t,I=y-l,S=null===t?a():t;for(r.dlShiftTo(I,S),n.compareTo(S)>=0&&(n[n.t++]=1,n.subTo(S,n)),s.ONE.dlShiftTo(l,S),S.subTo(r,r);r.t<l;)r[r.t++]=0;for(;--I>=0;){let e=n[--y]===h?this.DM:Math.floor(n[y]*f+(n[y-1]+m)*E);if((n[y]+=r.am(0,e,n,I,0,l))<e)for(r.dlShiftTo(I,S),n.subTo(S,n);n[y]<--e;)n.subTo(S,n)}null!==t&&(n.drShiftTo(l,t),c!==u&&s.ZERO.subTo(t,t)),n.t=l,n.clamp(),d>0&&n.rShiftTo(d,n),c<0&&s.ZERO.subTo(n,n)},s.prototype.invDigit=function(){if(this.t<1)return 0;let e=this[0];if((1&e)==0)return 0;let t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},s.prototype.addTo=function(e,t){let n=0,i=0,o=Math.min(e.t,this.t);for(;n<o;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()},s.prototype.toString=function(e){let t,n;if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else if(4===e)t=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");let i=(1<<t)-1,o=!1,r="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(o=!0,r=d(n));s>=0;)a<t?n=(this[s]&(1<<a)-1)<<t-a|this[--s]>>(a+=this.DB-t):(n=this[s]>>(a-=t)&i,a<=0&&(a+=this.DB,--s)),n>0&&(o=!0),o&&(r+=d(n));return o?r:"0"},s.prototype.negate=function(){let e=a();return s.ZERO.subTo(this,e),e},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(e){let t=this.s-e.s;if(0!=t)return t;let n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)},s.prototype.mod=function(e){let t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t},s.prototype.equals=function(e){return 0===this.compareTo(e)},s.prototype.add=function(e){let t=a();return this.addTo(e,t),t},s.prototype.subtract=function(e){let t=a();return this.subTo(e,t),t},s.prototype.multiply=function(e){let t=a();return this.multiplyTo(e,t),t},s.prototype.divide=function(e){let t=a();return this.divRemTo(e,t,null),t},s.prototype.modPow=function(e,t,n){let i,o,r,s=e.bitLength(),c=l(1),u=new h(t);if(s<=0)return c;let d=[],g=3,f=(i=s<18?1:s<48?3:s<144?4:s<768?5:6)-1,E=(1<<i)-1;if(d[1]=u.convert(this),i>1){let e=a();for(u.sqrTo(d[1],e);g<=E;)d[g]=a(),u.mulTo(e,d[g-2],d[g]),g+=2}let m=e.t-1,y=!0,I=a();for(s=p(e[m])-1;m>=0;){for(s>=f?o=e[m]>>s-f&E:(o=(e[m]&(1<<s+1)-1)<<f-s,m>0&&(o|=e[m-1]>>this.DB+s-f)),g=i;(1&o)==0;)o>>=1,--g;if((s-=g)<0&&(s+=this.DB,--m),y)d[o].copyTo(c),y=!1;else{for(;g>1;)u.sqrTo(c,I),u.sqrTo(I,c),g-=2;g>0?u.sqrTo(c,I):(r=c,c=I,I=r),u.mulTo(I,d[o],c)}for(;m>=0&&(e[m]&1<<s)==0;)u.sqrTo(c,I),r=c,c=I,I=r,--s<0&&(s=this.DB-1,--m)}let S=u.revert(c);return n(null,S),S},s.ZERO=l(0),s.ONE=l(1)},2447:function(e,t,n){"use strict";n.d(t,{$v:function(){return i},H3:function(){return r},rt:function(){return o}});let i="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",o={},r={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),o[e]=t,r[t]=e}},105:function(e,t,n){"use strict";n.d(t,{d:function(){return A}});var i=n(4686),o=n(7891),r=n(6963);let s=async({a:e,g:t,k:n,x:i,B:o,N:r,U:s})=>new Promise((a,c)=>{t.modPow(i,r,(t,u)=>{if(t){c(t);return}o.subtract(n.multiply(u)).modPow(e.add(s.multiply(i)),r,(e,t)=>{if(e){c(e);return}a(t.mod(r))})})});var a=n(3019),c=n(8602),u=n(2447);let d=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=u.rt[e[n]];return t},l=e=>{let t=new c.f;t.update(e);let n=d(t.digestSync());return Array(64-n.length).join("0")+n},p=e=>l((0,a.z)(e)),h=/^[89a-f]/i,g=e=>{if(!(e instanceof r.Z))throw Error("Not a BigInteger");let t=0>e.compareTo(r.Z.ZERO),n=e.abs().toString(16);if(n=n.length%2!=0?`0${n}`:n,n=h.test(n)?`00${n}`:n,t){let e=n.split("").map(e=>{let t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)}).join("");(n=new r.Z(e,16).add(r.Z.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},f=({A:e,B:t})=>{let n=new r.Z(p(g(e)+g(t)),16);if(n.equals(r.Z.ZERO))throw Error("U cannot be zero.");return n},E=(e,t,n)=>{let i=new c.f(t);i.update(e);let o=i.digestSync(),r=new c.f(o);return r.update(n),r.digestSync().slice(0,16)};var m=n(4477);class y{constructor(e,t){this.words=[];let n=e;n=this.words=n||[],void 0!==t?this.sigBytes=t:this.sigBytes=4*n.length}random(e){let t=[];for(let n=0;n<e;n+=4)t.push((0,m.MX)().getRandomValues(new Uint32Array(1))[0]);return new y(t,e)}toString(){return function(e){let{words:t}=e,{sigBytes:n}=e,i=[];for(let e=0;e<n;e++){let n=t[e>>>2]>>>24-e%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")}(this)}}let I=e=>{let t=new y().random(e).toString();return(0,a.z)(t)};var S=n(1698);let x=()=>S.u.convert(I(40));class v{constructor({userPoolName:e,a:t,g:n,A:i,N:s}){this.encoder=o.o,this.userPoolName=e,this.a=t,this.g=n,this.A=i,this.N=s,this.k=new r.Z(p(`${g(s)}${g(n)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new i.l({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new i.l({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new i.l({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,t){this.randomPassword=x();let n=l(`${e}${t}:${this.randomPassword}`),i=d(I(16));return this.saltToHashDevices=g(new r.Z(i,16)),new Promise((e,t)=>{this.g.modPow(new r.Z(p(this.saltToHashDevices+n),16),this.N,(n,i)=>{if(n){t(n);return}this.verifierDevices=g(i),e()})})}async getPasswordAuthenticationKey({username:e,password:t,serverBValue:n,salt:i}){if(n.mod(this.N).equals(r.Z.ZERO))throw Error("B cannot be zero.");let o=f({A:this.A,B:n}),c=l(`${this.userPoolName}${e}:${t}`),u=new r.Z(p(g(i)+c),16),d=await s({a:this.a,g:this.g,k:this.k,x:u,B:n,N:this.N,U:o}),h=this.encoder.convert("Caldera Derived Key"),m=this.encoder.convert("\x01"),y=new Uint8Array(h.byteLength+m.byteLength);return y.set(h,0),y.set(m,h.byteLength),E((0,a.z)(g(d)),(0,a.z)(g(o)),y)}}let w=async({a:e,g:t,N:n})=>new Promise((i,o)=>{t.modPow(e,n,(e,t)=>{if(e){o(e);return}if(t.mod(n).equals(r.Z.ZERO)){o(Error("Illegal parameter. A mod N cannot be 0."));return}i(t)})}),A=async e=>{let t=new r.Z(u.$v,16),n=new r.Z("2",16),i=C(),o=await w({a:i,g:n,N:t});return new v({userPoolName:e,a:i,g:n,A:o,N:t})},C=()=>{let e=d(I(128));return new r.Z(e,16)}},3019:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var i=n(2447);let o=e=>{if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){let o=e.slice(n,n+2).toLowerCase();if(o in i.H3)t[n/2]=i.H3[o];else throw Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t}},393:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});let i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=()=>{let e=new Date,t=o[e.getUTCDay()],n=i[e.getUTCMonth()],r=e.getUTCDate(),s=e.getUTCHours();s<10&&(s=`0${s}`);let a=e.getUTCMinutes();a<10&&(a=`0${a}`);let c=e.getUTCSeconds();c<10&&(c=`0${c}`);let u=e.getUTCFullYear();return`${t} ${n} ${r} ${s}:${a}:${c} UTC ${u}`}},2675:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var i=n(8602),o=n(1698),r=n(905),s=n(7891);let a=({userPoolName:e,username:t,challengeParameters:n,dateNow:r,hkdf:a})=>{let u=s.o.convert(e),d=s.o.convert(t),l=c(n.SECRET_BLOCK),p=s.o.convert(r),h=new Uint8Array(u.byteLength+d.byteLength+l.byteLength+p.byteLength);h.set(u,0),h.set(d,u.byteLength),h.set(l,u.byteLength+d.byteLength),h.set(p,u.byteLength+d.byteLength+l.byteLength);let g=new i.f(a);g.update(h);let f=g.digestSync();return o.u.convert(f)},c=e=>{let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=r.$.convert(n),o=new Uint8Array(i.length);for(let e=0;e<i.length;++e)o[e]=i.charCodeAt(e);return o}},7891:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});let i={convert:e=>new TextEncoder().encode(e)}},6566:function(e,t,n){"use strict";n.d(t,{Bx:function(){return l},CA:function(){return r},Cg:function(){return s},XD:function(){return u},tr:function(){return d}});var i=n(4686),o=n(9509);function r(e){if(!e||!e.accessToken)throw new i.l({name:o.Jg,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function s(e){if(!e||!e.idToken)throw new i.l({name:o.Jg,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}let a=new i.l({name:o.hj,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),c=new i.l({name:o.Jg,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function u(e){if(p(e)&&!e?.refreshToken)throw a;if(!(p(e)&&e?.refreshToken))throw c}function d(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new i.l({name:o.mP,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}let l={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function p(e){return e?.accessToken||e?.idToken}},2562:function(e,t,n){"use strict";function i({username:e,userPoolId:t,userPoolClientId:n}){if("undefined"==typeof window)return;let i=window.AmazonCognitoAdvancedSecurityData;if(void 0===i)return;let o=i.getData(e,t,n);return o?{EncodedData:o}:{}}n.d(t,{u:function(){return i}})},8357:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var i=n(1847),o=n(5);let r=(e,t)=>(0,i.Zm)({category:o.WD.Auth,action:e,...t})},305:function(e,t,n){"use strict";n.d(t,{SQ:function(){return s},Xb:function(){return u},qC:function(){return d}});var i=n(6344),o=n(8159),r=n(5967);let s="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",a=new i.k("Hub");class c{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){let n=this.listeners.get(e);if(!n){a.warn(`No listeners for ${e}`);return}this.listeners.set(e,[...n.filter(({callback:e})=>e!==t)])}dispatch(e,t,n,i){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&i!==s&&a.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`);let o={channel:e,payload:{...t},source:n,patternInfo:[]};try{this._toListeners(o)}catch(e){a.error(e)}}listen(e,t,n="noname"){if("function"!=typeof t)throw new r._({name:o.z2,message:"No callback supplied to Hub"});let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:n,callback:t}),()=>{this._remove(e,t)}}_toListeners(e){let{channel:t,payload:n}=e,i=this.listeners.get(t);i&&i.forEach(i=>{a.debug(`Dispatching to ${t} with `,n);try{i.callback(e)}catch(e){a.error(e)}})}}let u=new c("__default__"),d=new c("internal-hub")},6344:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i,o,r=n(8159);(i=o||(o={})).DEBUG="DEBUG",i.ERROR="ERROR",i.INFO="INFO",i.WARN="WARN",i.VERBOSE="VERBOSE",i.NONE="NONE";let s={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class a{constructor(e,t=o.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){let e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e&&(this._config=e),this._config}_log(e,...t){let n=this.level;a.LOG_LEVEL&&(n=a.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL);let i=s[n];if(!(s[e]>=i))return;let r=console.log.bind(console);e===o.ERROR&&console.error&&(r=console.error.bind(console)),e===o.WARN&&console.warn&&(r=console.warn.bind(console)),a.BIND_ALL_LOG_LEVELS&&(e===o.INFO&&console.info&&(r=console.info.bind(console)),e===o.DEBUG&&console.debug&&(r=console.debug.bind(console)));let c=`[${e}] ${this._ts()} ${this.name}`,u="";if(1===t.length&&"string"==typeof t[0])r(u=`${c} - ${t[0]}`);else if(1===t.length)u=`${c} ${t[0]}`,r(c,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),u=`${c} - ${t[0]} ${e}`,r(`${c} - ${t[0]}`,e)}else u=`${c} ${t}`,r(c,t);for(let e of this._pluggables){let t={message:u,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(o.INFO,...e)}info(...e){this._log(o.INFO,...e)}warn(...e){this._log(o.WARN,...e)}error(...e){this._log(o.ERROR,...e)}debug(...e){this._log(o.DEBUG,...e)}verbose(...e){this._log(o.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===r.YG&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}a.LOG_LEVEL=null,a.BIND_ALL_LOG_LEVELS=!1},7977:function(e,t,n){"use strict";let i;n.d(t,{Cj:function(){return m},QW:function(){return y}});var o=n(5),r=n(4155);let s=()=>"undefined"!=typeof global,a=()=>"undefined"!=typeof window,c=()=>"undefined"!=typeof document,u=()=>void 0!==r,d=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t));var l=n(4155),p=n(4155),h=n(4155);let g=[{platform:o.gQ.Expo,detectionMethod:function(){return s()&&void 0!==global.expo}},{platform:o.gQ.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:o.gQ.NextJs,detectionMethod:function(){return a()&&window.next&&"object"==typeof window.next}},{platform:o.gQ.Nuxt,detectionMethod:function(){return a()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:o.gQ.Angular,detectionMethod:function(){let e=!!(c()&&document.querySelector("[ng-version]")),t=!!(a()&&void 0!==window.ng);return e||t}},{platform:o.gQ.React,detectionMethod:function(){let e=e=>e.startsWith("_react")||e.startsWith("__react");return c()&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:o.gQ.VueJs,detectionMethod:function(){return a()&&d(window,"__VUE")}},{platform:o.gQ.Svelte,detectionMethod:function(){return a()&&d(window,"__SVELTE")}},{platform:o.gQ.WebUnknown,detectionMethod:function(){return a()}},{platform:o.gQ.NextJsSSR,detectionMethod:function(){return s()&&(d(global,"__next")||d(global,"__NEXT"))}},{platform:o.gQ.NuxtSSR,detectionMethod:function(){return s()&&void 0!==global.__NUXT_PATHS__}},{platform:o.gQ.ReactSSR,detectionMethod:function(){return u()&&void 0!==l.env&&!!Object.keys(l.env).find(e=>e.includes("react"))}},{platform:o.gQ.VueJsSSR,detectionMethod:function(){return s()&&d(global,"__VUE")}},{platform:o.gQ.AngularSSR,detectionMethod:function(){return u()&&"object"==typeof h.env&&h.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:o.gQ.SvelteSSR,detectionMethod:function(){return u()&&void 0!==p.env&&!!Object.keys(p.env).find(e=>e.includes("svelte"))}}],f=[],E=!1,m=()=>{if(!i){if(i=g.find(e=>e.detectionMethod())?.platform||o.gQ.ServerSideUnknown,E)for(;f.length;)f.pop()?.();else f.forEach(e=>{e()});I(o.gQ.ServerSideUnknown,10),I(o.gQ.WebUnknown,10)}return i},y=e=>{E||f.push(e)};function I(e,t){i!==e||E||setTimeout(()=>{i=void 0,E=!0,setTimeout(m,1e3)},t)}},1847:function(e,t,n){"use strict";n.d(t,{Zm:function(){return p}});var i=n(5);let o="6.14.3";var r=n(7977);let s={},a=(e,t)=>s[e]?.[t]?.additionalDetails,c="aws-amplify",u=e=>e.replace(/\+.*/,"");class d{constructor(){this.userAgent=`${c}/${u(o)}`}get framework(){return(0,r.Cj)()}get isReactNative(){return this.framework===i.gQ.ReactNative||this.framework===i.gQ.Expo}observeFrameworkChanges(e){(0,r.QW)(e)}}new d;let l=({category:e,action:t}={})=>{let n=[[c,u(o)]];if(e&&n.push([e,t]),n.push(["framework",(0,r.Cj)()]),e&&t){let i=a(e,t);i&&i.forEach(e=>{n.push(e)})}return n},p=e=>l(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" ")},5:function(e,t,n){"use strict";var i,o,r,s,a,c,u,d,l,p,h,g,f,E,m,y,I,S,x,v,w,A,C,R,P,T;n.d(t,{WD:function(){return o},g4:function(){return c},gQ:function(){return i}}),(m=i||(i={})).WebUnknown="0",m.React="1",m.NextJs="2",m.Angular="3",m.VueJs="4",m.Nuxt="5",m.Svelte="6",m.ServerSideUnknown="100",m.ReactSSR="101",m.NextJsSSR="102",m.AngularSSR="103",m.VueJsSSR="104",m.NuxtSSR="105",m.SvelteSSR="106",m.ReactNative="201",m.Expo="202",(y=o||(o={})).AI="ai",y.API="api",y.Auth="auth",y.Analytics="analytics",y.DataStore="datastore",y.Geo="geo",y.InAppMessaging="inappmessaging",y.Interactions="interactions",y.Predictions="predictions",y.PubSub="pubsub",y.PushNotification="pushnotification",y.Storage="storage",(I=r||(r={})).CreateConversation="1",I.GetConversation="2",I.ListConversations="3",I.DeleteConversation="4",I.SendMessage="5",I.ListMessages="6",I.OnMessage="7",I.Generation="8",I.UpdateConversation="9",(S=s||(s={})).Record="1",S.IdentifyUser="2",(x=a||(a={})).GraphQl="1",x.Get="2",x.Post="3",x.Put="4",x.Patch="5",x.Del="6",x.Head="7",(v=c||(c={})).SignUp="1",v.ConfirmSignUp="2",v.ResendSignUpCode="3",v.SignIn="4",v.FetchMFAPreference="6",v.UpdateMFAPreference="7",v.SetUpTOTP="10",v.VerifyTOTPSetup="11",v.ConfirmSignIn="12",v.DeleteUserAttributes="15",v.DeleteUser="16",v.UpdateUserAttributes="17",v.FetchUserAttributes="18",v.ConfirmUserAttribute="22",v.SignOut="26",v.UpdatePassword="27",v.ResetPassword="28",v.ConfirmResetPassword="29",v.FederatedSignIn="30",v.RememberDevice="32",v.ForgetDevice="33",v.FetchDevices="34",v.SendUserAttributeVerificationCode="35",v.SignInWithRedirect="36",v.StartWebAuthnRegistration="37",v.CompleteWebAuthnRegistration="38",v.ListWebAuthnCredentials="39",v.DeleteWebAuthnCredential="40",(w=u||(u={})).Subscribe="1",w.GraphQl="2",(A=d||(d={})).SearchByText="0",A.SearchByCoordinates="1",A.SearchForSuggestions="2",A.SearchByPlaceId="3",A.SaveGeofences="4",A.GetGeofence="5",A.ListGeofences="6",A.DeleteGeofences="7",(C=l||(l={})).SyncMessages="1",C.IdentifyUser="2",C.NotifyMessageInteraction="3",(p||(p={})).None="0",(R=h||(h={})).Convert="1",R.Identify="2",R.Interpret="3",(g||(g={})).Subscribe="1",(P=f||(f={})).InitializePushNotifications="1",P.IdentifyUser="2",(T=E||(E={})).UploadData="1",T.DownloadData="2",T.List="3",T.Copy="4",T.Remove="5",T.GetProperties="6",T.GetUrl="7",T.GetDataAccess="8",T.ListCallerAccessGrants="9"},8481:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});let i={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},o={partitions:[i,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},r=e=>{let{partitions:t}=o;for(let{regions:n,outputs:i,regionRegex:o}of t){let t=new RegExp(o);if(n.includes(e)||t.test(e))return i.dnsSuffix}return i.outputs.dnsSuffix}},9045:function(e,t,n){"use strict";let i;n.d(t,{y:function(){return m}});var o=n(5194);let r=(e,t)=>{let n,i;if(t?.aborted)return Promise.resolve();let o=new Promise(t=>{i=t,n=setTimeout(t,e)});return t?.addEventListener("abort",function e(o){clearTimeout(n),t?.removeEventListener("abort",e),i()}),o},s=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})};var a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let c=new Uint8Array(16),u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));let d=function(e,t,n){if(a.randomUUID&&!t&&!e)return a.randomUUID();let o=(e=e||{}).random||(e.rng||function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(c)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}(o)};n(8602),n(6361);var l=n(182),p=n(5967),h=n(4982);let g=e=>{let t;return()=>(t||(t=e()),t)},f=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),E=async({url:e,method:t,headers:n,body:i},{abortSignal:o,cache:r,withCrossDomainCredentials:s})=>{let a;try{a=await fetch(e,{method:t,headers:n,body:f(t)?i:void 0,signal:o,cache:r,credentials:s?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new p._({name:h.Z.NetworkError,message:"A network error has occurred.",underlyingError:e});throw e}let c={};a.headers?.forEach((e,t)=>{c[t.toLowerCase()]=e});let u={statusCode:a.status,headers:c,body:null},d=Object.assign(a.body??{},{text:g(()=>a.text()),blob:g(()=>a.blob()),json:g(()=>a.json())});return{...u,body:d}},m=(0,l.V)(E,[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(i){if(0===t.trim().length)return await n(i);{let o=e.toLowerCase();return i.headers[o]=i.headers[o]?`${i.headers[o]} ${t}`:t,await n(i)}},()=>e=>async function(t){return t.headers[o.vt]||(t.headers[o.vt]=d()),e(t)},({maxAttempts:e=o.tZ,retryDecider:t,computeDelay:n,abortSignal:i})=>{if(e<1)throw Error("maxAttempts must be greater than 0");return(o,a)=>async function(c){let u,d;let l=a.attemptsCount??0,p=()=>{if(d)return s(d,l),d;throw s(u,l),u};for(;!i?.aborted&&l<e;){try{d=await o(c),u=void 0}catch(e){u=e,d=void 0}l=(a.attemptsCount??0)>l?a.attemptsCount??0:l+1,a.attemptsCount=l;let{isCredentialsExpiredError:s,retryable:h}=await t(d,u,a);if(!h)return p();if(a.isCredentialsExpired=!!s,!i?.aborted&&l<e){let e=n(l);await r(e,i)}}if(!i?.aborted)return p();throw Error("Request aborted.")}},({maxAttempts:e=o.tZ})=>(t,n)=>async function(i){let r=n.attemptsCount??0;return i.headers[o.zG]=`attempt=${r+1}; max=${e}`,t(i)}])},7099:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});let i=(e,t,n,i)=>async(o,r)=>{let s={...i,...o},a=await s.endpointResolver(s,r),c=await t(r,a);return n(await e(c,{...s}))}},182:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});let i=(e,t)=>(n,i)=>{let o={},r=t=>e(t,i);for(let e=t.length-1;e>=0;e--)r=(0,t[e])(i)(r,o);return r(n)}},5194:function(e,t,n){"use strict";n.d(t,{tZ:function(){return i},vt:function(){return o},yx:function(){return s},zG:function(){return r}});let i=3,o="amz-sdk-invocation-id",r="amz-sdk-request",s=3e5},7836:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var i=n(4982);let o=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],r=e=>!!e&&o.includes(e),s=e=>async(t,n)=>{let i=n??await e(t)??void 0,o=i?.code||i?.name,s=t?.statusCode;return{retryable:d(n)||u(s,o)||r(o)||l(s,o)}},a=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],c=["TimeoutError","RequestTimeout","RequestTimeoutException"],u=(e,t)=>429===e||!!t&&a.includes(t),d=e=>[i.Z.NetworkError,"ERR_NETWORK"].includes(e?.name),l=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&c.includes(t)},8991:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var i=n(5194);let o=e=>{let t=(function(e=3e5){return t=>{let n=2**t*100+100*Math.random();return!(n>e)&&n}})(i.yx)(e);return!1===t?i.yx:t}},5434:function(e,t,n){"use strict";n.d(t,{e:function(){return r},f:function(){return o}});var i=n(9300);let o=async e=>{if(!e||e.statusCode<300)return;let t=await r(e),n=(e=>{let[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError");return Object.assign(Error(t.message??t.Message??"Unknown error"),{name:n,$metadata:(0,i.B)(e)})},r=async e=>{if(!e.body)throw Error("Missing response payload");return Object.assign(await e.body.json(),{$metadata:(0,i.B)(e)})}},9300:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});let i=e=>{let{headers:t,statusCode:n}=e;return{...o(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},o=e=>"object"==typeof e?.$metadata},8159:function(e,t,n){"use strict";n.d(t,{YG:function(){return i},z2:function(){return o}});let i="Logging",o="NoHubcallbackProvidedException"},5967:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});class i extends Error{constructor({message:e,name:t,recoverySuggestion:n,underlyingError:o,metadata:r}){if(super(e),this.name=t,this.underlyingError=o,this.recoverySuggestion=n,r){let{extendedRequestId:e,httpStatusCode:t,requestId:n}=r;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:n}}this.constructor=i,Object.setPrototypeOf(this,i.prototype)}}},2199:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(5967);let o=(e,t=i._)=>(n,i,o)=>{let{message:r,recoverySuggestion:s}=e[i];if(!n)throw new t({name:i,message:o?`${r} ${o}`:r,recoverySuggestion:s})}},5165:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var i=n(305);let o=e=>{for(let t of Reflect.ownKeys(e)){let n=e[t];(n&&"object"==typeof n||"function"==typeof n)&&o(n)}return Object.freeze(e)},r=Symbol("oauth-listener");var s=n(2640);n(8602),n(6361);class a{configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,n;let i=await this.getTokens(e);return i?(n=i.accessToken?.payload?.sub,t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:i,authenticated:!0,forceRefresh:e.forceRefresh})):t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh}),{tokens:i,credentials:t?.credentials,identityId:t?.identityId,userSub:n}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(e){return await this.authOptions?.tokenProvider?.getTokens(e)??void 0}}class c{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new a}configure(e,t){let n=(0,s.h)(e);this.resourcesConfig=n,t&&(this.libraryOptions=t),this.resourcesConfig=o(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),i.Xb.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",i.SQ),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[r](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}}let u=new c},3461:function(e,t,n){"use strict";n.d(t,{YE:function(){return l},V0:function(){return d},FG:function(){return u},xp:function(){return p}});var i,o,r=n(905),s=n(2199);(i=o||(o={})).AuthTokenConfigException="AuthTokenConfigException",i.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",i.AuthUserPoolException="AuthUserPoolException",i.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",i.OAuthNotConfigureException="OAuthNotConfigureException";let a={[o.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[o.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[o.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[o.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[o.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},c=(0,s.$)(a);function u(e){c(!!e&&!!e.userPoolId&&!!e.userPoolClientId,o.AuthUserPoolException)}function d(e){c(!!e?.loginWith?.oauth?.domain&&!!e?.loginWith?.oauth?.redirectSignOut&&!!e?.loginWith?.oauth?.redirectSignIn&&!!e?.loginWith?.oauth?.responseType,o.OAuthNotConfigureException)}function l(e){c(!!e?.identityPoolId,o.InvalidIdentityPoolIdException)}function p(e){let t=e.split(".");if(3!==t.length)throw Error("Invalid token");try{let n=t[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(r.$.convert(n).split("").map(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),o=JSON.parse(i);return{toString:()=>e,payload:o}}catch(e){throw Error("Invalid token payload")}}},695:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(e,t)=>e.Auth.fetchAuthSession(t)},4685:function(e,t,n){"use strict";n.d(t,{Fm:function(){return E},$2:function(){return m}});var i=n(4982),o=n(5967);class r extends o._{constructor(){super({name:i.Z.PlatformNotSupported,message:"Function not supported on current platform"})}}class s{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new r;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new r;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new r;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new r;this.storage.clear()}}var a=n(6344);class c{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}let u=new a.k("CoreStorageUtils"),d=()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){u.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new c},l=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw Error("sessionStorage is not defined")}catch(e){return u.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new c}};class p extends s{constructor(){super(d())}}class h extends s{constructor(){super(l())}}class g{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new r;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}class f extends g{constructor(){super(l())}}let E=new p;new h;let m=new f;new s(new c)},4982:function(e,t,n){"use strict";var i,o;n.d(t,{Z:function(){return i}}),(o=i||(i={})).NoEndpointId="NoEndpointId",o.PlatformNotSupported="PlatformNotSupported",o.Unknown="Unknown",o.NetworkError="NetworkError"},6743:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});let i=URL},905:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(4477);let o={convert(e,t){let n=e;return t?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),(0,i.tl)()(n)}}},1698:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var i=n(4477);let o={convert(e,t={urlSafe:!1,skipPadding:!1}){let n="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),o=(0,i.Ds)()(n);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}}},4477:function(e,t,n){"use strict";n.d(t,{Ds:function(){return r},MX:function(){return o},tl:function(){return s}});var i=n(5967);let o=()=>{if("object"==typeof window&&"object"==typeof window.crypto)return window.crypto;if("object"==typeof crypto)return crypto;throw new i._({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},r=()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new i._({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},s=()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new i._({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})}},2459:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});let i=()=>"undefined"!=typeof window&&void 0!==window.document},2640:function(e,t,n){"use strict";n.d(t,{h:function(){return h}});var i=n(6344),o=n(5967);let r=new i.k("parseAWSExports"),s={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},a=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new o._({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:i,aws_appsync_region:a,aws_bots_config:c,aws_cognito_identity_pool_id:l,aws_cognito_sign_up_verification_method:p,aws_cognito_mfa_configuration:h,aws_cognito_mfa_types:g,aws_cognito_password_protection_settings:f,aws_cognito_verification_mechanisms:E,aws_cognito_signup_attributes:m,aws_cognito_social_providers:y,aws_cognito_username_attributes:I,aws_mandatory_sign_in:S,aws_mobile_analytics_app_id:x,aws_mobile_analytics_app_region:v,aws_user_files_s3_bucket:w,aws_user_files_s3_bucket_region:A,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:C,aws_user_pools_id:R,aws_user_pools_web_client_id:P,geo:T,oauth:N,predictions:U,aws_cloud_logic_custom:b,Notifications:_,modelIntrospection:F}=e,D={};x&&(D.Analytics={Pinpoint:{appId:x,region:v}});let{InAppMessaging:k,Push:M}=_??{};if(k?.AWSPinpoint||M?.AWSPinpoint){if(k?.AWSPinpoint){let{appId:e,region:t}=k.AWSPinpoint;D.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(M?.AWSPinpoint){let{appId:e,region:t}=M.AWSPinpoint;D.Notifications={...D.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(c)&&(D.Interactions={LexV1:Object.fromEntries(c.map(e=>[e.name,e]))}),i){let e=s[n];e||r.debug(`Invalid authentication type ${n}. Falling back to IAM.`),D.API={GraphQL:{endpoint:i,apiKey:t,region:a,defaultAuthMode:e??"iam"}},F&&(D.API.GraphQL.modelIntrospection=F)}let O=h?{status:h&&h.toLowerCase(),totpEnabled:g?.includes("TOTP")??!1,smsEnabled:g?.includes("SMS")??!1}:void 0,L=f?{minLength:f.passwordPolicyMinLength,requireLowercase:f.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:f.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:f.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:f.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,V=Array.from(new Set([...E??[],...m??[]])).reduce((e,t)=>({...e,[t.toLowerCase()]:{required:!0}}),{}),K=I?.includes("EMAIL")??!1,q=I?.includes("PHONE_NUMBER")??!1;(l||R)&&(D.Auth={Cognito:{identityPoolId:l,allowGuestAccess:"enable"!==S,signUpVerificationMethod:p,userAttributes:V,userPoolClientId:P,userPoolId:R,mfa:O,passwordFormat:L,loginWith:{username:!(K||q),email:K,phone:q}}});let G=!!N&&Object.keys(N).length>0,B=!!y&&y.length>0;if(D.Auth&&G&&(D.Auth.Cognito.loginWith={...D.Auth.Cognito.loginWith,oauth:{...u(N),...B&&{providers:d(y)}}}),w&&(D.Storage={S3:{bucket:w,region:A,dangerouslyConnectToHttpEndpointForTesting:C}}),T){let{amazon_location_service:e}=T;D.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(b&&(D.API={...D.API,REST:b.reduce((e,t)=>{let{name:n,endpoint:i,region:o,service:r}=t;return{...e,[n]:{endpoint:i,...r?{service:r}:void 0,...o?{region:o}:void 0}}},{})}),U){let{VoiceId:e}=U?.convert?.speechGenerator?.defaults??{};D.Predictions=e?{...U,convert:{...U.convert,speechGenerator:{...U.convert.speechGenerator,defaults:{voiceId:e}}}}:U}return D},c=e=>e?.split(",")??[],u=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:i,responseType:o})=>({domain:e,scopes:t,redirectSignIn:c(n),redirectSignOut:c(i),responseType:o}),d=e=>e.map(e=>{let t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}),l={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"},p={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"},h=e=>Object.keys(e).some(e=>e.startsWith("aws_"))?a(e):!function(e){let{version:t}=e;return!!t&&t.startsWith("1")}(e)?e:function(e){let t={};if(e.storage&&(t.Storage=function(e){if(!e)return;let{bucket_name:t,aws_region:n,buckets:i}=e;return{S3:{bucket:t,region:n,buckets:i&&function(e){let t={};return e.forEach(({name:e,bucket_name:n,aws_region:i,paths:o})=>{if(e in t)throw Error(`Duplicate friendly name found: ${e}. Name must be unique.`);let r=o?Object.entries(o).reduce((e,[t,n])=>(void 0!==n&&(e[t]=n),e),{}):void 0;t[e]={bucketName:n,region:i,paths:r}}),t}(i)}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:n,identity_pool_id:i,password_policy:o,mfa_configuration:r,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:c,username_attributes:u,standard_required_attributes:d,groups:l}=e,h={Cognito:{userPoolId:t,userPoolClientId:n,groups:l}};return i&&(h.Cognito={...h.Cognito,identityPoolId:i}),o&&(h.Cognito.passwordFormat={requireLowercase:o.require_lowercase,requireNumbers:o.require_numbers,requireUppercase:o.require_uppercase,requireSpecialCharacters:o.require_symbols,minLength:o.min_length??6}),r&&(h.Cognito.mfa={status:"OPTIONAL"===r?"optional":"REQUIRED"===r?"on":"off",smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(h.Cognito.allowGuestAccess=a),c&&(h.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:"token"===c.response_type?"token":"code",scopes:c.scopes,providers:function(e=[]){return e.reduce((e,t)=>(void 0!==p[t]&&e.push(p[t]),e),[])}(c.identity_providers)}}),u&&(h.Cognito.loginWith={...h.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),d&&(h.Cognito.userAttributes=d.reduce((e,t)=>({...e,[t]:{required:!0}}),{})),h}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;let{aws_region:t,geofence_collections:n,maps:i,search_indices:o}=e;return{LocationService:{region:t,searchIndices:o,geofenceCollections:n,maps:i}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;let{aws_region:t,default_authorization_type:n,url:i,api_key:o,model_introspection:r}=e;return{GraphQL:{endpoint:i,defaultAuthMode:l[n],region:t,apiKey:o,modelIntrospection:r}}}(e.data)),e.custom){let n=function(e){if(!e?.events)return;let{url:t,aws_region:n,api_key:i,default_authorization_type:o}=e.events;return{Events:{endpoint:t,defaultAuthMode:l[o],region:n,apiKey:i}}}(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=function(e){if(!e)return;let{aws_region:t,channels:n,amazon_pinpoint_app_id:i}=e,o=n.includes("IN_APP_MESSAGING"),r=n.includes("APNS")||n.includes("FCM");if(!(o||r))return;let s={};return o&&(s.InAppMessaging={Pinpoint:{appId:i,region:t}}),r&&(s.PushNotification={Pinpoint:{appId:i,region:t}}),s}(e.notifications)),t}(e)},9556:function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}n.d(t,{V:function(){return H}});var o=function e(t,n){function o(e,o,r){if("undefined"!=typeof document){"number"==typeof(r=i({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in r)r[a]&&(s+="; "+a,!0!==r[a]&&(s+="="+r[a].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+s}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},o=0;o<n.length;o++){var r=n[o].split("="),s=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(i[a]=t.read(s,a),e===a)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){o(e,"",i({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,i({},this.attributes,t))},withConverter:function(t){return e(i({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class r{constructor(e={}){let{path:t,domain:n,expires:i,sameSite:o,secure:r}=e;if(this.domain=n,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?i:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||r,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===o&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}async setItem(e,t){o.set(e,t,this.getData())}async getItem(e){return o.get(e)??null}async removeItem(e){o.remove(e,this.getData())}async clear(){let e=Object.keys(o.get()).map(e=>this.removeItem(e));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}var s=n(4685),a=n(5165),c=n(2640),u=n(6344);n(8602),n(6361);var d=n(9300),l=n(5434),p=n(7099),h=n(8481),g=n(9045),f=n(8991),E=n(7836),m=n(6743),y=n(1847),I=n(182),S=n(7977);let x=(0,I.V)(g.y,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),v={service:"cognito-identity",endpointResolver:({region:e})=>({url:new m.a(`https://cognito-identity.${e}.${(0,h.b)(e)}`)}),retryDecider:(0,E.j)(l.f),computeDelay:f.k,userAgentValue:(0,y.Zm)(),cache:"no-store"};(0,S.QW)(()=>{v.userAgentValue=(0,y.Zm)()});let w=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),A=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),C=async e=>{if(e.statusCode>=300)throw await (0,l.f)(e);{let t=await (0,l.e)(e);return{IdentityId:t.IdentityId,Credentials:R(t.Credentials),$metadata:(0,d.B)(e)}}},R=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:i}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:i&&new Date(1e3*i)}),P=(0,p.z)(x,(e,t)=>A(t,w("GetCredentialsForIdentity"),JSON.stringify(e)),C,v);var T=n(3461),N=n(4686),U=n(9559),b=n(6605),_=n(6566);let F=async e=>{if(!(e.statusCode>=300))return{IdentityId:(await (0,l.e)(e)).IdentityId,$metadata:(0,d.B)(e)};throw await (0,l.f)(e)},D=(0,p.z)(x,(e,t)=>A(t,w("GetId"),JSON.stringify(e)),F,v);function k(e){let t=(0,T.xp)(e).payload.iss,n={};if(!t)throw new N.l({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}async function M({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let i=await n.loadIdentityId();if(i)return i.id;let o=e?.idToken?k(e.idToken.toString()):{},r=await O(o,t);return n.storeIdentityId({id:r,type:e?"primary":"guest"}),r}async function O(e,t){let n;let i=t?.identityPoolId,o=(0,b.N)(i);try{n=(await D({region:o},{IdentityPoolId:i,Logins:e})).IdentityId}catch(e){throw(0,U.R)(e),new N.l(e)}if(!n)throw new N.l({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return n}let L=new u.k("CognitoCredentialsProvider");class V{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){L.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){L.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){let t=e.authenticated,{tokens:n}=e,{authConfig:i}=e;try{(0,T.YE)(i?.Cognito)}catch{return}if(!t&&!i.Cognito.allowGuestAccess)return;let{forceRefresh:o}=e,r=this.hasTokenChanged(n),s=await M({tokens:n,authConfig:i.Cognito,identityIdStore:this._identityIdStore});return((o||r)&&this.clearCredentials(),t)?((0,_.Cg)(n),this.credsForOIDCTokens(i.Cognito,n,s)):this.getGuestCredentials(s,i.Cognito)}async getGuestCredentials(e,t){let n;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return L.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let i=(0,b.N)(t.identityPoolId);try{n=await P({region:i},{IdentityId:e})}catch(e){throw(0,U.R)(e),new N.l(e)}if(n?.Credentials?.AccessKeyId&&n?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let t={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:e};return n.IdentityId&&(t.identityId=n.IdentityId,this._identityIdStore.storeIdentityId({id:n.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new N.l({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,n){let i;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return L.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let o=t.idToken?k(t.idToken.toString()):{},r=(0,b.N)(e.identityPoolId);try{i=await P({region:r},{IdentityId:n,Logins:o})}catch(e){throw(0,U.R)(e),new N.l(e)}if(i?.Credentials?.AccessKeyId&&i?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let e={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:n};return i.IdentityId&&(e.identityId=i.IdentityId,this._identityIdStore.storeIdentityId({id:i.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new N.l({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}var K=n(2684);let q={identityId:"identityId"},G=new u.k("DefaultIdentityIdStore");class B{setAuthConfig(e){(0,T.YE)(e.Cognito),this.authConfig=e,this._authKeys=W("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){(0,T.YE)(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let e=await this.keyValueStorage.getItem(this._authKeys.identityId);if(e)return this._hasGuestIdentityId=!0,{id:e,type:"guest"};return null}}catch(e){return G.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){(0,T.YE)(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let W=(e,t)=>(0,K._X)(q)(`com.amplify.${e}`,t),$=new V(new B(s.Fm));var z=n(8714);let H={configure(e,t){let n=(0,c.h)(e),i=new r({sameSite:"lax"}),o=t?.ssr?i:s.Fm,u=t?.ssr?new V(new B(i)):$;if(!n.Auth||t?.Auth){a.d.configure(n,t);return}if(!a.d.libraryOptions.Auth){z.D.setAuthConfig(n.Auth),z.D.setKeyValueStorage(o),a.d.configure(n,{...t,Auth:{tokenProvider:z.D,credentialsProvider:u}});return}if(t){let e=a.d.libraryOptions.Auth;void 0!==t.ssr&&(z.D.setKeyValueStorage(o),e.credentialsProvider=u),a.d.configure(n,{Auth:e,...t});return}a.d.configure(n)},getConfig:()=>a.d.getConfig()}}}]);