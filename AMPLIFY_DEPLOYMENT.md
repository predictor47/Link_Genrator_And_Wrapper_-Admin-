# AWS Amplify Deployment Guide

This document provides information about deploying this Next.js application to AWS Amplify using GitHub integration.

## Deployment Configuration

The application is configured to work with AWS Amplify Gen 2, which uses a new approach to backend resources. The key configuration files include:

- `amplify.yml`: Defines the build process for both frontend and backend
- `amplify/backend.ts`: Main backend definition file
- `amplify/auth/resource.ts`: Authentication resource definition
- `amplify/data/resource.ts`: Data models and API definition

## Deployment Process

When you push changes to your GitHub repository, Amplify will:

1. Run the backend build phase
   - Install required packages (`npm ci`)
   - Use `ampx pipeline-deploy` to deploy the backend resources

2. Run the frontend build phase
   - Use Node.js 20 (`nvm use 20`)
   - Install dependencies (`npm ci`)
   - Build the Next.js application (`npm run build`)

3. Deploy the built application

## Environment Variables

The application will automatically use the correct environment variables based on:

1. Amplify outputs from backend deployment
2. Environment variables set in the Amplify Console

For local development, create a `.env.local` file with your environment variables.

## Troubleshooting

If you encounter issues with the backend not being associated with your frontend:

1. Check the Amplify Console logs
2. Make sure your GitHub repository has the proper permissions
3. Verify that your `amplify.yml` file is correctly formatted
4. Ensure that `amplify_outputs.json` is being generated by the backend build

## Clean Redeploy

If you need to start fresh:

1. Delete the app in Amplify Console
2. Create a new app
3. Connect to your GitHub repository
4. The deployment should automatically detect the Amplify Gen 2 configuration

## Monitoring

After deployment, you can monitor your application in the Amplify Console. Check:

- Build logs for any errors
- Environment variables to ensure they're correctly set
- Backend resources to confirm they were deployed properly
