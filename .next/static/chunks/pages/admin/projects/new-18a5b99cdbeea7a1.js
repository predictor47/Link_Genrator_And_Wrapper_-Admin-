(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{8680:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/projects/new",function(){return s(247)}])},9051:function(e,t,s){"use strict";s.d(t,{a:function(){return r.a}});var r=s(8877)},3101:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(5893),n=s(7294),a=s(1163),i=s(9051);function o(e){let{children:t,redirectTo:s="/admin/login"}=e,{isAuthenticated:o,isLoading:l}=(0,i.a)(),d=(0,a.useRouter)();return((0,n.useEffect)(()=>{if(!l&&!o){let e=encodeURIComponent(d.asPath);d.replace("".concat(s,"?redirect=").concat(e))}},[o,l,s,d]),l)?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):o?(0,r.jsx)(r.Fragment,{children:t}):null}},247:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(5893),n=s(7294),a=s(1163),i=s(7066),o=s(1664),l=s.n(o),d=s(3101);function c(){let e=(0,a.useRouter)(),[t,s]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[u,m]=(0,n.useState)([]),[x,b]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[f,g]=(0,n.useState)(!1),[j,y]=(0,n.useState)(""),N=e=>{m(u.filter((t,s)=>s!==e))},v=async s=>{if(s.preventDefault(),!t.trim()){y("Project name is required");return}g(!0),y("");try{(await i.Z.post("/api/projects/create",{name:t,description:o,questions:u})).data.success&&e.push("/admin")}catch(e){var r,n;y((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to create project")}finally{g(!1)}};return(0,r.jsx)(d.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Project"}),(0,r.jsx)(l(),{href:"/admin",className:"text-blue-600 hover:text-blue-800",children:"Back to Dashboard"})]})}),(0,r.jsx)("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Project Details"})}),(0,r.jsxs)("form",{onSubmit:v,className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),(0,r.jsx)("input",{type:"text",id:"name",value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,r.jsx)("textarea",{id:"description",value:o,onChange:e=>c(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"mb-6 border-t border-gray-200 pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Pre-survey Questions"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"These questions will be asked before the survey and used for validation."}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-md",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),(0,r.jsx)("input",{type:"text",id:"question",value:x,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"E.g., What is your age group?"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"options",className:"block text-sm font-medium text-gray-700 mb-1",children:"Options (comma separated)"}),(0,r.jsx)("input",{type:"text",id:"options",value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"E.g., 18-24, 25-34, 35-44, 45+"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{if(!x.trim()){y("Question text is required");return}let e=h.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(e.length<2){y("At least two options are required");return}m([...u,{text:x,options:e}]),b(""),p(""),y("")},className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Add Question"})]}),u.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700",children:"Added Questions:"}),u.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border border-gray-200 rounded-md bg-white flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.text}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Options: ",e.options.join(", ")]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>N(t),className:"text-red-600 hover:text-red-800 font-medium",children:"Remove"})]},t))]}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No questions added yet"})]}),j&&(0,r.jsx)("div",{className:"mb-6 p-3 bg-red-100 text-red-700 rounded-md",children:j}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:f,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50",children:f?"Creating...":"Create Project"})})]})]})})]})})}}},function(e){e.O(0,[143,664,888,774,179],function(){return e(e.s=8680)}),_N_E=e.O()}]);