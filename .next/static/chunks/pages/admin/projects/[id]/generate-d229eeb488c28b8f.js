(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{1762:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/projects/[id]/generate",function(){return s(4304)}])},9051:function(e,t,s){"use strict";s.d(t,{a:function(){return l.a}});var l=s(8877)},3101:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var l=s(5893),n=s(7294),a=s(1163),r=s(9051);function i(e){let{children:t,redirectTo:s="/admin/login"}=e,{isAuthenticated:i,isLoading:o}=(0,r.a)(),c=(0,a.useRouter)();return((0,n.useEffect)(()=>{if(!o&&!i){let e=encodeURIComponent(c.asPath);c.replace("".concat(s,"?redirect=").concat(e))}},[i,o,s,c]),o)?(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,l.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):i?(0,l.jsx)(l.Fragment,{children:t}):null}},4304:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return h},default:function(){return p}});var l=s(5893),n=s(7294),a=s(1163),r=s(1664),i=s.n(r),o=s(7066),c=s(7536),d=s(7460),u=s.n(d),m=e=>{let{onCSVProcessed:t,templateFields:s=["originalUrl","vendorCode","count","testCount","liveCount"],className:a=""}=e,[r,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),[d,m]=(0,n.useState)(null);return(0,l.jsx)("div",{className:"".concat(a),children:(0,l.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("label",{htmlFor:"csvFile",className:"block text-gray-700 text-sm font-bold",children:"Upload CSV File:"}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=new Blob([s.join(",")+"\nhttps://example.com/survey,VENDOR1,10,5,5\nhttps://example.com/survey2,VENDOR2,5,0,5"],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),l=URL.createObjectURL(e);t.setAttribute("href",l),t.setAttribute("download","link_generation_template.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Download Template"})]}),(0,l.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-md p-6 hover:border-gray-400 transition-colors",children:[(0,l.jsx)("input",{id:"csvFile",name:"csvFile",type:"file",accept:".csv",onChange:e=>{var s;c(null);let l=null===(s=e.target.files)||void 0===s?void 0:s[0];l&&(m(l.name),i(!0),u().parse(l,{header:!0,skipEmptyLines:!0,complete:e=>{if(e.errors.length>0){c("CSV parsing error: ".concat(e.errors[0].message)),i(!1);return}let s=e.data,l=[];s.length>0&&!s[0].hasOwnProperty("originalUrl")&&l.push("CSV must have 'originalUrl' column"),l.length>0?c(l.join(", ")):t(s),i(!1)},error:e=>{c("Error parsing CSV: ".concat(e.message)),i(!1)}}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:r}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,l.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:d||"Drag and drop CSV file here, or click to select"}),(0,l.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"CSV file with survey URLs and parameters"})]})]}),r&&(0,l.jsxs)("div",{className:"flex justify-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"}),(0,l.jsx)("span",{className:"ml-3 text-sm text-gray-600",children:"Processing file..."})]}),o&&(0,l.jsx)("div",{className:"text-red-500 text-sm",children:o})]})})},x=s(3101),h=!0;function p(e){let{project:t}=e;(0,a.useRouter)();let[s,r]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(null),[g,b]=(0,n.useState)([]),[y,v]=(0,n.useState)([]),[f,j]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!1),[S,L]=(0,n.useState)([]),[U,T]=(0,n.useState)({current:0,total:0}),{register:V,handleSubmit:I,watch:E,formState:{errors:F},setValue:R}=(0,c.cI)(),A=E("linkType","LIVE"),_=E("restrictGeo",!1);E("vendorId","");let G=E("testCount",0),P=E("liveCount",0);(0,n.useEffect)(()=>{N&&R("count",Number(G||0)+Number(P||0))},[G,P,N,R]),(0,n.useEffect)(()=>{(async()=>{try{let e=await o.Z.get("/api/vendors/list?projectId=".concat(t.id));e.data.success&&v(e.data.vendors)}catch(e){console.error("Failed to fetch vendors:",e)}})()},[t.id]);let B=async()=>{if(0===S.length)return;r(!0),u(null),p(null),T({current:0,total:S.length});let e=[];for(let s=0;s<S.length;s++){let l=S[s];T({current:s+1,total:S.length});try{let s=null;if(l.vendorCode){let e=y.find(e=>e.code===l.vendorCode);e?s=e.id:console.warn("Vendor with code ".concat(l.vendorCode," not found, skipping vendor assignment"))}let n=null;if(l.geoRestriction)try{let e=JSON.parse(l.geoRestriction);Array.isArray(e)?n=e:"string"==typeof e&&(n=[e])}catch(e){n=l.geoRestriction.split(",").map(e=>e.trim())}let a={projectId:t.id,originalUrl:l.originalUrl,vendorId:s,geoRestriction:n};void 0!==l.testCount&&void 0!==l.liveCount?(a.testCount=parseInt(String(l.testCount))||0,a.liveCount=parseInt(String(l.liveCount))||0,a.count=a.testCount+a.liveCount):(a.count=parseInt(String(l.count))||1,a.linkType="LIVE");let r=await o.Z.post("/api/links/generate",a);r.data.success&&r.data.links&&e.push(...r.data.links)}catch(e){console.error("Error processing row ".concat(s+1,":"),e)}}b(e),r(!1),p("Successfully generated ".concat(e.length," links from CSV data."))},O=async e=>{var s,l,n;if(w&&S.length>0){await B();return}r(!0),u(null),p(null);try{let l=null;e.restrictGeo&&(null===(s=e.countries)||void 0===s?void 0:s.length)&&(l=Array.isArray(e.countries)?e.countries:[e.countries]);let n={projectId:t.id,originalUrl:e.originalUrl,vendorId:e.vendorId||null,geoRestriction:l};N?(n.testCount=parseInt(e.testCount)||0,n.liveCount=parseInt(e.liveCount)||0,n.count=n.testCount+n.liveCount):(n.count=parseInt(e.count)||1,n.linkType=e.linkType||"LIVE");let a=await o.Z.post("/api/links/generate",n);a.data.success?(p("Successfully generated ".concat(a.data.count," links.")),b(a.data.links)):u(a.data.message||"Failed to generate links")}catch(e){u((null===(n=e.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Error generating links"),console.error("Error:",e)}finally{r(!1)}},[D,Z]=(0,n.useState)(!1),[M,q]=(0,n.useState)(""),[H,J]=(0,n.useState)(""),[W,z]=(0,n.useState)(!1),X=async e=>{e.preventDefault(),z(!0);try{let e=await o.Z.post("/api/vendors/create",{projectId:t.id,name:M,code:H});e.data.success&&(v([...y,e.data.vendor]),q(""),J(""),Z(!1))}catch(e){var s,l;u((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Failed to add vendor")}finally{z(!1)}},K=e=>{navigator.clipboard.writeText(e),p("Link copied to clipboard!"),setTimeout(()=>p(null),2e3)};return(0,l.jsx)(x.Z,{children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(i(),{href:"/admin/projects/".concat(t.id),className:"text-blue-600 hover:text-blue-800",children:"â† Back to project"}),(0,l.jsx)("h1",{className:"text-3xl font-bold mt-2",children:t.name}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Generate Survey Links"})]}),d&&(0,l.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:d}),h&&(0,l.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:h}),(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,l.jsx)("h3",{className:"text-lg font-medium",children:"Link Generation Method"})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>C(!1),className:"p-4 rounded-lg border-2 flex flex-col items-center ".concat(w?"border-gray-200 hover:border-gray-300":"border-blue-500 bg-blue-50"),children:[(0,l.jsx)("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,l.jsx)("span",{className:"font-medium",children:"Manual Entry"}),(0,l.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:"Create links one by one with form"})]}),(0,l.jsxs)("button",{type:"button",onClick:()=>C(!0),className:"p-4 rounded-lg border-2 flex flex-col items-center ".concat(w?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,l.jsx)("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,l.jsx)("span",{className:"font-medium",children:"Batch Upload"}),(0,l.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:"Upload CSV with multiple links"})]})]})]}),(0,l.jsxs)("form",{onSubmit:I(O),children:[w?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(m,{onCSVProcessed:e=>{L(e),C(!0)},templateFields:["originalUrl","vendorCode","count","testCount","liveCount","geoRestriction"],className:"mb-4"}),S.length>0&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["Loaded ",S.length," entries from CSV"]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test/Live"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.slice(0,5).map((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-2 text-sm text-gray-900",children:e.originalUrl}),(0,l.jsx)("td",{className:"px-6 py-2 text-sm text-gray-500",children:e.vendorCode||"-"}),(0,l.jsx)("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?Number(e.testCount)+Number(e.liveCount):e.count||1}),(0,l.jsx)("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?"".concat(e.testCount," / ").concat(e.liveCount):"-"})]},t))})]})}),S.length>5&&(0,l.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Showing 5 of ",S.length," rows..."]})]}),s&&U.total>0&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Processing Batch"}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(U.current/U.total*100,"%")}})}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Processing ",U.current," of ",U.total," rows..."]})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalUrl",children:"Original Survey URL"}),(0,l.jsx)("input",{id:"originalUrl",type:"url",placeholder:"https://example.com/survey",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("originalUrl",{required:!0})}),F.originalUrl&&(0,l.jsx)("p",{className:"text-red-500 text-xs italic",children:"Original URL is required"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"vendorId",children:"Vendor"}),(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsxs)("select",{id:"vendorId",className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline w-full",...V("vendorId"),children:[(0,l.jsx)("option",{value:"",children:"-- No Vendor --"}),y.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),(0,l.jsx)("button",{type:"button",className:"ml-2 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded",onClick:()=>Z(!D),children:D?"Cancel":"Add Vendor"})]}),D&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-700 mb-2",children:"Add New Vendor"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorName",children:"Vendor Name"}),(0,l.jsx)("input",{id:"vendorName",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:M,onChange:e=>q(e.target.value),required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorCode",children:"Vendor Code"}),(0,l.jsx)("input",{id:"vendorCode",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:H,onChange:e=>J(e.target.value),required:!0}),(0,l.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:'A short code to identify this vendor (e.g., "ABC_CORP")'})]}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)("button",{type:"button",className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded disabled:opacity-50",onClick:X,disabled:W||!M||!H,children:W?"Adding...":"Add Vendor"})})]})]})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"splitLinkTypes",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:N,onChange:e=>k(e.target.checked)}),(0,l.jsx)("label",{htmlFor:"splitLinkTypes",className:"ml-2 block text-sm text-gray-700",children:"Generate both Test and Live links"})]})}),N?(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Distribution"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"testCount",children:"Test Links"}),(0,l.jsx)("input",{id:"testCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("testCount",{min:0,max:1e3})}),(0,l.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Test links have relaxed security for development purposes"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"liveCount",children:"Live Links"}),(0,l.jsx)("input",{id:"liveCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("liveCount",{min:0,max:1e3})}),(0,l.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Live links enforce all security checks for production use"})]})]}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Total links to generate: ",(0,l.jsx)("span",{className:"font-medium",children:Number(G||0)+Number(P||0)})]}),Number(G||0)+Number(P||0)>1e3&&(0,l.jsx)("p",{className:"text-red-500 text-xs italic",children:"Total links must not exceed 1000"}),Number(G||0)+Number(P||0)===0&&(0,l.jsx)("p",{className:"text-red-500 text-xs italic",children:"You must generate at least 1 link"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"count",children:"Number of Links to Generate"}),(0,l.jsx)("input",{id:"count",type:"number",min:"1",max:"1000",defaultValue:"1",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("count",{min:1,max:1e3})}),F.count&&(0,l.jsx)("p",{className:"text-red-500 text-xs italic",children:"Please enter a number between 1 and 1000"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Type"}),(0,l.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"linkTypeLIVE",type:"radio",value:"LIVE",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",defaultChecked:!0,...V("linkType")}),(0,l.jsx)("label",{htmlFor:"linkTypeLIVE",className:"ml-2 block text-sm text-gray-700",children:"Live (Production)"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"linkTypeTEST",type:"radio",value:"TEST",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",...V("linkType")}),(0,l.jsx)("label",{htmlFor:"linkTypeTEST",className:"ml-2 block text-sm text-gray-700",children:"Test (Relaxed Security)"})]})]}),(0,l.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"LIVE"===A?"Live mode enforces all security checks and is meant for production use.":"Test mode relaxes security checks for development and testing purposes."})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"restrictGeo",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",...V("restrictGeo"),onChange:e=>j(e.target.checked)}),(0,l.jsx)("label",{htmlFor:"restrictGeo",className:"ml-2 block text-sm text-gray-700",children:"Restrict by Geography"})]}),_&&f&&(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"countries",children:"Allowed Countries"}),(0,l.jsx)("select",{id:"countries",multiple:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("countries",{required:_}),size:5,children:[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"IN",name:"India"},{code:"BR",name:"Brazil"},{code:"ZA",name:"South Africa"}].map(e=>(0,l.jsxs)("option",{value:e.code,children:[e.name," (",e.code,")"]},e.code))}),(0,l.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Hold Ctrl/Cmd to select multiple countries"}),F.countries&&(0,l.jsx)("p",{className:"text-red-500 text-xs italic",children:"Please select at least one country"})]})]})]}),(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",disabled:s||N&&Number(G||0)+Number(P||0)===0,children:s?"Generating...":w?"Generate Batch Links":"Generate Links"})})]})]}),g.length>0&&(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"Generated Links"}),(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsx)("button",{onClick:()=>{if(!g.length)return;let e=new Blob([["URL,UID,Type,Status",...g.map(e=>[e.fullUrl,e.uid,e.linkType,e.status].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),l=URL.createObjectURL(e);s.setAttribute("href",l),s.setAttribute("download","".concat(t.name.replace(/\s+/g,"_"),"_links_").concat(new Date().toISOString().slice(0,10),".csv")),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded text-sm",children:"Export CSV"}),(0,l.jsx)("button",{onClick:()=>{let e=g.map(e=>e.fullUrl).join("\n");navigator.clipboard.writeText(e),p("All links copied to clipboard!"),setTimeout(()=>p(null),2e3)},className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded text-sm",children:"Copy All URLs"})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UID"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.slice(0,50).map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.uid}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,l.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium ".concat("LIVE"===e.linkType?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.linkType})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,l.jsx)("a",{href:e.fullUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.fullUrl.length>50?"".concat(e.fullUrl.substring(0,50),"..."):e.fullUrl})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,l.jsx)("button",{onClick:()=>K(e.fullUrl),className:"text-indigo-600 hover:text-indigo-900",children:"Copy"})})]},e.id))})]})}),g.length>50&&(0,l.jsxs)("p",{className:"text-sm text-gray-500 mt-4",children:["Showing 50 of ",g.length," links. Please use the export button to access all links."]})]})]})})}}},function(e){e.O(0,[143,664,985,888,774,179],function(){return e(e.s=1762)}),_N_E=e.O()}]);