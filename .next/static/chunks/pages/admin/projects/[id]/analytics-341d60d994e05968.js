(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{1262:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/projects/[id]/analytics",function(){return s(7750)}])},9051:function(e,t,s){"use strict";s.d(t,{a:function(){return a.a}});var a=s(8877)},3101:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(5893),l=s(7294),r=s(1163),d=s(9051);function i(e){let{children:t,redirectTo:s="/admin/login"}=e,{isAuthenticated:i,isLoading:n}=(0,d.a)(),c=(0,r.useRouter)();return((0,l.useEffect)(()=>{if(!n&&!i){let e=encodeURIComponent(c.asPath);c.replace("".concat(s,"?redirect=").concat(e))}},[i,n,s,c]),n)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):i?(0,a.jsx)(a.Fragment,{children:t}):null}},7750:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return m},default:function(){return p}});var a=s(5893),l=s(7294),r=s(1163),d=s(1664),i=s.n(d),n=s(7066),c=s(3148),o=s(6495),x=s(3101);c.kL.register(c.qi,c.u,c.De,c.uw,c.f$,c.ZL,c.Dx);var m=!0;function p(e){var t,s,d,c;let{projectId:m,projectName:p,vendors:g,flags:h,geoData:u,linkTypeData:y}=e;(0,r.useRouter)();let[b,v]=(0,l.useState)("all"),[j,f]=(0,l.useState)("overview"),[N,w]=(0,l.useState)("all"),[k,C]=(0,l.useState)(!1),[L,F]=(0,l.useState)(null),R={labels:["Unused","Clicked","Completed","Disqualified","Quota Full"],datasets:[{data:g.reduce((e,t)=>(("all"===b||b===t.id)&&t.stats&&(e[0]+=t.stats.pending,e[1]+=t.stats.started,e[2]+=t.stats.completed,e[3]+=t.stats.flagged/2,e[4]+=t.stats.flagged/2),e),[0,0,0,0,0]),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(245, 158, 11, 0.8)","rgba(5, 150, 105, 0.8)","rgba(239, 68, 68, 0.8)","rgba(168, 85, 247, 0.8)"],borderColor:["rgba(59, 130, 246, 1)","rgba(245, 158, 11, 1)","rgba(5, 150, 105, 1)","rgba(239, 68, 68, 1)","rgba(168, 85, 247, 1)"],borderWidth:1}]},D={labels:g.map(e=>e.name),datasets:[{label:"Total Links",data:g.map(e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.total)||0}),backgroundColor:"rgba(59, 130, 246, 0.6)"},{label:"Completed",data:g.map(e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.completed)||0}),backgroundColor:"rgba(5, 150, 105, 0.6)"},{label:"Disqualified/Quota Full",data:g.map(e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.flagged)||0}),backgroundColor:"rgba(239, 68, 68, 0.6)"}]},T={labels:u.map(e=>e.country),datasets:[{label:"All Responses",data:u.map(e=>e.count),backgroundColor:"rgba(59, 130, 246, 0.6)"},{label:"Completed",data:u.map(e=>e.completedCount),backgroundColor:"rgba(5, 150, 105, 0.6)"},{label:"Disqualified/Quota Full",data:u.map(e=>e.disqualifiedCount),backgroundColor:"rgba(239, 68, 68, 0.6)"}]},M={labels:["Test Links","Live Links"],datasets:[{label:"Total",data:[y.test,y.live],backgroundColor:"rgba(99, 102, 241, 0.6)"},{label:"Completed",data:[y.testCompleted,y.liveCompleted],backgroundColor:"rgba(5, 150, 105, 0.6)"},{label:"Disqualified/Quota Full",data:[y.testDisqualified,y.liveDisqualified],backgroundColor:"rgba(239, 68, 68, 0.6)"}]},S=async()=>{C(!0),F(null);try{let e=await n.Z.get("/api/projects/".concat(m,"/export"),{params:{vendor:"all"!==b?b:void 0,dateRange:N,format:"csv"}}),t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.style.display="none",a.href=s,a.download="".concat(p,"-analytics-").concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}catch(s){var e,t;console.error("Error exporting data:",s),F((null==s?void 0:null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to export data")}finally{C(!1)}};return(0,a.jsx)(x.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(i(),{href:"/admin/projects/".concat(m),className:"text-blue-600 hover:text-blue-800 mb-2 inline-flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Project"]}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[p," Analytics"]})]}),(0,a.jsx)("div",{className:"flex space-x-3",children:(0,a.jsxs)("button",{onClick:S,disabled:k,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 flex items-center",children:[k?(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Data"]})})]})})}),(0,a.jsxs)("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-6",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Analytics Filters"})}),(0,a.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"vendor-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor"}),(0,a.jsxs)("select",{id:"vendor-filter",value:b,onChange:e=>v(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[(0,a.jsx)("option",{value:"all",children:"All Vendors"}),g.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"date-range",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),(0,a.jsxs)("select",{id:"date-range",value:N,onChange:e=>w(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[(0,a.jsx)("option",{value:"all",children:"All Time"}),(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,a.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"month",children:"Last 30 Days"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>{v("all"),w("all")},className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded",children:"Reset Filters"})})]})]}),L&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:L}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsxs)("nav",{className:"flex -mb-px",children:[(0,a.jsx)("button",{onClick:()=>f("overview"),className:"py-4 px-6 font-medium text-sm ".concat("overview"===j?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Overview"}),(0,a.jsx)("button",{onClick:()=>f("vendors"),className:"py-4 px-6 font-medium text-sm ".concat("vendors"===j?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Vendor Comparison"}),(0,a.jsx)("button",{onClick:()=>f("geo"),className:"py-4 px-6 font-medium text-sm ".concat("geo"===j?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Geographic Distribution"}),(0,a.jsx)("button",{onClick:()=>f("testlive"),className:"py-4 px-6 font-medium text-sm ".concat("testlive"===j?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Test vs. Live"}),(0,a.jsx)("button",{onClick:()=>f("flags"),className:"py-4 px-6 font-medium text-sm ".concat("flags"===j?"border-b-2 border-border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Flags"})]})}),"overview"===j&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Status Overview"}),"all"!==b&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Filtered by vendor: ",null===(t=g.find(e=>e.id===b))||void 0===t?void 0:t.name]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex flex-col items-center",children:(0,a.jsx)("div",{className:"w-full max-w-md",children:(0,a.jsx)(o.$I,{data:R,options:{plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:function(e){let t=e.label||"",s=e.raw||0,a=e.dataset.data.reduce((e,t)=>e+t,0);return"".concat(t,": ").concat(s," (").concat(a>0?Math.round(s/a*100):0,"%)")}}}}}})})}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg p-6 text-white",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Completion Rate"}),(0,a.jsxs)("div",{className:"text-4xl font-bold",children:[(()=>{let e=R.datasets[0].data.reduce((e,t)=>e+t,0),t=R.datasets[0].data[2];return e>0?Math.round(t/e*100):0})(),"%"]}),(0,a.jsxs)("p",{className:"text-green-100 mt-2",children:[R.datasets[0].data[2]," of ",R.datasets[0].data.reduce((e,t)=>e+t,0)," links completed"]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Flag Rate"}),(0,a.jsxs)("div",{className:"text-4xl font-bold",children:[(()=>{let e=R.datasets[0].data.reduce((e,t)=>e+t,0),t=R.datasets[0].data[3]+R.datasets[0].data[4];return e>0?Math.round(t/e*100):0})(),"%"]}),(0,a.jsxs)("p",{className:"text-red-100 mt-2",children:[R.datasets[0].data[3]+R.datasets[0].data[4]," of ",R.datasets[0].data.reduce((e,t)=>e+t,0)," links flagged"]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg p-6 text-white",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Quality Score"}),(0,a.jsxs)("div",{className:"text-4xl font-bold",children:[(()=>{let e=R.datasets[0].data[2],t=R.datasets[0].data[3]+R.datasets[0].data[4],s=e+t;return s>0?Math.round(100-t/s*100):100})(),"/100"]}),(0,a.jsx)("p",{className:"text-blue-100 mt-2",children:"Based on completion to flag ratio"})]})]})]})]}),"vendors"===j&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Vendor Comparison"})}),(0,a.jsxs)("div",{className:"p-6",children:[g.length>1?(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(o.$Q,{data:D,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!1,title:{display:!0,text:"Vendors"}},y:{stacked:!1,title:{display:!0,text:"Number of Links"}}}}})}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"You need at least two vendors to compare performance."}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Vendor Statistics"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Links"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flagged"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quality Score"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>{let t=e.stats||{total:0,pending:0,started:0,inProgress:0,completed:0,flagged:0},s=t.total>0?Math.round(t.completed/t.total+1e-5):0,l=t.completed+t.flagged>0?Math.round(100-t.flagged/(t.completed+t.flagged)*100):100;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.name," ",(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.code,")"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.total}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.completed}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s,"%"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.flagged}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(l>=90?"bg-green-100 text-green-800":l>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[l,"/100"]})})]},e.id)})})]})})]})]})]}),"geo"===j&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Geographic Distribution"}),"all"!==b&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Filtered by vendor: ",null===(s=g.find(e=>e.id===b))||void 0===s?void 0:s.name]})]}),(0,a.jsxs)("div",{className:"p-6",children:[u.length>0?(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(o.$Q,{data:T,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!1,title:{display:!0,text:"Countries"}},y:{stacked:!1,title:{display:!0,text:"Number of Responses"}}}}})}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No geographic data available. Geographic data is collected when users complete surveys."}),u.length>0&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Geographic Statistics"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Responses"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flagged"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>{let t=e.count>0?Math.round(e.completedCount/e.count*100):0;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.country}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.count}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.completedCount}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.flaggedCount}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[t,"%"]})]},e.country)})})]})})]})]})]}),"testlive"===j&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Test vs. Live Comparison"}),"all"!==b&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Filtered by vendor: ",null===(d=g.find(e=>e.id===b))||void 0===d?void 0:d.name]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(o.$Q,{data:M,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Link Type"}},y:{title:{display:!0,text:"Number of Links"}}}}})}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Test vs. Live Metrics"}),(0,a.jsxs)("div",{className:"overflow-hidden bg-gray-50 shadow sm:rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Performance Comparison"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Detailed metrics for test and live environments."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:(0,a.jsxs)("dl",{className:"sm:divide-y sm:divide-gray-200",children:[(0,a.jsxs)("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Metric"}),(0,a.jsx)("dd",{className:"text-sm font-medium text-gray-700 sm:col-span-1",children:"Test Links"}),(0,a.jsx)("dd",{className:"text-sm font-medium text-gray-700 sm:col-span-1",children:"Live Links"}),(0,a.jsx)("dd",{className:"text-sm font-medium text-gray-700 sm:col-span-1",children:"Difference"})]}),(0,a.jsxs)("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Total Links"}),(0,a.jsx)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:y.test}),(0,a.jsx)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:y.live}),(0,a.jsx)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:"-"})]}),(0,a.jsxs)("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Completion Rate"}),(0,a.jsxs)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:[y.test>0?Math.round(y.testCompleted/y.test*100):0,"%"]}),(0,a.jsxs)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:[y.live>0?Math.round(y.liveCompleted/y.live*100):0,"%"]}),(0,a.jsx)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:(()=>{let e=Math.round((y.test>0?y.testCompleted/y.test*100:0)-(y.live>0?y.liveCompleted/y.live*100:0));return(0,a.jsxs)("span",{className:e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",children:[e>0?"+":"",e,"%"]})})()})]}),(0,a.jsxs)("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-4 sm:gap-4 sm:px-6",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Flag Rate"}),(0,a.jsxs)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:[y.test>0?Math.round(y.testDisqualified/y.test*100):0,"%"]}),(0,a.jsxs)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:[y.live>0?Math.round(y.liveFlagged/y.live*100):0,"%"]}),(0,a.jsx)("dd",{className:"text-sm text-gray-900 sm:col-span-1",children:(()=>{let e=Math.round((y.test>0?y.testFlagged/y.test*100:0)-(y.live>0?y.liveFlagged/y.live*100:0));return(0,a.jsxs)("span",{className:e<0?"text-green-600":e>0?"text-red-600":"text-gray-600",children:[e>0?"+":"",e,"%"]})})()})]})]})})]})]})]})]}),"flags"===j&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg mb-8",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Flag Analysis"}),"all"!==b&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Filtered by vendor: ",null===(c=g.find(e=>e.id===b))||void 0===c?void 0:c.name]})]}),(0,a.jsx)("div",{className:"p-6",children:h.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Flag Reasons"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)("ul",{className:"divide-y divide-gray-200",children:(()=>{let e={};return h.forEach(t=>{e[t.reason]=(e[t.reason]||0)+1}),Object.entries(e).sort((e,t)=>t[1]-e[1]).map(e=>{let[t,s]=e,l=Math.round(s/h.length*100);return(0,a.jsxs)("li",{className:"py-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[s," (",l,"%)"]})]}),(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"bg-red-600 h-2.5 rounded-full",style:{width:"".concat(l,"%")}})})]},t)})})()})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Flags"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Link Type"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.slice(0,10).map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.reason}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.vendorName||"None"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("TEST"===e.linkType?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.linkType||"LIVE"})})]},e.id))})]})})]})]}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No flags found. Flags are created when suspicious behavior is detected."})})]})]})]})})}}},function(e){e.O(0,[196,143,664,421,888,774,179],function(){return e(e.s=1262)}),_N_E=e.O()}]);