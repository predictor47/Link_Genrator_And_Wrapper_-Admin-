(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{5489:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/projects/[id]/questions",function(){return s(2472)}])},2472:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return r},default:function(){return c}});var a=s(5893),n=s(7294),l=s(1163),i=s(1664),d=s.n(i),o=s(7066),r=!0;function c(e){let{project:t,initialQuestions:s}=e;(0,l.useRouter)();let[i,r]=(0,n.useState)(s),[c,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),[g,v]=(0,n.useState)(null),[b,f]=(0,n.useState)(null),j=async e=>{if(e.preventDefault(),p(!0),v(null),!c.trim()){v("Question text is required"),p(!1);return}let s=m.split("\n").map(e=>e.trim()).filter(e=>e.length>0);if(s.length<2){v("At least two options are required"),p(!1);return}try{let e=await o.Z.post("/api/projects/".concat(t.id,"/questions"),{text:c,options:s});e.data.success&&(r([e.data.question,...i]),u(""),x(""),f("Question added successfully"),setTimeout(()=>f(null),3e3))}catch(e){var a,n;v((null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to add question")}finally{p(!1)}},N=async e=>{if(confirm("Are you sure you want to delete this question?"))try{(await o.Z.delete("/api/projects/".concat(t.id,"/questions"),{data:{questionId:e}})).data.success&&(r(i.filter(t=>t.id!==e)),f("Question deleted successfully"),setTimeout(()=>f(null),3e3))}catch(e){var s,a;v((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to delete question")}};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(d(),{href:"/admin/projects/".concat(t.id),className:"text-blue-600 hover:text-blue-800",children:"â† Back to project"}),(0,a.jsx)("h1",{className:"text-3xl font-bold mt-2",children:t.name}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Pre-Survey Questions"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"These questions will be asked before the survey starts and randomly during the survey as a validation check."})]}),g&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:g}),b&&(0,a.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:b}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Question"}),(0,a.jsxs)("form",{onSubmit:j,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"newQuestion",children:"Question Text"}),(0,a.jsx)("input",{id:"newQuestion",type:"text",placeholder:"e.g., What is your age range?",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:c,onChange:e=>u(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"newOptions",children:"Options (one per line)"}),(0,a.jsx)("textarea",{id:"newOptions",placeholder:"e.g.,   18-24   25-34   35-44   45+",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:m,onChange:e=>x(e.target.value),rows:5,required:!0}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Enter each option on a new line. At least 2 options are required."})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",disabled:h,children:h?"Adding...":"Add Question"})]})]})}),(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Existing Questions"}),0===i.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("p",{children:"No questions added yet."}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Add questions to enable mid-survey validation."})]}):(0,a.jsx)("div",{className:"space-y-6",children:i.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-lg",children:e.text}),(0,a.jsx)("ul",{className:"mt-3 list-disc pl-6",children:e.options.map((e,t)=>(0,a.jsx)("li",{className:"text-gray-600",children:e},t))})]}),(0,a.jsx)("button",{onClick:()=>N(e.id),className:"text-red-500 hover:text-red-700",title:"Delete question",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})},e.id))})]})})]})]})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[282,66,664,888,774,179],function(){return e(e.s=5489)}),_N_E=e.O()}]);