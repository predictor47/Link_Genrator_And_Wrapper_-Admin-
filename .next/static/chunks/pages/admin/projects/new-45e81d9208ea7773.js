(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{8680:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/projects/new",function(){return s(247)}])},247:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(5893),a=s(7294),n=s(1163),i=s(7066),o=s(1664),l=s.n(o);function d(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[u,c]=(0,a.useState)([]),[m,x]=(0,a.useState)(""),[b,p]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),y=e=>{c(u.filter((t,s)=>s!==e))},N=async s=>{if(s.preventDefault(),!t.trim()){j("Project name is required");return}f(!0),j("");try{(await i.Z.post("/api/projects/create",{name:t,description:o,questions:u})).data.success&&e.push("/admin")}catch(e){var r,a;j((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to create project")}finally{f(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Project"}),(0,r.jsx)(l(),{href:"/admin",className:"text-blue-600 hover:text-blue-800",children:"Back to Dashboard"})]})}),(0,r.jsx)("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Project Details"})}),(0,r.jsxs)("form",{onSubmit:N,className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),(0,r.jsx)("input",{type:"text",id:"name",value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,r.jsx)("textarea",{id:"description",value:o,onChange:e=>d(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"mb-6 border-t border-gray-200 pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Pre-survey Questions"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"These questions will be asked before the survey and used for validation."}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-md",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),(0,r.jsx)("input",{type:"text",id:"question",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"E.g., What is your age group?"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"options",className:"block text-sm font-medium text-gray-700 mb-1",children:"Options (comma separated)"}),(0,r.jsx)("input",{type:"text",id:"options",value:b,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"E.g., 18-24, 25-34, 35-44, 45+"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{if(!m.trim()){j("Question text is required");return}let e=b.split(",").map(e=>e.trim()).filter(e=>e.length>0);if(e.length<2){j("At least two options are required");return}c([...u,{text:m,options:e}]),x(""),p(""),j("")},className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Add Question"})]}),u.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700",children:"Added Questions:"}),u.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border border-gray-200 rounded-md bg-white flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.text}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Options: ",e.options.join(", ")]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>y(t),className:"text-red-600 hover:text-red-800 font-medium",children:"Remove"})]},t))]}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No questions added yet"})]}),g&&(0,r.jsx)("div",{className:"mb-6 p-3 bg-red-100 text-red-700 rounded-md",children:g}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:h,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50",children:h?"Creating...":"Create Project"})})]})]})})]})}},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[282,66,664,888,774,179],function(){return e(e.s=8680)}),_N_E=e.O()}]);