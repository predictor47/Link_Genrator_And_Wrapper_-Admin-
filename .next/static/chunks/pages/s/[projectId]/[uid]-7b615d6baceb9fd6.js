(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{9762:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/s/[projectId]/[uid]",function(){return a(5351)}])},1359:function(e,t,a){"use strict";a.d(t,{d:function(){return o}});var r=a(6164),s=a(9556),n=a(7510);let l=null;async function o(){var e;if(l)return l;let t=(0,n.m)();if(!(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.url))throw Error("Amplify config is missing GraphQL endpoint.");s.V.configure(t);let a=(0,r.d)({authMode:"userPool"});if(console.log("Amplify Data client:",a),console.log("client.models:",a.models),!a.models||0===Object.keys(a.models).length)throw console.error("client.models is empty! This usually means the Amplify backend is not properly connected."),Error("Amplify Data models are not available. Please check your backend connection.");let o=["Project","Vendor","Question","SurveyLink","ProjectVendor"];for(let e of o)if(!a.models[e])throw console.error("".concat(e," model is missing from Amplify Data client!")),Error("Required model ".concat(e," is not available in the Amplify Data client."));console.log("All required models are available:",o);let i=e=>e.data,d=(e,t)=>{let a=e.message||"Unknown error",r=e.name||"Error";throw console.error("Amplify Error (".concat(t,"):"),{name:r,message:a}),e};return l={client:a,projects:{create:async e=>{try{let t=await a.models.Project.create(e);return{data:i(t)}}catch(e){return d(e,"projects.create"),{data:null}}},get:async e=>({data:i(await a.models.Project.get({id:e}))}),list:async e=>({data:(await a.models.Project.list(e)).data||[]}),update:async(e,t)=>({data:i(await a.models.Project.update({id:e,...t}))}),delete:async e=>({data:i(await a.models.Project.delete({id:e}))}),getWithRelations:async e=>{let t=await a.models.Project.get({id:e});if(t.data){let r=await a.models.SurveyLink.list({filter:{projectId:{eq:e}}}),s=(await a.models.ProjectVendor.list({filter:{projectId:{eq:e}}})).data.map(e=>e.vendorId).filter(e=>null!=e),n=[];s.length>0&&(n=(await Promise.all(s.map(e=>a.models.Vendor.get({id:e})))).filter(e=>null!==e.data).map(e=>e.data));let l=await a.models.Question.list({filter:{projectId:{eq:e}}});return{data:{...t.data,surveyLinks:r.data||[],vendors:n,questions:l.data||[]}}}return{data:null}}},surveyLinks:{create:async e=>({data:i(await a.models.SurveyLink.create(e))}),get:async e=>({data:i(await a.models.SurveyLink.get({id:e}))}),getByUid:async e=>{let t=await a.models.SurveyLink.list({filter:{uid:{eq:e}}});return{data:t.data&&t.data.length>0?t.data[0]:null}},update:async(e,t)=>({data:i(await a.models.SurveyLink.update({id:e,...t}))}),list:async e=>({data:(await a.models.SurveyLink.list(e)).data||[]}),listByProject:async e=>({data:(await a.models.SurveyLink.list({filter:{projectId:{eq:e}}})).data||[]}),delete:async e=>({data:i(await a.models.SurveyLink.delete({id:e}))})},vendors:{create:async e=>({data:i(await a.models.Vendor.create(e))}),get:async e=>({data:i(await a.models.Vendor.get({id:e}))}),list:async e=>({data:(await a.models.Vendor.list(e)).data||[]}),listByProject:async e=>{let t=(await a.models.ProjectVendor.list({filter:{projectId:{eq:e}}})).data.map(e=>e.vendorId).filter(e=>null!=e);return t.length>0?{data:(await Promise.all(t.map(e=>a.models.Vendor.get({id:e})))).map(e=>e.data).filter(e=>null!==e)}:{data:[]}},update:async(e,t)=>({data:i(await a.models.Vendor.update({id:e,...t}))}),delete:async e=>({data:i(await a.models.Vendor.delete({id:e}))})},questions:{create:async e=>({data:i(await a.models.Question.create(e))}),get:async e=>({data:i(await a.models.Question.get({id:e}))}),list:async e=>({data:(await a.models.Question.list(e)).data||[]}),listByProject:async e=>({data:(await a.models.Question.list({filter:{projectId:{eq:e}}})).data||[]}),update:async(e,t)=>({data:i(await a.models.Question.update({id:e,...t}))}),delete:async e=>({data:i(await a.models.Question.delete({id:e}))})},transaction:{execute:async e=>{let t=[];for(let a of e){let e=await a;t.push(e)}return t}}}}},5351:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return h},default:function(){return p}});var r=a(5893),s=a(7294),n=a(1163),l=a(7066),o=e=>{let{onDataCollected:t,startTracking:a=!0}=e,r=(0,s.useRef)({mouseMovements:0,keyboardEvents:0,clickPattern:[],idleTime:0,mouseCurve:[],copyPasteEvents:0}),n=(0,s.useRef)(Date.now()),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!a)return;let e=e=>{r.current.mouseMovements++,n.current=Date.now(),r.current.mouseMovements%10==0&&(r.current.mouseCurve.push({x:e.clientX,y:e.clientY,timestamp:Date.now()}),r.current.mouseCurve.length>100&&r.current.mouseCurve.shift())},s=e=>{r.current.clickPattern.push(Date.now()),n.current=Date.now(),r.current.clickPattern.length>50&&r.current.clickPattern.shift()},o=e=>{r.current.keyboardEvents++,n.current=Date.now()},i=e=>{r.current.copyPasteEvents++,n.current=Date.now()},d=e=>{r.current.copyPasteEvents++,n.current=Date.now()};return l.current=setInterval(()=>{let e=Date.now()-n.current;r.current.idleTime=Math.floor(e/1e3),e%5e3<1e3&&t({...r.current})},1e3),document.addEventListener("mousemove",e),document.addEventListener("click",s),document.addEventListener("keydown",o),document.addEventListener("copy",i),document.addEventListener("paste",d),t({...r.current}),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("click",s),document.removeEventListener("keydown",o),document.removeEventListener("copy",i),document.removeEventListener("paste",d),l.current&&clearInterval(l.current),t({...r.current})}},[t,a]),null},i=a(1359),d=e=>{let{projectId:t,onAnswer:a}=e,[n,l]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{(async()=>{try{l(!0),d(null);let e=await (0,i.d)(),a=(await e.questions.listByProject(t)).data||[];if(0===a.length){d("No questions available"),l(!1);return}let r=Math.floor(Math.random()*a.length),s=a[r],n=[];if(s.options)try{"string"==typeof s.options?n=JSON.parse(s.options):Array.isArray(s.options)&&(n=s.options)}catch(e){console.error("Error parsing question options:",e)}u({id:s.id,text:s.text,type:s.type||"TEXT",options:n,correctAnswer:"object"==typeof s.options&&null!==s.options&&s.options.correctAnswer||""})}catch(e){console.error("Error fetching trap question:",e),d("Failed to load question")}finally{l(!1)}})()},[t]),o)?(0,r.jsx)("div",{className:"bg-red-50 p-4 rounded-md",children:(0,r.jsx)("p",{className:"text-red-600",children:o})}):n?(0,r.jsx)("div",{className:"flex justify-center p-4",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c?p?(0,r.jsx)("div",{className:"bg-green-50 p-4 rounded-md",children:(0,r.jsx)("p",{className:"text-green-600",children:"Thank you for your response."})}):(0,r.jsxs)("div",{className:"border p-4 rounded-md shadow-sm mb-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:c.text}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),f(!0),!c)return;let t="MULTIPLE_CHOICE"===c.type?m===c.correctAnswer:m.toLowerCase().trim()===c.correctAnswer.toLowerCase().trim();a(c.text,m,t)},children:["MULTIPLE_CHOICE"===c.type&&c.options&&(0,r.jsx)("div",{className:"space-y-2",children:c.options.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",id:"option-".concat(t),name:"trapAnswer",value:e,onChange:e=>h(e.target.value),required:!0,className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"option-".concat(t),className:"text-gray-700",children:e})]},t))}),"TEXT"===c.type&&(0,r.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),required:!0,placeholder:"Enter your answer here",className:"w-full p-2 border border-gray-300 rounded-md"}),"COUNTRY"===c.type&&(0,r.jsxs)("select",{value:m,onChange:e=>h(e.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,r.jsx)("option",{value:"",children:"Select your country"}),(0,r.jsx)("option",{value:"US",children:"United States"}),(0,r.jsx)("option",{value:"CA",children:"Canada"}),(0,r.jsx)("option",{value:"GB",children:"United Kingdom"}),(0,r.jsx)("option",{value:"AU",children:"Australia"})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Submit Answer"})})]})]}):null},c=e=>{var t;let{onVerify:a,difficulty:n="medium"}=e,[l,o]=(0,s.useState)(!0),[i,d]=(0,s.useState)({question:"",answer:"",type:"math"}),[c,u]=(0,s.useState)(""),[m,h]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(0),[x,g]=(0,s.useState)([]),[w,b]=(0,s.useState)([]),[j,N]=(0,s.useState)(0),S=(0,s.useRef)(null),E=(0,s.useRef)(null);(0,s.useEffect)(()=>{k()},[n]);let k=()=>{o(!0),h(null);try{let e;switch(n){case"easy":e=D();break;case"hard":e=T();break;default:e=L()}d(e),"drag"===e.type&&e.items&&(g(e.items),b([]))}catch(e){console.error("Error generating CAPTCHA challenge:",e),h("Failed to generate CAPTCHA challenge")}finally{o(!1)}},D=()=>{let e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());return{question:"What is ".concat(e," + ").concat(t,"?"),answer:String(e+t),type:"math"}},L=()=>{if("math"==(Math.random()>.5?"math":"drag")){let e,t,a;let r=["+","-","*"],s=r[Math.floor(Math.random()*r.length)];switch(s){case"+":a=(e=Math.floor(20*Math.random()))+(t=Math.floor(20*Math.random()));break;case"-":t=Math.floor(Math.random()*(e=Math.floor(20*Math.random())+10)),a=e-t;break;case"*":a=(e=Math.floor(10*Math.random()))*(t=Math.floor(10*Math.random()));break;default:e=0,t=0,a=0}return{question:"What is ".concat(e," ").concat(s," ").concat(t,"?"),answer:String(a),type:"math"}}{let e=[{question:"Drag to order from smallest to largest",items:["5","2","9","1","7"],answer:"12579"},{question:"Drag to order alphabetically",items:["dog","cat","bird","fish","ant"],answer:"antbirddogcatfish"}],t=e[Math.floor(Math.random()*e.length)];return{question:t.question,items:[...t.items].sort(()=>Math.random()-.5),answer:t.answer,type:"drag"}}},T=()=>({question:"Hold the button and click the targets that appear",answer:"hold-complete",type:"hold"}),I=e=>{e.preventDefault(),v(e=>e+1),("drag"===i.type?w.join(""):c).trim()===i.answer?(f(!0),a(!0)):(h("Incorrect answer, please try again"),y>=2&&(k(),v(0)))},q=(e,t)=>{e.dataTransfer.setData("text/plain",t)},A=()=>{E.current=Date.now(),S.current=setInterval(()=>{if(E.current){let e=Math.min((Date.now()-E.current)/3e3,1);N(e),e>=1&&(S.current&&clearInterval(S.current),f(!0),a(!0))}},50)},M=()=>{S.current&&(clearInterval(S.current),S.current=null),j<1&&(N(0),E.current=null)};return((0,s.useEffect)(()=>()=>{S.current&&clearInterval(S.current)},[]),l)?(0,r.jsx)("div",{className:"flex justify-center p-4",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p?(0,r.jsx)("div",{className:"bg-green-50 p-4 rounded-md",children:(0,r.jsx)("p",{className:"text-green-600",children:"Verification successful"})}):(0,r.jsxs)("div",{className:"border p-4 rounded-md shadow-sm mb-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"Security Verification"}),m&&(0,r.jsx)("div",{className:"bg-red-50 p-2 rounded-md mb-3",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:m})}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("p",{className:"text-gray-700",children:i.question})}),"math"===i.type&&(0,r.jsxs)("form",{onSubmit:I,children:[(0,r.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),required:!0,placeholder:"Your answer",className:"w-full p-2 border border-gray-300 rounded-md"}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Verify"})})]}),"drag"===i.type&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"min-h-[100px] bg-gray-100 p-4 rounded-md border-2 border-dashed border-gray-300 mb-4",onDrop:e=>{e.preventDefault();let t=e.dataTransfer.getData("text/plain");b(e=>[...e,t]),g(e=>e.filter(e=>e!==t))},onDragOver:e=>{e.preventDefault()},children:[(0,r.jsx)("p",{className:"text-gray-500 mb-2",children:"Drop items here in the correct order"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:w.map((e,t)=>(0,r.jsx)("div",{className:"bg-blue-100 p-2 rounded-md",children:e},"result-".concat(t)))})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:x.map((e,t)=>(0,r.jsx)("div",{draggable:!0,onDragStart:t=>q(t,e),className:"bg-gray-200 p-2 rounded-md cursor-move",children:e},"item-".concat(t)))}),w.length===(null===(t=i.items)||void 0===t?void 0:t.length)&&(0,r.jsx)("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Verify"})]}),"hold"===i.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(100*j,"%")}})}),(0,r.jsx)("button",{onMouseDown:A,onMouseUp:M,onMouseLeave:M,onTouchStart:A,onTouchEnd:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 w-full",children:"Hold to verify"})]})]})},u=e=>{let{projectId:t,uid:a,url:n,onStatusChange:o}=e,[i,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),m=(0,s.useRef)(null),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!i||!m.current)return;let e=0;return h.current=setInterval(()=>{e++;try{var t,a;let e=null===(a=m.current)||void 0===a?void 0:null===(t=a.contentWindow)||void 0===t?void 0:t.location.href;if(e&&e.includes("protegeresearchsurvey.com")){clearInterval(h.current);let t="COMPLETED";e.includes("/quota")?t="QUOTA_FULL":(e.includes("/not-eligible")||e.includes("/disqualified"))&&(t="DISQUALIFIED"),u(t),p(t,{completionUrl:e})}}catch(e){}e>=300&&clearInterval(h.current)},1e3),()=>{h.current&&clearInterval(h.current)}},[i,t,a]);let p=async(e,r)=>{try{let s={completionTimestamp:new Date().toISOString(),browser:navigator.userAgent,screenSize:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth},language:navigator.language,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,completionUrl:null==r?void 0:r.completionUrl,referrer:document.referrer};await l.Z.post("/api/links/update-status",{projectId:t,uid:a,status:e,metadata:s}),o(e,{metadata:s,timestamp:Date.now()})}catch(e){console.error("Failed to update survey status:",e)}};return(0,r.jsxs)("div",{className:"iframe-container w-full h-full relative",children:[c&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10 bg-white bg-opacity-90",children:(0,r.jsxs)("div",{className:"text-center p-8",children:["COMPLETED"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-green-600 mb-4",children:"Survey Completed"}),(0,r.jsx)("p",{children:"Thank you for completing the survey! You'll be redirected shortly."})]}),"QUOTA_FULL"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-blue-600 mb-4",children:"Survey Quota Full"}),(0,r.jsx)("p",{children:"The quota for this survey has been filled. Thank you for your interest!"})]}),"DISQUALIFIED"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-amber-600 mb-4",children:"Not Eligible"}),(0,r.jsx)("p",{children:"You don't match the criteria for this survey. Thank you for your interest!"})]})]})}),(0,r.jsx)("iframe",{ref:m,src:n,onLoad:()=>{d(!0);try{var e,t;let a=null===(t=m.current)||void 0===t?void 0:null===(e=t.contentWindow)||void 0===e?void 0:e.location.href;if(a&&a.includes("protegeresearchsurvey.com")){let e="COMPLETED";a.includes("/quota")?e="QUOTA_FULL":(a.includes("/not-eligible")||a.includes("/disqualified"))&&(e="DISQUALIFIED"),u(e),p(e,{completionUrl:a})}else p("STARTED")}catch(e){p("STARTED")}},className:"w-full h-full border-0 min-h-[500px]",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups",title:"Survey iframe"})]})},m=e=>{let{projectId:t,uid:a,surveyUrl:i,vendorId:m}=e,h=(0,n.useRouter)(),[p,f]=(0,s.useState)("captcha"),[y,v]=(0,s.useState)(null),[x,g]=(0,s.useState)(null),[w,b]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[S,E]=(0,s.useState)({token:Math.random().toString(36).substring(2,15),projectId:t,uid:a,vendorId:m,startTime:Date.now(),answers:[],metadata:{}}),k=(0,s.useRef)({rapidAnswers:!1,inconsistentAnswers:!1,botLikeBehavior:!1,flagged:!1,flags:[]});(0,s.useEffect)(()=>{(async()=>{try{let e=await l.Z.post("/api/links/validate",{projectId:t,uid:a});if(!e.data.success){if(e.data.redirect){h.push(e.data.redirect);return}v(e.data.error||"Survey access denied"),f("error");return}console.log("Survey validation successful:",e.data)}catch(e){console.error("Survey validation failed:",e),v("Failed to validate survey access"),f("error")}})()},[t,a,h]),(0,s.useEffect)(()=>{if(S)try{sessionStorage.setItem("surveySession",JSON.stringify(S))}catch(e){console.error("Failed to save session data to sessionStorage:",e)}},[S]);let D=async(e,r,s)=>{if(E(t=>({...t,answers:[...t.answers,{question:e,answer:r,isCorrect:s}]})),!s){k.current.inconsistentAnswers=!0,k.current.flags.push("Incorrect trap question answer");try{await l.Z.post("/api/links/flag",{projectId:t,uid:a,reason:"Failed trap question",metadata:{question:e,answer:r,timestamp:Date.now()}})}catch(e){console.error("Failed to flag incorrect trap question:",e)}}N(!0),f("survey")};return(0,r.jsxs)("div",{className:"survey-flow-container relative",children:[(0,r.jsx)(o,{onDataCollected:e=>{g(e),E(t=>({...t,metadata:{...t.metadata,behavior:e}})),e.mouseMovements/(e.idleTime||1)>100&&(k.current.botLikeBehavior=!0,k.current.flags.push("Unusually fast mouse movements")),e.copyPasteEvents>5&&(k.current.botLikeBehavior=!0,k.current.flags.push("Excessive copy/paste detected")),k.current.flags.length>0&&E(e=>({...e,metadata:{...e.metadata,suspiciousFlags:k.current.flags}}))},startTracking:!0}),"captcha"===p&&(0,r.jsxs)("div",{className:"p-6 max-w-md mx-auto bg-white rounded-xl shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-gray-900 mb-4",children:"Please Verify You Are Human"}),(0,r.jsx)(c,{onVerify:e=>{b(e),e&&(E(e=>({...e,metadata:{...e.metadata,captchaVerified:!0,captchaVerifiedAt:Date.now()}})),f("trap-question"))},difficulty:"medium"})]}),"trap-question"===p&&w&&(0,r.jsxs)("div",{className:"p-6 max-w-md mx-auto bg-white rounded-xl shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-gray-900 mb-4",children:"Quick Question"}),(0,r.jsx)(d,{projectId:t,onAnswer:D})]}),"survey"===p&&w&&(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(u,{projectId:t,uid:a,url:i,onStatusChange:(e,r)=>{switch(e){case"COMPLETED":f("completed"),setTimeout(()=>{h.push("/thank-you-completed?projectId=".concat(t,"&uid=").concat(a))},2e3);break;case"QUOTA_FULL":f("quota-full"),setTimeout(()=>{h.push("/sorry-quota-full?projectId=".concat(t,"&uid=").concat(a))},2e3);break;case"DISQUALIFIED":f("disqualified"),setTimeout(()=>{h.push("/sorry-disqualified?projectId=".concat(t,"&uid=").concat(a))},2e3)}}})}),"error"===p&&(0,r.jsxs)("div",{className:"p-6 max-w-md mx-auto bg-white rounded-xl shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-red-600 mb-2",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-700",children:y}),(0,r.jsx)("button",{onClick:()=>f("captcha"),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Try Again"})]}),("completed"===p||"disqualified"===p||"quota-full"===p)&&(0,r.jsxs)("div",{className:"p-6 max-w-md mx-auto bg-white rounded-xl shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-gray-900 mb-4",children:"completed"===p?"Survey Completed":"quota-full"===p?"Survey Quota Full":"Not Eligible"}),(0,r.jsx)("p",{className:"text-gray-700",children:"completed"===p?"Thank you for completing the survey. You will be redirected shortly.":"quota-full"===p?"The quota for this survey has been filled. Thank you for your interest.":"You do not match the criteria for this survey. Thank you for your interest."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Redirecting you in a few seconds..."})]})]})},h=!0;function p(e){let{projectId:t,uid:a,project:l,surveyLink:o,isValid:i,errorMessage:d}=e;(0,n.useRouter)();let[c,u]=(0,s.useState)(d||null);return i&&l?(null==o?void 0:o.status)==="COMPLETED"?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-green-600 mb-4",children:"Survey Already Completed"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You have already completed this survey. Thank you for your participation!"}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:()=>window.location.href="https://protegeresearch.com",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Return to ProtegeResearch"})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,r.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:l.name})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-2 md:p-6",children:(0,r.jsx)(m,{projectId:t,uid:a,surveyUrl:l.surveyUrl,vendorId:(null==o?void 0:o.vendorId)||void 0})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Invalid Survey Link"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:d||"This survey link is invalid or has expired."}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:()=>window.location.href="https://protegeresearch.com",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Return to ProtegeResearch"})})]})})}}},function(e){e.O(0,[143,164,888,774,179],function(){return e(e.s=9762)}),_N_E=e.O()}]);