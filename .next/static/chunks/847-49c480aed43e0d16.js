"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[847],{7655:function(e,t,n){n.d(t,{h:function(){return E}});var o=n(5),i=n(2562),r=n(105);n(5169);var a=n(6378),s=n(3638),c=n(6605),l=n(8357),d=n(7978),u=n(2655),p=n(1667);async function E({username:e,password:t,clientMetadata:n,config:E,tokenOrchestrator:m,authFlow:g,preferredChallenge:h}){let{userPoolId:x,userPoolClientId:S,userPoolEndpoint:f}=E,I=x?.split("_")[1]||"",y=await (0,r.d)(I),R={USERNAME:e,SRP_A:y.A.toString(16)};"USER_AUTH"===g&&h&&(R.PREFERRED_CHALLENGE=h);let C=(0,i.u)({username:e,userPoolId:x,userPoolClientId:S}),A=(0,a.N)({endpointResolver:(0,s.e)({endpointOverride:f})}),v=await A({region:(0,c.y)(x),userAgentValue:(0,l.W)(o.g4.SignIn)},{AuthFlow:g,AuthParameters:R,ClientMetadata:n,ClientId:S,UserContextData:C}),{ChallengeParameters:P,Session:N}=v,T=P?.USERNAME??e;return((0,p.r)(T),"PASSWORD_VERIFIER"===v.ChallengeName)?(0,u.H)(d.i,[t,P,n,N,y,E,m],T,m):v}},1326:function(e,t,n){var o;let i;function r(){return{active:!1}}n.d(t,{E:function(){return a}});let a=(i=(o=(e,t)=>{switch(t.type){case"SET_USERNAME":return{...e,username:t.value};case"SET_SESSION":return{...e,session:t.value};case"START":return{...e,active:!0};case"RESET":return r();default:return e}})(r(),{type:"RESET"}),{getState:()=>i,dispatch:e=>{i=o(i,e)}})},5474:function(e,t,n){let o;n.d(t,{fZ:function(){return l},k4:function(){return m},signInStore:function(){return E}});var i,r=n(4685);let a="CognitoSignInState",s={username:`${a}.username`,challengeName:`${a}.challengeName`,signInSession:`${a}.signInSession`,expiry:`${a}.expiry`},c=e=>Number(e)<=Date.now(),l=()=>{E.dispatch({type:"RESET_STATE"})},d=()=>{for(let e of Object.values(s))r.$2.removeItem(e)},u=()=>({username:void 0,challengeName:void 0,signInSession:void 0}),p=()=>{let e=r.$2.getItem(s.expiry);return!e||c(e)?(d(),u()):{username:r.$2.getItem(s.username)??void 0,challengeName:r.$2.getItem(s.challengeName)??void 0,signInSession:r.$2.getItem(s.signInSession)??void 0}},E=(o=(i=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return g({signInSession:t.value}),{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return g(t.value),{...t.value};case"SET_CHALLENGE_NAME":return g({challengeName:t.value}),{...e,challengeName:t.value};case"SET_USERNAME":return g({username:t.value}),{...e,username:t.value};case"SET_INITIAL_STATE":return p();case"RESET_STATE":return d(),u();default:return e}})(u(),{type:"SET_INITIAL_STATE"}),{getState:()=>o,dispatch:e=>{o=i(o,e)}});function m(e){E.dispatch({type:"SET_SIGN_IN_STATE",value:e})}let g=({challengeName:e,signInSession:t,username:n})=>{n&&r.$2.setItem(s.username,n),e&&r.$2.setItem(s.challengeName,e),t&&(r.$2.setItem(s.signInSession,t),r.$2.setItem(s.expiry,String(Date.now()+18e4)))}},9012:function(e,t,n){n.d(t,{By:function(){return c},kq:function(){return a}});var o,i,r,a,s=n(5227);let c={[s.X.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[s.X.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[s.X.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[s.X.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[s.X.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[s.X.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[s.X.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[s.X.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[s.X.EmptySignInPassword]:{message:"password is required to signIn"},[s.X.EmptySignInUsername]:{message:"username is required to signIn"},[s.X.EmptySignUpPassword]:{message:"password is required to signUp"},[s.X.EmptySignUpUsername]:{message:"username is required to signUp"},[s.X.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[s.X.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[s.X.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[s.X.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[s.X.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};(o=r||(r={})).DEFAULT_MSG="Authentication Error",o.EMPTY_EMAIL="Email cannot be empty",o.EMPTY_PHONE="Phone number cannot be empty",o.EMPTY_USERNAME="Username cannot be empty",o.INVALID_USERNAME="The username should either be a string or one of the sign in types",o.EMPTY_PASSWORD="Password cannot be empty",o.EMPTY_CODE="Confirmation code cannot be empty",o.SIGN_UP_ERROR="Error creating account",o.NO_MFA="No valid MFA method provided",o.INVALID_MFA="Invalid MFA type",o.EMPTY_CHALLENGE="Challenge response cannot be empty",o.NO_USER_SESSION="Failed to get the session because the user is empty",o.NETWORK_ERROR="Network Error",o.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",o.AUTOSIGNIN_ERROR="Please use your credentials to sign in",o.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",(i=a||(a={})).SignInException="SignInException",i.OAuthSignInError="OAuthSignInException"},5227:function(e,t,n){var o,i;n.d(t,{X:function(){return o}}),(i=o||(o={})).EmptySignInUsername="EmptySignInUsername",i.EmptySignInPassword="EmptySignInPassword",i.CustomAuthSignInPassword="CustomAuthSignInPassword",i.EmptySignUpUsername="EmptySignUpUsername",i.EmptySignUpPassword="EmptySignUpPassword",i.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",i.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",i.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",i.EmptyChallengeResponse="EmptyChallengeResponse",i.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",i.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",i.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",i.EmptyResetPasswordUsername="EmptyResetPasswordUsername",i.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",i.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",i.IncorrectMFAMethod="IncorrectMFAMethod",i.EmptyUpdatePassword="EmptyUpdatePassword"},1131:function(e,t,n){n.d(t,{n:function(){return r}});var o=n(9012),i=n(4686);function r(e,t){let{message:n,recoverySuggestion:r}=o.By[t];if(!e)throw new i.l({name:t,message:n,recoverySuggestion:r})}},8225:function(e,t,n){n.d(t,{u:function(){return c}});var o=n(7099),i=n(5409),r=n(4719),a=n(5059),s=n(8196);let c=e=>(0,o.z)(i.x,(0,r.u)("RespondToAuthChallenge"),(0,a.o)(),{...s.n,...e})},9663:function(e,t,n){n.d(t,{Dv:function(){return r},I:function(){return i}});var o=n(1326);function i(e){}function r(e=!0){o.E.dispatch({type:"RESET"})}n(4686),n(9509)},5566:function(e,t,n){n.d(t,{f:function(){return S}});var o=n(5165),i=n(3461),r=n(5),a=n(5227),s=n(1131),c=n(8357),l=n(2562),d=n(7099),u=n(5409),p=n(4719),E=n(5059),m=n(8196);let g=e=>(0,d.z)(u.x,(0,p.u)("ConfirmForgotPassword"),(0,E.o)(),{...m.n,...e});var h=n(3638),x=n(6605);async function S(e){let t=o.d.getConfig().Auth?.Cognito;(0,i.FG)(t);let{userPoolClientId:n,userPoolId:d,userPoolEndpoint:u}=t,{username:p,newPassword:E}=e;(0,s.n)(!!p,a.X.EmptyConfirmResetPasswordUsername),(0,s.n)(!!E,a.X.EmptyConfirmResetPasswordNewPassword);let m=e.confirmationCode;(0,s.n)(!!m,a.X.EmptyConfirmResetPasswordConfirmationCode);let S=e.options?.clientMetadata,f=(0,l.u)({username:p,userPoolId:d,userPoolClientId:n}),I=g({endpointResolver:(0,h.e)({endpointOverride:u})});await I({region:(0,x.y)(t.userPoolId),userAgentValue:(0,c.W)(r.g4.ConfirmResetPassword)},{Username:p,ConfirmationCode:m,Password:E,ClientMetadata:S,ClientId:t.userPoolClientId,UserContextData:f})}},3833:function(e,t,n){n.d(t,{t:function(){return h}});var o=n(5165),i=n(3461),r=n(5474),a=n(4686),s=n(4563),c=n(9559),l=n(1131),d=n(5227),u=n(9012),p=n(4388),E=n(8714),m=n(9749),g=n(6772);async function h(e){let{challengeResponse:t,options:n}=e,{username:h,challengeName:x,signInSession:S,signInDetails:f}=r.signInStore.getState(),I=o.d.getConfig().Auth?.Cognito;(0,i.FG)(I);let y=n?.clientMetadata;if((0,l.n)(!!t,d.X.EmptyChallengeResponse),!h||!x||!S)throw new a.l({name:u.kq.SignInException,message:`
			An error occurred during the sign in process.

			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow and session has expired.
			`,recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the session has not expired."});try{let{Session:e,ChallengeName:o,AuthenticationResult:i,ChallengeParameters:a}=await (0,s.Fu)(h,x,S,t,I,E.C,y,n);if((0,r.k4)({signInSession:e,username:h,challengeName:o,signInDetails:f}),i)return await (0,p.x)({username:h,...i,NewDeviceMetadata:await (0,g.F)({userPoolId:I.userPoolId,userPoolEndpoint:I.userPoolEndpoint,newDeviceMetadata:i.NewDeviceMetadata,accessToken:i.AccessToken}),signInDetails:f}),(0,r.fZ)(),await (0,m.O)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,s.cP)({challengeName:o,challengeParameters:a})}catch(t){(0,c.R)(t);let e=(0,s.yM)(t.name);if(e)return e;throw t}}},7271:function(e,t,n){n.d(t,{_:function(){return y}});var o=n(5165),i=n(3461),r=n(5),a=n(305),s=n(1131),c=n(5227),l=n(6605),d=n(8357),u=n(2562),p=n(7099),E=n(8196),m=n(5409),g=n(4719),h=n(5059);let x=e=>(0,p.z)(m.x,(0,g.u)("ConfirmSignUp"),(0,h.o)(),{...E.n,...e});var S=n(3638),f=n(1326),I=n(9663);async function y(e){let{username:t,confirmationCode:n,options:p}=e,E=o.d.getConfig().Auth?.Cognito;(0,i.FG)(E);let{userPoolId:m,userPoolClientId:g,userPoolEndpoint:h}=E,y=p?.clientMetadata;(0,s.n)(!!t,c.X.EmptyConfirmSignUpUsername),(0,s.n)(!!n,c.X.EmptyConfirmSignUpCode);let R=(0,u.u)({username:t,userPoolId:m,userPoolClientId:g}),C=x({endpointResolver:(0,S.e)({endpointOverride:h})}),{Session:A}=await C({region:(0,l.y)(E.userPoolId),userAgentValue:(0,d.W)(r.g4.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:y,ForceAliasCreation:p?.forceAliasCreation,ClientId:E.userPoolClientId,UserContextData:R});return new Promise((e,n)=>{try{let n={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},o=f.E.getState();if(!o.active||o.username!==t){e(n),(0,I.Dv)();return}f.E.dispatch({type:"SET_SESSION",value:A});let i=a.qC.listen("auth-internal",({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),i())});a.qC.dispatch("auth-internal",{event:"confirmSignUp",data:n})}catch(e){n(e)}})}},1231:function(e,t,n){n.d(t,{v:function(){return f}});var o=n(5165),i=n(3461),r=n(695),a=n(5),s=n(6605),c=n(6566),l=n(8460),d=n(8357),u=n(7099),p=n(5409),E=n(4719),m=n(5059),g=n(8196);let h=e=>(0,u.z)(p.x,(0,E.u)("GetUser"),(0,m.o)(),{...g.n,...e});var x=n(3638);let S=async e=>{let t=e.getConfig().Auth?.Cognito;(0,i.FG)(t);let{userPoolEndpoint:n,userPoolId:o}=t,{tokens:u}=await (0,r.y)(e,{forceRefresh:!1});(0,c.CA)(u);let p=h({endpointResolver:(0,x.e)({endpointOverride:n})}),{UserAttributes:E}=await p({region:(0,s.y)(o),userAgentValue:(0,d.W)(a.g4.FetchUserAttributes)},{AccessToken:u.accessToken.toString()});return(0,l.R)(E)},f=()=>S(o.d)},6398:function(e,t,n){n.d(t,{t:function(){return s}});var o=n(5165),i=n(3461),r=n(6566);let a=async e=>{let t=e.getConfig().Auth?.Cognito;(0,i.FG)(t);let n=await e.Auth.getTokens({forceRefresh:!1});(0,r.CA)(n);let{"cognito:username":o,sub:a}=n.idToken?.payload??{},s={username:o,userId:a},c=n?.signInDetails;return c&&(s.signInDetails=c),s},s=async()=>a(o.d)},379:function(e,t,n){n.d(t,{T:function(){return S}});var o=n(5165),i=n(3461),r=n(5),a=n(1131),s=n(5227),c=n(6605),l=n(8357),d=n(2562),u=n(7099),p=n(5409),E=n(4719),m=n(5059),g=n(8196);let h=e=>(0,u.z)(p.x,(0,E.u)("ResendConfirmationCode"),(0,m.o)(),{...g.n,...e});var x=n(3638);async function S(e){let{username:t}=e;(0,a.n)(!!t,s.X.EmptySignUpUsername);let n=o.d.getConfig().Auth?.Cognito;(0,i.FG)(n);let{userPoolClientId:u,userPoolId:p,userPoolEndpoint:E}=n,m=e.options?.clientMetadata,g=(0,d.u)({username:t,userPoolId:p,userPoolClientId:u}),S=h({endpointResolver:(0,x.e)({endpointOverride:E})}),{CodeDeliveryDetails:f}=await S({region:(0,c.y)(n.userPoolId),userAgentValue:(0,l.W)(r.g4.ResendSignUpCode)},{Username:t,ClientMetadata:m,ClientId:n.userPoolClientId,UserContextData:g}),{DeliveryMedium:I,AttributeName:y,Destination:R}={...f};return{destination:R,deliveryMedium:I,attributeName:y||void 0}}},267:function(e,t,n){n.d(t,{c:function(){return S}});var o=n(5165),i=n(3461),r=n(5),a=n(5227),s=n(1131),c=n(6605),l=n(8357),d=n(2562),u=n(7099),p=n(5409),E=n(4719),m=n(5059),g=n(8196);let h=e=>(0,u.z)(p.x,(0,E.u)("ForgotPassword"),(0,m.o)(),{...g.n,...e});var x=n(3638);async function S(e){let{username:t}=e;(0,s.n)(!!t,a.X.EmptyResetPasswordUsername);let n=o.d.getConfig().Auth?.Cognito;(0,i.FG)(n);let{userPoolClientId:u,userPoolId:p,userPoolEndpoint:E}=n,m=e.options?.clientMetadata,g=(0,d.u)({username:t,userPoolId:p,userPoolClientId:u}),S=h({endpointResolver:(0,x.e)({endpointOverride:E})}),f=(await S({region:(0,c.y)(p),userAgentValue:(0,l.W)(r.g4.ResetPassword)},{Username:t,ClientMetadata:m,ClientId:u,UserContextData:g})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:f?.DeliveryMedium,destination:f?.Destination,attributeName:f?.AttributeName}}}}},4638:function(e,t,n){n.d(t,{z:function(){return y}});var o=n(4563),i=n(5165),r=n(3461),a=n(5227),s=n(1131),c=n(9559),l=n(5474),d=n(4388),u=n(8714),p=n(9749),E=n(2655),m=n(6772);async function g(e){let t=i.d.getConfig().Auth?.Cognito;(0,r.FG)(t);let{username:n,password:g,options:h}=e,x={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},S=h?.clientMetadata;(0,s.n)(!!n,a.X.EmptySignInUsername),(0,s.n)(!g,a.X.CustomAuthSignInPassword);try{let{ChallengeName:e,ChallengeParameters:i,AuthenticationResult:r,Session:a}=await (0,E.H)(o.pB,[n,S,t,u.C],n,u.C),s=(0,o.QS)(n);if((0,l.k4)({signInSession:a,username:s,challengeName:e,signInDetails:x}),r)return await (0,d.x)({username:s,...r,NewDeviceMetadata:await (0,m.F)({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:x}),(0,l.fZ)(),await (0,p.O)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,o.cP)({challengeName:e,challengeParameters:i})}catch(t){(0,l.fZ)(),(0,c.R)(t);let e=(0,o.yM)(t.name);if(e)return e;throw t}}async function h(e){let{username:t,password:n,options:E}=e,g={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},h=i.d.getConfig().Auth?.Cognito;(0,r.FG)(h);let x=E?.clientMetadata;(0,s.n)(!!t,a.X.EmptySignInUsername),(0,s.n)(!!n,a.X.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:i,AuthenticationResult:r,Session:a}=await (0,o.Mf)(t,n,x,h,u.C),s=(0,o.QS)(t);if((0,l.k4)({signInSession:a,username:s,challengeName:e,signInDetails:g}),r)return await (0,d.x)({username:s,...r,NewDeviceMetadata:await (0,m.F)({userPoolId:h.userPoolId,userPoolEndpoint:h.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:g}),(0,l.fZ)(),await (0,p.O)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,o.cP)({challengeName:e,challengeParameters:i})}catch(t){(0,l.fZ)(),(0,c.R)(t);let e=(0,o.yM)(t.name);if(e)return e;throw t}}var x=n(9663);async function S(e){let{username:t,password:n}=e,E=i.d.getConfig().Auth?.Cognito,g={loginId:t,authFlowType:"USER_SRP_AUTH"};(0,r.FG)(E);let h=e.options?.clientMetadata;(0,s.n)(!!t,a.X.EmptySignInUsername),(0,s.n)(!!n,a.X.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:i,AuthenticationResult:r,Session:a}=await (0,o.U)(t,n,h,E,u.C),s=(0,o.QS)(t);if((0,l.k4)({signInSession:a,username:s,challengeName:e,signInDetails:g}),r)return await (0,d.x)({username:s,...r,NewDeviceMetadata:await (0,m.F)({userPoolId:E.userPoolId,userPoolEndpoint:E.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:g}),(0,l.fZ)(),await (0,p.O)(),(0,x.Dv)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,o.cP)({challengeName:e,challengeParameters:i})}catch(t){(0,l.fZ)(),(0,x.Dv)(),(0,c.R)(t);let e=(0,o.yM)(t.name);if(e)return e;throw t}}async function f(e){let{username:t,password:n,options:g}=e,h=i.d.getConfig().Auth?.Cognito,S={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};(0,r.FG)(h);let f=g?.clientMetadata;(0,s.n)(!!t,a.X.EmptySignInUsername),(0,s.n)(!!n,a.X.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:i,AuthenticationResult:r,Session:a}=await (0,E.H)(o.x6,[t,n,f,h,u.C],t,u.C),s=(0,o.QS)(t);if((0,l.k4)({signInSession:a,username:s,challengeName:e,signInDetails:S}),r)return await (0,d.x)({...r,username:s,NewDeviceMetadata:await (0,m.F)({userPoolId:h.userPoolId,userPoolEndpoint:h.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:S}),(0,l.fZ)(),await (0,p.O)(),(0,x.Dv)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,o.cP)({challengeName:e,challengeParameters:i})}catch(t){(0,l.fZ)(),(0,x.Dv)(),(0,c.R)(t);let e=(0,o.yM)(t.name);if(e)return e;throw t}}var I=n(8972);async function y(e){(0,x.Dv)(!1);let t=e.options?.authFlowType;switch(await (0,o.OP)(),t){case"USER_SRP_AUTH":default:return S(e);case"USER_PASSWORD_AUTH":return f(e);case"CUSTOM_WITHOUT_SRP":return g(e);case"CUSTOM_WITH_SRP":return h(e);case"USER_AUTH":return(0,I.G)(e)}}},8972:function(e,t,n){n.d(t,{G:function(){return v}});var o=n(5165),i=n(3461),r=n(5227),a=n(1131),s=n(9559),c=n(4563),l=n(1326),d=n(5474),u=n(4388),p=n(9749),E=n(8714),m=n(5),g=n(2562),h=n(6378),x=n(3638),S=n(6605),f=n(8357),I=n(7655),y=n(1667);async function R({username:e,clientMetadata:t,config:n,tokenOrchestrator:o,preferredChallenge:i,password:s,session:c}){let{userPoolId:l,userPoolClientId:d,userPoolEndpoint:u}=n,p=(0,g.u)({username:e,userPoolId:l,userPoolClientId:d}),E={USERNAME:e};if(i){if("PASSWORD_SRP"===i)return(0,a.n)(!!s,r.X.EmptySignInPassword),(0,I.h)({username:e,password:s,clientMetadata:t,config:n,tokenOrchestrator:o,authFlow:"USER_AUTH",preferredChallenge:i});"PASSWORD"===i&&((0,a.n)(!!s,r.X.EmptySignInPassword),E.PASSWORD=s),E.PREFERRED_CHALLENGE=i}let R={AuthFlow:"USER_AUTH",AuthParameters:E,ClientMetadata:t,ClientId:d,UserContextData:p};c&&(R.Session=c);let C=(0,h.N)({endpointResolver:(0,x.e)({endpointOverride:u})}),A=await C({region:(0,S.y)(l),userAgentValue:(0,f.W)(m.g4.SignIn)},R);return(0,y.r)(e),A}var C=n(6772),A=n(9663);async function v(e){let{username:t,password:n,options:m}=e,g=o.d.getConfig().Auth?.Cognito,h={loginId:t,authFlowType:"USER_AUTH"};(0,i.FG)(g);let x=m?.clientMetadata,S=m?.preferredChallenge;(0,a.n)(!!t,r.X.EmptySignInUsername);try{let e={username:t,config:g,tokenOrchestrator:E.C,clientMetadata:x,preferredChallenge:S,password:n},o=l.E.getState();o.active&&o.username===t&&(e.session=o.session);let i=await R(e),r=(0,c.QS)(t);if((0,d.k4)({signInSession:i.Session,username:r,challengeName:i.ChallengeName,signInDetails:h}),i.AuthenticationResult)return await (0,u.x)({username:r,...i.AuthenticationResult,NewDeviceMetadata:await (0,C.F)({userPoolId:g.userPoolId,userPoolEndpoint:g.userPoolEndpoint,newDeviceMetadata:i.AuthenticationResult.NewDeviceMetadata,accessToken:i.AuthenticationResult.AccessToken}),signInDetails:h}),(0,d.fZ)(),await (0,p.O)(),(0,A.Dv)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,c.cP)({challengeName:i.ChallengeName,challengeParameters:i.ChallengeParameters,availableChallenges:"AvailableChallenges"in i?i.AvailableChallenges:void 0})}catch(t){(0,d.fZ)(),(0,A.Dv)(),(0,s.R)(t);let e=(0,c.yM)(t.name);if(e)return e;throw t}}},8689:function(e,t,n){n.d(t,{w:function(){return D}});var o=n(6344),i=n(5165),r=n(4685);function a(){return i.d.Auth.clearCredentials()}var s=n(305),c=n(3461),l=n(5),d=n(8357),u=n(4686),p=n(4574),E=n(8714),m=n(6605),g=n(6566);n(5169);let h=async e=>{await e.clearOAuthData(),E.C.clearTokens(),await a(),s.Xb.dispatch("auth",{event:"signedOut"},"Auth",s.SQ)},x=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var S=n(9509);let f=e=>e.startsWith(String((window.location.origin+window.location.pathname)??"/")),I=e=>e.includes(String(window.location.hostname)),y=e=>e.startsWith("http://"),R=e=>e.startsWith("https://"),C=async(e,t=!1,n)=>{(0,c.V0)(e);let{loginWith:o,userPoolClientId:i}=e,{domain:r,redirectSignOut:a}=o.oauth,s=function(e,t){if(t){let n=e?.find(e=>e===t);if(!n)throw S.x9;return n}{let t=e?.find(f)??e?.find(I),n=e?.find(R)??e?.find(y);if(t)return t;if(n)throw S.VL;throw S.vC}}(a,n);return x(`https://${r}/logout?${Object.entries({client_id:i,logout_uri:encodeURIComponent(s)}).map(([e,t])=>`${e}=${t}`).join("&")}`)},A=async(e,t,n,o)=>{let{isOAuthSignIn:i}=await t.loadOAuthSignIn(),r=await n.getOAuthMetadata();if(await h(t),i||r?.oauthSignIn)return C(e,!1,o)};var v=n(7099),P=n(5409),N=n(4719),T=n(5059),w=n(8196);let U=e=>(0,v.z)(P.x,(0,N.u)("RevokeToken"),(0,T.o)(),{...w.n,...e}),F=e=>(0,v.z)(P.x,(0,N.u)("GlobalSignOut"),(0,T.o)(),{...w.n,...e});var M=n(3638);let _=new o.k("Auth");async function D(e){let t;let n=i.d.getConfig().Auth?.Cognito;(0,c.FG)(n),e?.global?await b(n):await O(n);try{(0,c.V0)(n),t=!0}catch(e){t=!1}if(t){let t=new p.R(r.Fm);t.setAuthConfig(n);let{type:o}=await A(n,t,E.C,e?.oauth?.redirectUrl)??{};if("error"===o)throw new u.l({name:S.wW,message:"An error occurred when attempting to log out from OAuth provider."})}else E.C.clearTokens(),await a(),s.Xb.dispatch("auth",{event:"signedOut"},"Auth",s.SQ)}async function O(e){try{let{userPoolEndpoint:t,userPoolId:n,userPoolClientId:o}=e,i=await E.C.getTokenStore().loadTokens();if((0,g.XD)(i),L(i.accessToken)){let e=U({endpointResolver:(0,M.e)({endpointOverride:t})});await e({region:(0,m.y)(n),userAgentValue:(0,d.W)(l.g4.SignOut)},{ClientId:o,Token:i.refreshToken})}}catch(e){_.debug("Client signOut error caught but will proceed with token removal")}}async function b(e){try{let{userPoolEndpoint:t,userPoolId:n}=e,o=await E.C.getTokenStore().loadTokens();(0,g.CA)(o);let i=F({endpointResolver:(0,M.e)({endpointOverride:t})});await i({region:(0,m.y)(n),userAgentValue:(0,d.W)(l.g4.SignOut)},{AccessToken:o.accessToken.toString()})}catch(e){_.debug("Global signOut error caught but will proceed with token removal")}}let L=e=>!!e?.payload?.origin_jti},2195:function(e,t,n){n.d(t,{y:function(){return O}});var o=n(5165),i=n(3461),r=n(5),a=n(1131),s=n(5227),c=n(6605),l=n(8460),d=n(305),u=n(4638),p=n(4686),E=n(9663),m=n(9509),g=n(8972);function h(e,t){let n;return o=>{n||e(...o),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}let x=h(function(e,t,n){let o=Date.now(),i=setInterval(async()=>{if(Date.now()-o>18e4)clearInterval(i),n(new p.l({name:m.MA,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),(0,E.Dv)();else try{let n=await (0,u.z)(e);"CONFIRM_SIGN_UP"!==n.nextStep.signInStep&&(t(n),clearInterval(i),(0,E.Dv)())}catch(e){clearInterval(i),n(e),(0,E.Dv)()}},5e3)},300),S=h(f,300);async function f(e,t,n){try{let n=e?.options?.authFlowType==="USER_AUTH"?await (0,g.G)(e):await (0,u.z)(e);t(n),(0,E.Dv)()}catch(e){n(e),(0,E.Dv)()}}function I(e){return async()=>new Promise((t,n)=>{S([e,t,n])})}var y=n(2562),R=n(8357),C=n(7099),A=n(5434),v=n(9012),P=n(9559),N=n(4808),T=n(4719),w=n(5409),U=n(8196);let F=()=>async e=>{if(e.statusCode>=300){let t=await (0,A.f)(e);if((0,P.R)(t),t.name===N.y3.InvalidParameterException&&/'password'/.test(t.message)&&/Member must not be null/.test(t.message)){let e=s.X.EmptySignUpPassword,{message:t,recoverySuggestion:n}=v.By[e];throw new p.l({name:e,message:t,recoverySuggestion:n})}throw new p.l({name:t.name,message:t.message})}return(0,A.e)(e)},M=e=>(0,C.z)(w.x,(0,T.u)("SignUp"),F(),{...U.n,...e});var _=n(3638),D=n(1326);async function O(e){let{username:t,password:n,options:u}=e,p=o.d.getConfig().Auth?.Cognito,m=p?.signUpVerificationMethod??"code",{clientMetadata:g,validationData:h,autoSignIn:S}=e.options??{};(0,i.FG)(p),(0,a.n)(!!t,s.X.EmptySignUpUsername);let f="boolean"!=typeof S?S:void 0,C={username:t,options:f};f?.authFlowType!=="CUSTOM_WITHOUT_SRP"&&(C.password=n);let{userPoolId:A,userPoolClientId:v,userPoolEndpoint:P}=p,N=M({endpointResolver:(0,_.e)({endpointOverride:P})}),T={Username:t,Password:void 0,UserAttributes:u?.userAttributes&&(0,l.J)(u?.userAttributes),ClientMetadata:g,ValidationData:h&&(0,l.J)(h),ClientId:v,UserContextData:(0,y.u)({username:t,userPoolId:A,userPoolClientId:v})};n&&(T.Password=n);let{UserSub:w,CodeDeliveryDetails:U,UserConfirmed:F,Session:O}=await N({region:(0,c.y)(A),userAgentValue:(0,R.W)(r.g4.SignUp)},T);(f||!0===S)&&(D.E.dispatch({type:"START"}),D.E.dispatch({type:"SET_USERNAME",value:t}),D.E.dispatch({type:"SET_SESSION",value:O}));let b={destination:U?.Destination,deliveryMedium:U?.DeliveryMedium,attributeName:U?.AttributeName},L=D.E.getState().active;if(F)return L?((0,E.I)(I(C)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:w}):{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:w};if(L){if("link"===m)return(0,E.I)(async()=>new Promise((e,t)=>{x([C,e,t])})),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:b},userId:w};!function(e){let t=d.qC.listen("auth-internal",async({payload:n})=>{if("confirmSignUp"===n.event){let o=n.data;o?.isSignUpComplete&&(d.qC.dispatch("auth-internal",{event:"autoSignIn"}),(0,E.I)(I(e)),t())}}),n=setTimeout(()=>{t(),clearTimeout(n),(0,E.Dv)()},18e4)}(C)}return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:b},userId:w}}},1426:function(e,t,n){n.d(t,{V:function(){return S}});var o=n(5165),i=n(9319),r=n(3461),a=n(5),s=n(6566),c=n(6605),l=n(8460),d=n(8357),u=n(7099),p=n(5409),E=n(4719),m=n(5059),g=n(8196);let h=e=>(0,u.z)(p.x,(0,E.u)("UpdateUserAttributes"),(0,m.o)(),{...g.n,...e});var x=n(3638);let S=async e=>{let{userAttributes:t,options:n}=e,u=o.d.getConfig().Auth?.Cognito,p=n?.clientMetadata;(0,r.FG)(u);let{userPoolEndpoint:E,userPoolId:m}=u,{tokens:g}=await (0,i.y)({forceRefresh:!1});(0,s.CA)(g);let S=h({endpointResolver:(0,x.e)({endpointOverride:E})}),{CodeDeliveryDetailsList:f}=await S({region:(0,c.y)(m),userAgentValue:(0,d.W)(a.g4.UpdateUserAttributes)},{AccessToken:g.accessToken.toString(),ClientMetadata:p,UserAttributes:(0,l.J)(t)});return{...function(e){let t={};return Object.keys(e)?.forEach(e=>{t[e]={isUpdated:!0,nextStep:{updateAttributeStep:"DONE"}}}),t}(t),...function(e){let t={};return e?.forEach(e=>{let{AttributeName:n,DeliveryMedium:o,Destination:i}=e;n&&(t[n]={isUpdated:!1,nextStep:{updateAttributeStep:"CONFIRM_ATTRIBUTE_WITH_CODE",codeDeliveryDetails:{attributeName:n,deliveryMedium:o,destination:i}}})}),t}(f)}}},4388:function(e,t,n){n.d(t,{x:function(){return a}});var o=n(3461),i=n(5967),r=n(8714);async function a(e){if(e.AccessToken){let t,n,i;let a=(0,o.xp)(e.AccessToken),s=1e3*(a.payload.iat||0),c=new Date().getTime();e.RefreshToken&&(n=e.RefreshToken),e.IdToken&&(t=(0,o.xp)(e.IdToken)),e?.NewDeviceMetadata&&(i=e.NewDeviceMetadata);let l={accessToken:a,idToken:t,refreshToken:n,clockDrift:s>0?s-c:0,deviceMetadata:i,username:e.username};e?.signInDetails&&(l.signInDetails=e.signInDetails),await r.C.setTokens({tokens:l})}else throw new i._({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}},4808:function(e,t,n){var o,i,r,a,s,c,l,d,u,p,E,m,g,h,x,S,f,I,y,R,C,A,v,P,N,T,w,U,F,M,_,D,O,b,L,k,q,W,B,V,H,z,G,$,X,Z,K,Y;n.d(t,{OK:function(){return x},y3:function(){return y}}),(N=o||(o={})).ConcurrentModificationException="ConcurrentModificationException",N.ForbiddenException="ForbiddenException",N.InternalErrorException="InternalErrorException",N.InvalidParameterException="InvalidParameterException",N.NotAuthorizedException="NotAuthorizedException",N.ResourceNotFoundException="ResourceNotFoundException",N.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",(T=i||(i={})).ForbiddenException="ForbiddenException",T.InternalErrorException="InternalErrorException",T.InvalidParameterException="InvalidParameterException",T.InvalidPasswordException="InvalidPasswordException",T.LimitExceededException="LimitExceededException",T.NotAuthorizedException="NotAuthorizedException",T.PasswordResetRequiredException="PasswordResetRequiredException",T.ResourceNotFoundException="ResourceNotFoundException",T.TooManyRequestsException="TooManyRequestsException",T.UserNotConfirmedException="UserNotConfirmedException",T.UserNotFoundException="UserNotFoundException",(w=r||(r={})).ForbiddenException="ForbiddenException",w.InternalErrorException="InternalErrorException",w.InvalidLambdaResponseException="InvalidLambdaResponseException",w.InvalidParameterException="InvalidParameterException",w.InvalidPasswordException="InvalidPasswordException",w.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",w.NotAuthorizedException="NotAuthorizedException",w.PasswordResetRequiredException="PasswordResetRequiredException",w.ResourceNotFoundException="ResourceNotFoundException",w.TooManyRequestsException="TooManyRequestsException",w.UsernameExistsException="UsernameExistsException",w.UserNotConfirmedException="UserNotConfirmedException",w.UserNotFoundException="UserNotFoundException",(U=a||(a={})).CodeMismatchException="CodeMismatchException",U.ExpiredCodeException="ExpiredCodeException",U.ForbiddenException="ForbiddenException",U.InternalErrorException="InternalErrorException",U.InvalidLambdaResponseException="InvalidLambdaResponseException",U.InvalidParameterException="InvalidParameterException",U.InvalidPasswordException="InvalidPasswordException",U.LimitExceededException="LimitExceededException",U.NotAuthorizedException="NotAuthorizedException",U.ResourceNotFoundException="ResourceNotFoundException",U.TooManyFailedAttemptsException="TooManyFailedAttemptsException",U.TooManyRequestsException="TooManyRequestsException",U.UnexpectedLambdaException="UnexpectedLambdaException",U.UserLambdaValidationException="UserLambdaValidationException",U.UserNotConfirmedException="UserNotConfirmedException",U.UserNotFoundException="UserNotFoundException",(F=s||(s={})).AliasExistsException="AliasExistsException",F.CodeMismatchException="CodeMismatchException",F.ExpiredCodeException="ExpiredCodeException",F.ForbiddenException="ForbiddenException",F.InternalErrorException="InternalErrorException",F.InvalidLambdaResponseException="InvalidLambdaResponseException",F.InvalidParameterException="InvalidParameterException",F.LimitExceededException="LimitExceededException",F.NotAuthorizedException="NotAuthorizedException",F.ResourceNotFoundException="ResourceNotFoundException",F.TooManyFailedAttemptsException="TooManyFailedAttemptsException",F.TooManyRequestsException="TooManyRequestsException",F.UnexpectedLambdaException="UnexpectedLambdaException",F.UserLambdaValidationException="UserLambdaValidationException",F.UserNotFoundException="UserNotFoundException",(M=c||(c={})).ForbiddenException="ForbiddenException",M.InternalErrorException="InternalErrorException",M.InvalidParameterException="InvalidParameterException",M.NotAuthorizedException="NotAuthorizedException",M.PasswordResetRequiredException="PasswordResetRequiredException",M.ResourceNotFoundException="ResourceNotFoundException",M.TooManyRequestsException="TooManyRequestsException",M.UserNotConfirmedException="UserNotConfirmedException",M.UserNotFoundException="UserNotFoundException",(_=l||(l={})).ForbiddenException="ForbiddenException",_.InternalErrorException="InternalErrorException",_.InvalidParameterException="InvalidParameterException",_.NotAuthorizedException="NotAuthorizedException",_.PasswordResetRequiredException="PasswordResetRequiredException",_.ResourceNotFoundException="ResourceNotFoundException",_.TooManyRequestsException="TooManyRequestsException",_.UserNotConfirmedException="UserNotConfirmedException",_.UserNotFoundException="UserNotFoundException",(D=d||(d={})).ForbiddenException="ForbiddenException",D.InternalErrorException="InternalErrorException",D.InvalidParameterException="InvalidParameterException",D.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",D.NotAuthorizedException="NotAuthorizedException",D.PasswordResetRequiredException="PasswordResetRequiredException",D.ResourceNotFoundException="ResourceNotFoundException",D.TooManyRequestsException="TooManyRequestsException",D.UserNotConfirmedException="UserNotConfirmedException",D.UserNotFoundException="UserNotFoundException",(O=u||(u={})).CodeDeliveryFailureException="CodeDeliveryFailureException",O.ForbiddenException="ForbiddenException",O.InternalErrorException="InternalErrorException",O.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",O.InvalidLambdaResponseException="InvalidLambdaResponseException",O.InvalidParameterException="InvalidParameterException",O.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",O.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",O.LimitExceededException="LimitExceededException",O.NotAuthorizedException="NotAuthorizedException",O.ResourceNotFoundException="ResourceNotFoundException",O.TooManyRequestsException="TooManyRequestsException",O.UnexpectedLambdaException="UnexpectedLambdaException",O.UserLambdaValidationException="UserLambdaValidationException",O.UserNotFoundException="UserNotFoundException",(b=p||(p={})).ForbiddenException="ForbiddenException",b.InternalErrorException="InternalErrorException",b.InvalidParameterException="InvalidParameterException",b.NotAuthorizedException="NotAuthorizedException",b.PasswordResetRequiredException="PasswordResetRequiredException",b.ResourceNotFoundException="ResourceNotFoundException",b.TooManyRequestsException="TooManyRequestsException",b.UserNotConfirmedException="UserNotConfirmedException",b.UserNotFoundException="UserNotFoundException",(L=E||(E={})).ExternalServiceException="ExternalServiceException",L.InternalErrorException="InternalErrorException",L.InvalidParameterException="InvalidParameterException",L.LimitExceededException="LimitExceededException",L.NotAuthorizedException="NotAuthorizedException",L.ResourceConflictException="ResourceConflictException",L.ResourceNotFoundException="ResourceNotFoundException",L.TooManyRequestsException="TooManyRequestsException",(k=m||(m={})).ExternalServiceException="ExternalServiceException",k.InternalErrorException="InternalErrorException",k.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",k.InvalidParameterException="InvalidParameterException",k.NotAuthorizedException="NotAuthorizedException",k.ResourceConflictException="ResourceConflictException",k.ResourceNotFoundException="ResourceNotFoundException",k.TooManyRequestsException="TooManyRequestsException",(q=g||(g={})).CodeDeliveryFailureException="CodeDeliveryFailureException",q.ForbiddenException="ForbiddenException",q.InternalErrorException="InternalErrorException",q.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",q.InvalidLambdaResponseException="InvalidLambdaResponseException",q.InvalidParameterException="InvalidParameterException",q.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",q.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",q.LimitExceededException="LimitExceededException",q.NotAuthorizedException="NotAuthorizedException",q.PasswordResetRequiredException="PasswordResetRequiredException",q.ResourceNotFoundException="ResourceNotFoundException",q.TooManyRequestsException="TooManyRequestsException",q.UnexpectedLambdaException="UnexpectedLambdaException",q.UserLambdaValidationException="UserLambdaValidationException",q.UserNotConfirmedException="UserNotConfirmedException",q.UserNotFoundException="UserNotFoundException",(W=h||(h={})).ForbiddenException="ForbiddenException",W.InternalErrorException="InternalErrorException",W.InvalidParameterException="InvalidParameterException",W.NotAuthorizedException="NotAuthorizedException",W.PasswordResetRequiredException="PasswordResetRequiredException",W.ResourceNotFoundException="ResourceNotFoundException",W.TooManyRequestsException="TooManyRequestsException",W.UserNotConfirmedException="UserNotConfirmedException",(B=x||(x={})).PasswordResetRequiredException="PasswordResetRequiredException",B.ForbiddenException="ForbiddenException",B.InternalErrorException="InternalErrorException",B.InvalidLambdaResponseException="InvalidLambdaResponseException",B.InvalidParameterException="InvalidParameterException",B.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",B.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",B.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",B.NotAuthorizedException="NotAuthorizedException",B.ResourceNotFoundException="ResourceNotFoundException",B.TooManyRequestsException="TooManyRequestsException",B.UnexpectedLambdaException="UnexpectedLambdaException",B.UserLambdaValidationException="UserLambdaValidationException",B.UserNotConfirmedException="UserNotConfirmedException",B.UserNotFoundException="UserNotFoundException",(V=S||(S={})).CodeDeliveryFailureException="CodeDeliveryFailureException",V.ForbiddenException="ForbiddenException",V.InternalErrorException="InternalErrorException",V.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",V.InvalidLambdaResponseException="InvalidLambdaResponseException",V.InvalidParameterException="InvalidParameterException",V.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",V.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",V.LimitExceededException="LimitExceededException",V.NotAuthorizedException="NotAuthorizedException",V.ResourceNotFoundException="ResourceNotFoundException",V.TooManyRequestsException="TooManyRequestsException",V.UnexpectedLambdaException="UnexpectedLambdaException",V.UserLambdaValidationException="UserLambdaValidationException",V.UserNotFoundException="UserNotFoundException",(H=f||(f={})).AliasExistsException="AliasExistsException",H.CodeMismatchException="CodeMismatchException",H.ExpiredCodeException="ExpiredCodeException",H.ForbiddenException="ForbiddenException",H.InternalErrorException="InternalErrorException",H.InvalidLambdaResponseException="InvalidLambdaResponseException",H.InvalidParameterException="InvalidParameterException",H.InvalidPasswordException="InvalidPasswordException",H.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",H.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",H.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",H.MFAMethodNotFoundException="MFAMethodNotFoundException",H.NotAuthorizedException="NotAuthorizedException",H.PasswordResetRequiredException="PasswordResetRequiredException",H.ResourceNotFoundException="ResourceNotFoundException",H.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",H.TooManyRequestsException="TooManyRequestsException",H.UnexpectedLambdaException="UnexpectedLambdaException",H.UserLambdaValidationException="UserLambdaValidationException",H.UserNotConfirmedException="UserNotConfirmedException",H.UserNotFoundException="UserNotFoundException",(z=I||(I={})).ForbiddenException="ForbiddenException",z.InternalErrorException="InternalErrorException",z.InvalidParameterException="InvalidParameterException",z.NotAuthorizedException="NotAuthorizedException",z.PasswordResetRequiredException="PasswordResetRequiredException",z.ResourceNotFoundException="ResourceNotFoundException",z.UserNotConfirmedException="UserNotConfirmedException",z.UserNotFoundException="UserNotFoundException",(G=y||(y={})).CodeDeliveryFailureException="CodeDeliveryFailureException",G.InternalErrorException="InternalErrorException",G.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",G.InvalidLambdaResponseException="InvalidLambdaResponseException",G.InvalidParameterException="InvalidParameterException",G.InvalidPasswordException="InvalidPasswordException",G.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",G.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",G.NotAuthorizedException="NotAuthorizedException",G.ResourceNotFoundException="ResourceNotFoundException",G.TooManyRequestsException="TooManyRequestsException",G.UnexpectedLambdaException="UnexpectedLambdaException",G.UserLambdaValidationException="UserLambdaValidationException",G.UsernameExistsException="UsernameExistsException",($=R||(R={})).AliasExistsException="AliasExistsException",$.CodeDeliveryFailureException="CodeDeliveryFailureException",$.CodeMismatchException="CodeMismatchException",$.ExpiredCodeException="ExpiredCodeException",$.ForbiddenException="ForbiddenException",$.InternalErrorException="InternalErrorException",$.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",$.InvalidLambdaResponseException="InvalidLambdaResponseException",$.InvalidParameterException="InvalidParameterException",$.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",$.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",$.NotAuthorizedException="NotAuthorizedException",$.PasswordResetRequiredException="PasswordResetRequiredException",$.ResourceNotFoundException="ResourceNotFoundException",$.TooManyRequestsException="TooManyRequestsException",$.UnexpectedLambdaException="UnexpectedLambdaException",$.UserLambdaValidationException="UserLambdaValidationException",$.UserNotConfirmedException="UserNotConfirmedException",$.UserNotFoundException="UserNotFoundException",(X=C||(C={})).CodeMismatchException="CodeMismatchException",X.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",X.ForbiddenException="ForbiddenException",X.InternalErrorException="InternalErrorException",X.InvalidParameterException="InvalidParameterException",X.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",X.NotAuthorizedException="NotAuthorizedException",X.PasswordResetRequiredException="PasswordResetRequiredException",X.ResourceNotFoundException="ResourceNotFoundException",X.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",X.TooManyRequestsException="TooManyRequestsException",X.UserNotConfirmedException="UserNotConfirmedException",X.UserNotFoundException="UserNotFoundException",(Z=A||(A={})).AliasExistsException="AliasExistsException",Z.CodeMismatchException="CodeMismatchException",Z.ExpiredCodeException="ExpiredCodeException",Z.ForbiddenException="ForbiddenException",Z.InternalErrorException="InternalErrorException",Z.InvalidParameterException="InvalidParameterException",Z.LimitExceededException="LimitExceededException",Z.NotAuthorizedException="NotAuthorizedException",Z.PasswordResetRequiredException="PasswordResetRequiredException",Z.ResourceNotFoundException="ResourceNotFoundException",Z.TooManyRequestsException="TooManyRequestsException",Z.UserNotConfirmedException="UserNotConfirmedException",Z.UserNotFoundException="UserNotFoundException",(K=v||(v={})).ForbiddenException="ForbiddenException",K.InternalErrorException="InternalErrorException",K.InvalidParameterException="InvalidParameterException",K.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",K.NotAuthorizedException="NotAuthorizedException",K.PasswordResetRequiredException="PasswordResetRequiredException",K.ResourceNotFoundException="ResourceNotFoundException",K.TooManyRequestsException="TooManyRequestsException",K.UserNotConfirmedException="UserNotConfirmedException",K.UserNotFoundException="UserNotFoundException",(Y=P||(P={})).ForbiddenException="ForbiddenException",Y.InternalErrorException="InternalErrorException",Y.InvalidParameterException="InvalidParameterException",Y.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",Y.NotAuthorizedException="NotAuthorizedException",Y.PasswordResetRequiredException="PasswordResetRequiredException",Y.ResourceNotFoundException="ResourceNotFoundException",Y.TooManyRequestsException="TooManyRequestsException",Y.UserNotConfirmedException="UserNotConfirmedException",Y.UserNotFoundException="UserNotFoundException"},8460:function(e,t,n){function o(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}function i(e){let t={};return e?.forEach(e=>{e.Name&&(t[e.Name]=e.Value)}),t}n.d(t,{J:function(){return o},R:function(){return i}})},9749:function(e,t,n){n.d(t,{O:function(){return s}});var o=n(305),i=n(6398),r=n(9509),a=n(4686);let s=async()=>{try{o.Xb.dispatch("auth",{event:"signedIn",data:await (0,i.t)()},"Auth",o.SQ)}catch(e){if(e.name===r.Jg)throw new a.l({name:r.sX,message:"Unable to get user session following successful sign-in.",recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."});throw e}}},6772:function(e,t,n){n.d(t,{F:function(){return g}});var o=n(1698);let i=async()=>{let{userAgentData:e}=navigator;if(!e)return navigator.userAgent;let{platform:t="",platformVersion:n="",model:o="",architecture:i="",fullVersionList:r=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]);return[t,n,i,o,t,r.map(e=>`${e.brand}/${e.version}`).join(";")].filter(e=>e).join(" ")||navigator.userAgent};var r=n(7099),a=n(5409),s=n(4719),c=n(5059),l=n(8196);let d=e=>(0,r.z)(a.x,(0,s.u)("ConfirmDevice"),(0,c.o)(),{...l.n,...e});var u=n(3638),p=n(6605),E=n(105),m=n(3019);async function g({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:r}){if(!n)return;let a=e.split("_")[1]||"",s=await (0,E.d)(a),c=n?.DeviceKey,l=n?.DeviceGroupKey;try{await s.generateHashDevice(l??"",c??"")}catch(e){return}let g={Salt:o.u.convert((0,m.z)(s.getSaltToHashDevices())),PasswordVerifier:o.u.convert((0,m.z)(s.getVerifierDevices()))},h=s.getRandomPassword();try{let o=d({endpointResolver:(0,u.e)({endpointOverride:t})});return await o({region:(0,p.y)(e)},{AccessToken:r,DeviceName:await i(),DeviceKey:n?.DeviceKey,DeviceSecretVerifierConfig:g}),{deviceKey:c,deviceGroupKey:l,randomPassword:h}}catch(e){return}}n(5169)},1838:function(e,t,n){n.d(t,{z:function(){return p}});var o=n(8225),i=n(3638),r=n(6605),a=n(6566),s=n(105),c=n(393),l=n(2675),d=n(6963),u=n(2562);async function p({username:e,config:t,clientMetadata:n,session:c,tokenOrchestrator:l}){let{userPoolId:d,userPoolEndpoint:u}=t,p=t.userPoolClientId,m=await l?.getDeviceMetadata(e);(0,a.tr)(m);let g=await (0,s.d)(m.deviceGroupKey),h={USERNAME:e,SRP_A:g.A.toString(16),DEVICE_KEY:m.deviceKey},x=(0,o.u)({endpointResolver:(0,i.e)({endpointOverride:u})}),{ChallengeParameters:S,Session:f}=await x({region:(0,r.y)(d)},{ChallengeName:"DEVICE_SRP_AUTH",ClientId:p,ChallengeResponses:h,ClientMetadata:n,Session:c});return E(e,S,n,f,g,t,l)}async function E(e,t,n,s,p,{userPoolId:E,userPoolClientId:m,userPoolEndpoint:g},h){let x=await h?.getDeviceMetadata(e);(0,a.tr)(x);let S=new d.Z(t?.SRP_B,16),f=new d.Z(t?.SALT,16),{deviceKey:I}=x,{deviceGroupKey:y}=x,R=await p.getPasswordAuthenticationKey({username:x.deviceKey,password:x.randomPassword,serverBValue:S,salt:f}),C=(0,c.H)(),A={USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:C,PASSWORD_CLAIM_SIGNATURE:(0,l.i)({username:I,userPoolName:y,challengeParameters:t,dateNow:C,hkdf:R}),DEVICE_KEY:I},v=(0,u.u)({username:e,userPoolId:E,userPoolClientId:m});return(0,o.u)({endpointResolver:(0,i.e)({endpointOverride:g})})({region:(0,r.y)(E)},{ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:m,ChallengeResponses:A,Session:s,ClientMetadata:n,UserContextData:v})}},7978:function(e,t,n){n.d(t,{i:function(){return p}});var o=n(4686),i=n(8225),r=n(3638),a=n(6605),s=n(6963);n(5169);var c=n(393),l=n(2675),d=n(2562),u=n(1838);async function p(e,t,n,p,E,m,g){let{userPoolId:h,userPoolClientId:x,userPoolEndpoint:S}=m,f=h?.split("_")[1]||"",I=new s.Z(t?.SRP_B,16),y=new s.Z(t?.SALT,16),R=t?.USER_ID_FOR_SRP;if(!R)throw new o.l({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});let C=await E.getPasswordAuthenticationKey({username:R,password:e,serverBValue:I,salt:y}),A=(0,c.H)(),v={USERNAME:R,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:A,PASSWORD_CLAIM_SIGNATURE:(0,l.i)({username:R,userPoolName:f,challengeParameters:t,dateNow:A,hkdf:C})},P=await g.getDeviceMetadata(R);P&&P.deviceKey&&(v.DEVICE_KEY=P.deviceKey);let N=(0,d.u)({username:R,userPoolId:h,userPoolClientId:x}),T=(0,i.u)({endpointResolver:(0,r.e)({endpointOverride:S})}),w=await T({region:(0,a.y)(h)},{ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:v,ClientMetadata:n,Session:p,ClientId:x,UserContextData:N});return"DEVICE_SRP_AUTH"===w.ChallengeName?(0,u.z)({username:R,config:m,clientMetadata:n,session:w.Session,tokenOrchestrator:g}):w}},2655:function(e,t,n){n.d(t,{H:function(){return i}});var o=n(4686);async function i(e,t,n,i){try{return await e(...t)}catch(r){if(r instanceof o.l&&"ResourceNotFoundException"===r.name&&r.message.includes("Device does not exist."))return await i.clearDeviceMetadata(n),e(...t);throw r}}},1667:function(e,t,n){n.d(t,{r:function(){return i}});var o=n(5474);function i(e){let{dispatch:t}=o.signInStore;t({type:"SET_USERNAME",value:e})}},4563:function(e,t,n){n.d(t,{OP:function(){return eA},QS:function(){return ev},cP:function(){return eS},yM:function(){return ef},Fu:function(){return eI},pB:function(){return eh},Mf:function(){return ex},x6:function(){return em},U:function(){return eg}});var o,i,r=n(5165),a=n(5),s=n(3461),c=n(6743),l=n(4686),d=n(4808),u=n(9012),p=n(5227),E=n(1131),m=n(9509),g=n(6398),h=n(8357),x=n(6378),S=n(8225),f=n(7099),I=n(5409),y=n(4719),R=n(5059),C=n(8196);let A=e=>(0,f.z)(I.x,(0,y.u)("VerifySoftwareToken"),(0,R.o)(),{...C.n,...e}),v=e=>(0,f.z)(I.x,(0,y.u)("AssociateSoftwareToken"),(0,R.o)(),{...C.n,...e});var P=n(3638),N=n(6605),T=n(4388),w=n(9749),U=n(5474),F=n(5967),M=n(2199),_=n(4982);class D extends F._{constructor(e){super(e),this.constructor=D,Object.setPrototypeOf(this,D.prototype)}}(o=i||(i={})).PasskeyNotSupported="PasskeyNotSupported",o.PasskeyAlreadyExists="PasskeyAlreadyExists",o.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",o.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",o.RelyingPartyMismatch="RelyingPartyMismatch",o.PasskeyRegistrationFailed="PasskeyRegistrationFailed",o.PasskeyRetrievalFailed="PasskeyRetrievalFailed",o.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",o.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",o.PasskeyOperationAborted="PasskeyOperationAborted";let O="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.",b="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",L="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",k={[i.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:O},[i.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:L},[i.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:L},[i.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:O},[i.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[i.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[i.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:b},[i.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:b},[i.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:b},[i.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},q=(0,M.$)(k,D),W=e=>{if(e instanceof D)return e;if(e instanceof Error&&"NotAllowedError"===e.name){let{message:t,recoverySuggestion:n}=k[i.PasskeyAuthenticationCanceled];return new D({name:i.PasskeyAuthenticationCanceled,message:t,recoverySuggestion:n,underlyingError:e})}return B(e)},B=e=>{if(e instanceof Error){if("AbortError"===e.name){let{message:t,recoverySuggestion:n}=k[i.PasskeyOperationAborted];return new D({name:i.PasskeyOperationAborted,message:t,recoverySuggestion:n,underlyingError:e})}if("SecurityError"===e.name){let{message:t,recoverySuggestion:n}=k[i.RelyingPartyMismatch];return new D({name:i.RelyingPartyMismatch,message:t,recoverySuggestion:n,underlyingError:e})}}return new D({name:_.Z.Unknown,message:"An unknown error has occurred.",underlyingError:e})};var V=n(2459);let H=()=>(0,V.j)()&&window.isSecureContext&&"credentials"in navigator&&"function"==typeof window.PublicKeyCredential;var z=n(1698);let G=e=>z.u.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0});var $=n(905);let X=e=>Uint8Array.from($.$.convert(e,{urlSafe:!0}),e=>e.charCodeAt(0)).buffer,Z=e=>{let t=X(e.challenge),n=(e.allowCredentials||[]).map(e=>({...e,id:X(e.id)}));return{...e,challenge:t,allowCredentials:n}},K=e=>{let t={clientDataJSON:G(e.response.clientDataJSON),authenticatorData:G(e.response.authenticatorData),signature:G(e.response.signature)};e.response.userHandle&&(t.userHandle=G(e.response.userHandle));let n={id:e.id,rawId:G(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:t};return e.authenticatorAttachment&&(n.authenticatorAttachment=e.authenticatorAttachment),n},Y=async e=>{try{let t=H();q(t,i.PasskeyNotSupported);let n=Z(e),o=await navigator.credentials.get({publicKey:n});return q(o&&o instanceof PublicKeyCredential&&o.response instanceof AuthenticatorAssertionResponse,i.PasskeyRetrievalFailed),K(o)}catch(e){throw W(e)}};var j=n(6772);async function J(e){let t=r.d.getConfig().Auth?.Cognito;(0,s.FG)(t);let{username:n,signInSession:o,signInDetails:c,challengeName:d}=U.signInStore.getState();if("WEB_AUTHN"!==d||!n)throw new l.l({name:u.kq.SignInException,message:"Unable to proceed due to invalid sign in state."});let{CREDENTIAL_REQUEST_OPTIONS:p}=e;q(!!p,i.InvalidPasskeyAuthenticationOptions);let E=await Y(JSON.parse(p)),m=(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:t.userPoolEndpoint})}),{ChallengeName:g,ChallengeParameters:x,AuthenticationResult:f,Session:I}=await m({region:(0,N.y)(t.userPoolId),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:n,CREDENTIAL:JSON.stringify(E)},ClientId:t.userPoolClientId,Session:o});if((0,U.k4)({signInSession:I,username:n,challengeName:g,signInDetails:c}),f)return await (0,T.x)({...f,username:n,NewDeviceMetadata:await (0,j.F)({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:f.NewDeviceMetadata,accessToken:f.AccessToken}),signInDetails:c}),U.signInStore.dispatch({type:"RESET_STATE"}),await (0,w.O)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if("WEB_AUTHN"===g)throw new l.l({name:u.kq.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return{challengeName:g,challengeParameters:x}}var Q=n(7655);async function ee({username:e,session:t,selectedChallenge:n,config:o,clientMetadata:i}){return(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:o.userPoolEndpoint})})({region:(0,N.y)(o.userPoolId),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:{USERNAME:e,ANSWER:n},ClientId:o.userPoolClientId,Session:t,ClientMetadata:i})}var et=n(2562),en=n(1667);async function eo(e,t,n,o,i){let{userPoolId:r,userPoolClientId:s,userPoolEndpoint:c}=o,l=(0,et.u)({username:e,userPoolId:r,userPoolClientId:s}),d=(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:c})}),u=await d({region:(0,N.y)(r),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:{ANSWER:"PASSWORD",USERNAME:e,PASSWORD:t},ClientId:s,ClientMetadata:n,Session:i,UserContextData:l}),p=u.ChallengeParameters?.USERNAME??e;return(0,en.r)(p),u}var ei=n(105);n(5169);var er=n(2655),ea=n(7978);async function es(e,t,n,o,i,r){let{userPoolId:s,userPoolClientId:c,userPoolEndpoint:l}=o,d=s.split("_")[1]||"",u=await (0,ei.d)(d),p={ANSWER:"PASSWORD_SRP",USERNAME:e,SRP_A:u.A.toString(16)},E=(0,et.u)({username:e,userPoolId:s,userPoolClientId:c}),m=(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:l})}),g=await m({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:p,ClientId:c,ClientMetadata:n,Session:i,UserContextData:E}),x=g.ChallengeParameters?.USERNAME??e;return((0,en.r)(x),"PASSWORD_VERIFIER"===g.ChallengeName)?(0,er.H)(ea.i,[t,g.ChallengeParameters,n,g.Session,u,o,r],x,r):g}var ec=n(1838);let el="userAttributes.";async function ed({challengeResponse:e,clientMetadata:t,session:n,username:o,config:i,tokenOrchestrator:r}){let{userPoolId:s,userPoolClientId:c,userPoolEndpoint:l}=i,d={USERNAME:o,ANSWER:e},u=await r?.getDeviceMetadata(o);u&&u.deviceKey&&(d.DEVICE_KEY=u.deviceKey);let p=(0,et.u)({username:o,userPoolId:s,userPoolClientId:c}),E=(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:l})}),m=await E({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:d,Session:n,ClientMetadata:t,ClientId:c,UserContextData:p});return"DEVICE_SRP_AUTH"===m.ChallengeName?(0,ec.z)({username:o,config:i,clientMetadata:t,session:m.Session,tokenOrchestrator:r}):m}async function eu({challengeResponse:e,username:t,clientMetadata:n,session:o,deviceName:i,config:r}){let{userPoolId:s,userPoolClientId:c,userPoolEndpoint:d}=r;if("EMAIL"===e)return{ChallengeName:"MFA_SETUP",Session:o,ChallengeParameters:{MFAS_CAN_SETUP:'["EMAIL_OTP"]'},$metadata:{}};if("TOTP"===e)return{ChallengeName:"MFA_SETUP",Session:o,ChallengeParameters:{MFAS_CAN_SETUP:'["SOFTWARE_TOKEN_MFA"]'},$metadata:{}};let p={USERNAME:t};if(/^\d+$/.test(e)){let t=A({endpointResolver:(0,P.e)({endpointOverride:d})}),{Session:r}=await t({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{UserCode:e,Session:o,FriendlyDeviceName:i});return U.signInStore.dispatch({type:"SET_SIGN_IN_SESSION",value:r}),(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:d})})({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"MFA_SETUP",ChallengeResponses:p,Session:r,ClientMetadata:n,ClientId:c})}if(e.includes("@"))return p.EMAIL=e,(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:d})})({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"MFA_SETUP",ChallengeResponses:p,Session:o,ClientMetadata:n,ClientId:c});throw new l.l({name:u.kq.SignInException,message:`Cannot proceed with MFA setup using challengeResponse: ${e}`,recoverySuggestion:'Try passing "EMAIL", "TOTP", a valid email, or OTP code as the challengeResponse.'})}async function ep({challengeResponse:e,username:t,clientMetadata:n,session:o,config:i}){let r;let{userPoolId:s,userPoolClientId:c,userPoolEndpoint:l}=i;(0,E.n)("TOTP"===e||"SMS"===e||"EMAIL"===e,p.X.IncorrectMFAMethod);let d={USERNAME:t,ANSWER:(r="SMS_MFA","TOTP"===e&&(r="SOFTWARE_TOKEN_MFA"),"EMAIL"===e&&(r="EMAIL_OTP"),r)},u=(0,et.u)({username:t,userPoolId:s,userPoolClientId:c});return(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:l})})({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:d,Session:o,ClientMetadata:n,ClientId:c,UserContextData:u})}async function eE({challengeResponse:e,clientMetadata:t,session:n,username:o,requiredAttributes:i,config:r}){let{userPoolId:s,userPoolClientId:c,userPoolEndpoint:l}=r,d={...function(e){if(!e)return{};let t={};return Object.entries(e).forEach(([e,n])=>{n&&(t[`${el}${e}`]=n)}),t}(i),NEW_PASSWORD:e,USERNAME:o},u=(0,et.u)({username:o,userPoolId:s,userPoolClientId:c});return(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:l})})({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:d,ClientMetadata:t,Session:n,ClientId:c,UserContextData:u})}async function em(e,t,n,o,i){let{userPoolClientId:r,userPoolId:s,userPoolEndpoint:c}=o,l={USERNAME:e,PASSWORD:t},d=await i.getDeviceMetadata(e);d&&d.deviceKey&&(l.DEVICE_KEY=d.deviceKey);let u=(0,et.u)({username:e,userPoolId:s,userPoolClientId:r}),p=(0,x.N)({endpointResolver:(0,P.e)({endpointOverride:c})}),E=await p({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.SignIn)},{AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:l,ClientMetadata:n,ClientId:r,UserContextData:u}),m=E.ChallengeParameters?.USERNAME??E.ChallengeParameters?.USER_ID_FOR_SRP??e;return((0,en.r)(m),"DEVICE_SRP_AUTH"===E.ChallengeName)?(0,ec.z)({username:m,config:o,clientMetadata:n,session:E.Session,tokenOrchestrator:i}):E}async function eg(e,t,n,o,i){return(0,Q.h)({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:i,authFlow:"USER_SRP_AUTH"})}async function eh(e,t,n,o){let{userPoolClientId:i,userPoolId:r,userPoolEndpoint:s}=n,c={USERNAME:e},l=await o.getDeviceMetadata(e);l&&l.deviceKey&&(c.DEVICE_KEY=l.deviceKey);let d=(0,et.u)({username:e,userPoolId:r,userPoolClientId:i}),u=(0,x.N)({endpointResolver:(0,P.e)({endpointOverride:s})}),p=await u({region:(0,N.y)(r),userAgentValue:(0,h.W)(a.g4.SignIn)},{AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:t,ClientId:i,UserContextData:d}),E=p.ChallengeParameters?.USERNAME??e;return((0,en.r)(E),"DEVICE_SRP_AUTH"===p.ChallengeName)?(0,ec.z)({username:E,config:n,clientMetadata:t,session:p.Session,tokenOrchestrator:o}):p}async function ex(e,t,n,o,i){(0,s.FG)(o);let{userPoolId:r,userPoolClientId:c,userPoolEndpoint:l}=o,d=r?.split("_")[1]||"",u=await (0,ei.d)(d),p={USERNAME:e,SRP_A:u.A.toString(16),CHALLENGE_NAME:"SRP_A"},E=(0,et.u)({username:e,userPoolId:r,userPoolClientId:c}),m=(0,x.N)({endpointResolver:(0,P.e)({endpointOverride:l})}),{ChallengeParameters:g,Session:S}=await m({region:(0,N.y)(r),userAgentValue:(0,h.W)(a.g4.SignIn)},{AuthFlow:"CUSTOM_AUTH",AuthParameters:p,ClientMetadata:n,ClientId:c,UserContextData:E}),f=g?.USERNAME??e;return(0,en.r)(f),(0,er.H)(ea.i,[t,g,n,S,u,o,i],f,i)}async function eS(e){var t;let{challengeName:n,challengeParameters:o,availableChallenges:i}=e,a=r.d.getConfig().Auth?.Cognito;switch((0,s.FG)(a),n){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:o}};case"MFA_SETUP":{let{signInSession:e,username:t}=U.signInStore.getState(),n=eR(eC(o.MFAS_CAN_SETUP))||[],i=n.filter(e=>"EMAIL"===e||"TOTP"===e),r=i.includes("TOTP"),s=i.includes("EMAIL");if(r&&s)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:i}};if(s)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(r){let n=v({endpointResolver:(0,P.e)({endpointOverride:a.userPoolEndpoint})}),{Session:o,SecretCode:i}=await n({region:(0,N.y)(a.userPoolId)},{Session:e});return U.signInStore.dispatch({type:"SET_SIGN_IN_SESSION",value:o}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:{sharedSecret:i,getSetupUri:(e,n)=>{let o=`otpauth://totp/${e}:${n??t}?secret=${i}&issuer=${e}`;return new c.a(o)}}}}}throw new l.l({name:u.kq.SignInException,message:`Cannot initiate MFA setup from available types: ${n}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:(t=o.requiredAttributes)?JSON.parse(t).map(e=>e.includes(el)?e.replace(el,""):e):[]}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:eR(eC(o.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:o.CODE_DELIVERY_DELIVERY_MEDIUM,destination:o.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:o.CODE_DELIVERY_DELIVERY_MEDIUM,destination:o.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":{let e=await J(o);if("isSignedIn"in e&&"nextStep"in e)return e;return eS(e)}case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:i}}}throw new l.l({name:u.kq.SignInException,message:`An error occurred during the sign in process. ${n} challengeName returned by the underlying service was not addressed.`})}function ef(e){return e===d.OK.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===d.OK.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}async function eI(e,t,n,o,i,r,a,s){let c=s?.userAttributes,d=s?.friendlyDeviceName;switch(t){case"WEB_AUTHN":case"SELECT_CHALLENGE":if("PASSWORD_SRP"===o||"PASSWORD"===o)return{ChallengeName:o,Session:n,$metadata:{}};return ee({username:e,session:n,selectedChallenge:o,config:i,clientMetadata:a});case"SELECT_MFA_TYPE":return ep({challengeResponse:o,clientMetadata:a,session:n,username:e,config:i});case"MFA_SETUP":return eu({challengeResponse:o,clientMetadata:a,session:n,username:e,deviceName:d,config:i});case"NEW_PASSWORD_REQUIRED":return eE({challengeResponse:o,clientMetadata:a,session:n,username:e,requiredAttributes:c,config:i});case"CUSTOM_CHALLENGE":return(0,er.H)(ed,[{challengeResponse:o,clientMetadata:a,session:n,username:e,config:i,tokenOrchestrator:r}],e,r);case"SMS_MFA":case"SOFTWARE_TOKEN_MFA":case"SMS_OTP":case"EMAIL_OTP":return eP({challengeName:t,challengeResponse:o,clientMetadata:a,session:n,username:e,config:i});case"PASSWORD":return eo(e,o,a,i,n);case"PASSWORD_SRP":return es(e,o,a,i,n,r)}throw new l.l({name:u.kq.SignInException,message:`An error occurred during the sign in process.
		${t} challengeName returned by the underlying service was not addressed.`})}function ey(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":"EMAIL_OTP"===e?"EMAIL":void 0}function eR(e){if(e)return e.map(ey).filter(Boolean)}function eC(e){return e?JSON.parse(e):[]}async function eA(){let e;try{e=await (0,g.t)()}catch(e){}if(e&&e.userId&&e.username)throw new l.l({name:m.EU,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}function ev(e){return U.signInStore.getState().username??e}async function eP({challengeName:e,challengeResponse:t,clientMetadata:n,session:o,username:i,config:r}){let{userPoolId:s,userPoolClientId:c,userPoolEndpoint:l}=r,d={USERNAME:i};"EMAIL_OTP"===e&&(d.EMAIL_OTP_CODE=t),"SMS_MFA"===e&&(d.SMS_MFA_CODE=t),"SMS_OTP"===e&&(d.SMS_OTP_CODE=t),"SOFTWARE_TOKEN_MFA"===e&&(d.SOFTWARE_TOKEN_MFA_CODE=t);let u=(0,et.u)({username:i,userPoolId:s,userPoolClientId:c});return(0,S.u)({endpointResolver:(0,P.e)({endpointOverride:l})})({region:(0,N.y)(s),userAgentValue:(0,h.W)(a.g4.ConfirmSignIn)},{ChallengeName:e,ChallengeResponses:d,Session:o,ClientMetadata:n,ClientId:c,UserContextData:u})}},6963:function(e,t,n){let o,i,r;function a(e,t){null!=e&&this.fromString(e,t)}function s(){return new a(null,null)}n.d(t,{Z:function(){return a}});let c="undefined"!=typeof navigator;c&&"Microsoft Internet Explorer"===navigator.appName?(a.prototype.am=function(e,t,n,o,i,r){let a=32767&t,s=t>>15;for(;--r>=0;){let t=32767&this[e],r=this[e++]>>15,c=s*t+r*a;i=((t=a*t+((32767&c)<<15)+n[o]+(1073741823&i))>>>30)+(c>>>15)+s*r+(i>>>30),n[o++]=1073741823&t}return i},o=30):c&&"Netscape"!==navigator.appName?(a.prototype.am=function(e,t,n,o,i,r){for(;--r>=0;){let r=t*this[e++]+n[o]+i;i=Math.floor(r/67108864),n[o++]=67108863&r}return i},o=26):(a.prototype.am=function(e,t,n,o,i,r){let a=16383&t,s=t>>14;for(;--r>=0;){let t=16383&this[e],r=this[e++]>>14,c=s*t+r*a;i=((t=a*t+((16383&c)<<14)+n[o]+i)>>28)+(c>>14)+s*r,n[o++]=268435455&t}return i},o=28),a.prototype.DB=o,a.prototype.DM=(1<<o)-1,a.prototype.DV=1<<o,a.prototype.FV=4503599627370496,a.prototype.F1=52-o,a.prototype.F2=2*o-52;let l=[];for(r=0,i=48;r<=9;++r)l[i++]=r;for(r=10,i=97;r<36;++r)l[i++]=r;for(r=10,i=65;r<36;++r)l[i++]=r;function d(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function u(e){let t=s();return t.fromInt(e),t}function p(e){let t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function E(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}E.prototype.convert=function(e){let t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t},E.prototype.revert=function(e){let t=s();return e.copyTo(t),this.reduce(t),t},E.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=32767&e[t],o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},E.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},a.prototype.copyTo=function(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},a.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},a.prototype.fromString=function(e,t){let n;if(16===t)n=4;else if(8===t)n=3;else if(2===t)n=1;else if(32===t)n=5;else if(4===t)n=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,i=!1,r=0;for(;--o>=0;){let t=function(e,t){let n=l[e.charCodeAt(t)];return null==n?-1:n}(e,o);if(t<0){"-"===e.charAt(o)&&(i=!0);continue}i=!1,0===r?this[this.t++]=t:r+n>this.DB?(this[this.t-1]|=(t&(1<<this.DB-r)-1)<<r,this[this.t++]=t>>this.DB-r):this[this.t-1]|=t<<r,(r+=n)>=this.DB&&(r-=this.DB)}this.clamp(),i&&a.ZERO.subTo(this,this)},a.prototype.clamp=function(){let e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t},a.prototype.dlShiftTo=function(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},a.prototype.drShiftTo=function(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},a.prototype.lShiftTo=function(e,t){let n;let o=e%this.DB,i=this.DB-o,r=(1<<i)-1,a=Math.floor(e/this.DB),s=this.s<<o&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>i|s,s=(this[n]&r)<<o;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},a.prototype.rShiftTo=function(e,t){t.s=this.s;let n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}let o=e%this.DB,i=this.DB-o,r=(1<<o)-1;t[0]=this[n]>>o;for(let e=n+1;e<this.t;++e)t[e-n-1]|=(this[e]&r)<<i,t[e-n]=this[e]>>o;o>0&&(t[this.t-n-1]|=(this.s&r)<<i),t.t=this.t-n,t.clamp()},a.prototype.subTo=function(e,t){let n=0,o=0,i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()},a.prototype.multiplyTo=function(e,t){let n=this.abs(),o=e.abs(),i=n.t;for(t.t=i+o.t;--i>=0;)t[i]=0;for(i=0;i<o.t;++i)t[i+n.t]=n.am(0,o[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&a.ZERO.subTo(t,t)},a.prototype.squareTo=function(e){let t=this.abs(),n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){let o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},a.prototype.divRemTo=function(e,t,n){let o=e.abs();if(o.t<=0)return;let i=this.abs();if(i.t<o.t){null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);return}null===n&&(n=s());let r=s(),c=this.s,l=e.s,d=this.DB-p(o[o.t-1]);d>0?(o.lShiftTo(d,r),i.lShiftTo(d,n)):(o.copyTo(r),i.copyTo(n));let u=r.t,E=r[u-1];if(0===E)return;let m=E*(1<<this.F1)+(u>1?r[u-2]>>this.F2:0),g=this.FV/m,h=(1<<this.F1)/m,x=1<<this.F2,S=n.t,f=S-u,I=null===t?s():t;for(r.dlShiftTo(f,I),n.compareTo(I)>=0&&(n[n.t++]=1,n.subTo(I,n)),a.ONE.dlShiftTo(u,I),I.subTo(r,r);r.t<u;)r[r.t++]=0;for(;--f>=0;){let e=n[--S]===E?this.DM:Math.floor(n[S]*g+(n[S-1]+x)*h);if((n[S]+=r.am(0,e,n,f,0,u))<e)for(r.dlShiftTo(f,I),n.subTo(I,n);n[S]<--e;)n.subTo(I,n)}null!==t&&(n.drShiftTo(u,t),c!==l&&a.ZERO.subTo(t,t)),n.t=u,n.clamp(),d>0&&n.rShiftTo(d,n),c<0&&a.ZERO.subTo(n,n)},a.prototype.invDigit=function(){if(this.t<1)return 0;let e=this[0];if((1&e)==0)return 0;let t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},a.prototype.addTo=function(e,t){let n=0,o=0,i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()},a.prototype.toString=function(e){let t,n;if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else if(4===e)t=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");let o=(1<<t)-1,i=!1,r="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,r=d(n));a>=0;)s<t?n=(this[a]&(1<<s)-1)<<t-s|this[--a]>>(s+=this.DB-t):(n=this[a]>>(s-=t)&o,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(r+=d(n));return i?r:"0"},a.prototype.negate=function(){let e=s();return a.ZERO.subTo(this,e),e},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(e){let t=this.s-e.s;if(0!=t)return t;let n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)},a.prototype.mod=function(e){let t=s();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t},a.prototype.equals=function(e){return 0===this.compareTo(e)},a.prototype.add=function(e){let t=s();return this.addTo(e,t),t},a.prototype.subtract=function(e){let t=s();return this.subTo(e,t),t},a.prototype.multiply=function(e){let t=s();return this.multiplyTo(e,t),t},a.prototype.divide=function(e){let t=s();return this.divRemTo(e,t,null),t},a.prototype.modPow=function(e,t,n){let o,i,r,a=e.bitLength(),c=u(1),l=new E(t);if(a<=0)return c;let d=[],m=3,g=(o=a<18?1:a<48?3:a<144?4:a<768?5:6)-1,h=(1<<o)-1;if(d[1]=l.convert(this),o>1){let e=s();for(l.sqrTo(d[1],e);m<=h;)d[m]=s(),l.mulTo(e,d[m-2],d[m]),m+=2}let x=e.t-1,S=!0,f=s();for(a=p(e[x])-1;x>=0;){for(a>=g?i=e[x]>>a-g&h:(i=(e[x]&(1<<a+1)-1)<<g-a,x>0&&(i|=e[x-1]>>this.DB+a-g)),m=o;(1&i)==0;)i>>=1,--m;if((a-=m)<0&&(a+=this.DB,--x),S)d[i].copyTo(c),S=!1;else{for(;m>1;)l.sqrTo(c,f),l.sqrTo(f,c),m-=2;m>0?l.sqrTo(c,f):(r=c,c=f,f=r),l.mulTo(f,d[i],c)}for(;x>=0&&(e[x]&1<<a)==0;)l.sqrTo(c,f),r=c,c=f,f=r,--a<0&&(a=this.DB-1,--x)}let I=l.revert(c);return n(null,I),I},a.ZERO=u(0),a.ONE=u(1)},2447:function(e,t,n){n.d(t,{$v:function(){return o},H3:function(){return r},rt:function(){return i}});let o="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",i={},r={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),i[e]=t,r[t]=e}},105:function(e,t,n){n.d(t,{d:function(){return A}});var o=n(4686),i=n(7891),r=n(6963);let a=async({a:e,g:t,k:n,x:o,B:i,N:r,U:a})=>new Promise((s,c)=>{t.modPow(o,r,(t,l)=>{if(t){c(t);return}i.subtract(n.multiply(l)).modPow(e.add(a.multiply(o)),r,(e,t)=>{if(e){c(e);return}s(t.mod(r))})})});var s=n(3019),c=n(5169),l=n(2447);let d=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=l.rt[e[n]];return t},u=e=>{let t=new c.f;t.update(e);let n=d(t.digestSync());return Array(64-n.length).join("0")+n},p=e=>u((0,s.z)(e)),E=/^[89a-f]/i,m=e=>{if(!(e instanceof r.Z))throw Error("Not a BigInteger");let t=0>e.compareTo(r.Z.ZERO),n=e.abs().toString(16);if(n=n.length%2!=0?`0${n}`:n,n=E.test(n)?`00${n}`:n,t){let e=n.split("").map(e=>{let t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)}).join("");(n=new r.Z(e,16).add(r.Z.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},g=({A:e,B:t})=>{let n=new r.Z(p(m(e)+m(t)),16);if(n.equals(r.Z.ZERO))throw Error("U cannot be zero.");return n},h=(e,t,n)=>{let o=new c.f(t);o.update(e);let i=o.digestSync(),r=new c.f(i);return r.update(n),r.digestSync().slice(0,16)};var x=n(4477);class S{constructor(e,t){this.words=[];let n=e;n=this.words=n||[],void 0!==t?this.sigBytes=t:this.sigBytes=4*n.length}random(e){let t=[];for(let n=0;n<e;n+=4)t.push((0,x.MX)().getRandomValues(new Uint32Array(1))[0]);return new S(t,e)}toString(){return function(e){let{words:t}=e,{sigBytes:n}=e,o=[];for(let e=0;e<n;e++){let n=t[e>>>2]>>>24-e%4*8&255;o.push((n>>>4).toString(16)),o.push((15&n).toString(16))}return o.join("")}(this)}}let f=e=>{let t=new S().random(e).toString();return(0,s.z)(t)};var I=n(1698);let y=()=>I.u.convert(f(40));class R{constructor({userPoolName:e,a:t,g:n,A:o,N:a}){this.encoder=i.o,this.userPoolName=e,this.a=t,this.g=n,this.A=o,this.N=a,this.k=new r.Z(p(`${m(a)}${m(n)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new o.l({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new o.l({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new o.l({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,t){this.randomPassword=y();let n=u(`${e}${t}:${this.randomPassword}`),o=d(f(16));return this.saltToHashDevices=m(new r.Z(o,16)),new Promise((e,t)=>{this.g.modPow(new r.Z(p(this.saltToHashDevices+n),16),this.N,(n,o)=>{if(n){t(n);return}this.verifierDevices=m(o),e()})})}async getPasswordAuthenticationKey({username:e,password:t,serverBValue:n,salt:o}){if(n.mod(this.N).equals(r.Z.ZERO))throw Error("B cannot be zero.");let i=g({A:this.A,B:n}),c=u(`${this.userPoolName}${e}:${t}`),l=new r.Z(p(m(o)+c),16),d=await a({a:this.a,g:this.g,k:this.k,x:l,B:n,N:this.N,U:i}),E=this.encoder.convert("Caldera Derived Key"),x=this.encoder.convert("\x01"),S=new Uint8Array(E.byteLength+x.byteLength);return S.set(E,0),S.set(x,E.byteLength),h((0,s.z)(m(d)),(0,s.z)(m(i)),S)}}let C=async({a:e,g:t,N:n})=>new Promise((o,i)=>{t.modPow(e,n,(e,t)=>{if(e){i(e);return}if(t.mod(n).equals(r.Z.ZERO)){i(Error("Illegal parameter. A mod N cannot be 0."));return}o(t)})}),A=async e=>{let t=new r.Z(l.$v,16),n=new r.Z("2",16),o=v(),i=await C({a:o,g:n,N:t});return new R({userPoolName:e,a:o,g:n,A:i,N:t})},v=()=>{let e=d(f(128));return new r.Z(e,16)}},3019:function(e,t,n){n.d(t,{z:function(){return i}});var o=n(2447);let i=e=>{if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){let i=e.slice(n,n+2).toLowerCase();if(i in o.H3)t[n/2]=o.H3[i];else throw Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return t}},393:function(e,t,n){n.d(t,{H:function(){return r}});let o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=()=>{let e=new Date,t=i[e.getUTCDay()],n=o[e.getUTCMonth()],r=e.getUTCDate(),a=e.getUTCHours();a<10&&(a=`0${a}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let c=e.getUTCSeconds();c<10&&(c=`0${c}`);let l=e.getUTCFullYear();return`${t} ${n} ${r} ${a}:${s}:${c} UTC ${l}`}},2675:function(e,t,n){n.d(t,{i:function(){return s}});var o=n(5169),i=n(1698),r=n(905),a=n(7891);let s=({userPoolName:e,username:t,challengeParameters:n,dateNow:r,hkdf:s})=>{let l=a.o.convert(e),d=a.o.convert(t),u=c(n.SECRET_BLOCK),p=a.o.convert(r),E=new Uint8Array(l.byteLength+d.byteLength+u.byteLength+p.byteLength);E.set(l,0),E.set(d,l.byteLength),E.set(u,l.byteLength+d.byteLength),E.set(p,l.byteLength+d.byteLength+u.byteLength);let m=new o.f(s);m.update(E);let g=m.digestSync();return i.u.convert(g)},c=e=>{let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=r.$.convert(n),i=new Uint8Array(o.length);for(let e=0;e<o.length;++e)i[e]=o.charCodeAt(e);return i}},7891:function(e,t,n){n.d(t,{o:function(){return o}});let o={convert:e=>new TextEncoder().encode(e)}},8357:function(e,t,n){n.d(t,{W:function(){return r}});var o=n(1847),i=n(5);let r=(e,t)=>(0,o.Zm)({category:i.WD.Auth,action:e,...t})}}]);