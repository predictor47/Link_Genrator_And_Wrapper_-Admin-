(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{6361:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});let r={},i={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),r[e]=t,i[t]=e}function o(e){let t="";for(let n=0;n<e.byteLength;n++)t+=r[e[n]];return t}},5169:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var r=n(7582),i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s=function(){function e(){this.state=Int32Array.from(o),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>9007199254740991)throw Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%64>=56){for(var r=this.bufferLength;r<64;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(var r=this.bufferLength;r<56;r++)t.setUint8(r,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(32),r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],d=0;d<64;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var h=this.temp[d-2],p=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,f=((h=this.temp[d-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[d]=(p+this.temp[d-7]|0)+(f+this.temp[d-16]|0)}var y=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(l+(i[d]+this.temp[d]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&o^r&o)|0;l=u,u=c,c=a,a=s+y|0,s=o,o=r,r=n,n=y+g|0}t[0]+=n,t[1]+=r,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=l},e}(),a=n(8764).lW,c=void 0!==a&&a.from?function(e){return a.from(e,"utf8")}:e=>new TextEncoder().encode(e);function u(e){return e instanceof Uint8Array?e:"string"==typeof e?c(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var l=function(){function e(e){this.secret=e,this.hash=new s,this.reset()}return e.prototype.update=function(e){if(("string"==typeof e?0!==e.length:0!==e.byteLength)&&!this.error)try{this.hash.update(u(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,r.mG)(this,void 0,void 0,function(){return(0,r.Jh)(this,function(e){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new s,this.secret){this.outer=new s;var e=function(e){var t=u(e);if(t.byteLength>64){var n=new s;n.update(t),t=n.digest()}var r=new Uint8Array(64);return r.set(t),r}(this.secret),t=new Uint8Array(64);t.set(e);for(var n=0;n<64;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(var n=0;n<e.byteLength;n++)e[n]=0}},e}()},1163:function(e,t,n){e.exports=n(3079)},6164:function(e,t,n){"use strict";n.d(t,{d:function(){return iu}});var r,i,o,s,a,c,u,l,d,h,p,f,y,g,m,v,b,S,E,I,w,T=n(305);function A(e){return"function"==typeof e}function k(e){return function(t){if(A(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}Symbol();var N=n(7582),O=((r=function(e){Error.call(e),e.stack=Error().stack},i=function(e){r(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),i.prototype.constructor=i,i);function C(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var _=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,r,i,o=this._parentage;if(o){if(this._parentage=null,Array.isArray(o))try{for(var s=(0,N.XA)(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this)}var c=this.initialTeardown;if(A(c))try{c()}catch(e){i=e instanceof O?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=(0,N.XA)(u),d=l.next();!d.done;d=l.next()){var h=d.value;try{D(h)}catch(e){i=null!=i?i:[],e instanceof O?i=(0,N.ev)((0,N.ev)([],(0,N.CR)(i)),(0,N.CR)(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new O(i)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)D(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&C(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&C(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function x(e){return e instanceof _||e&&"closed"in e&&A(e.remove)&&A(e.add)&&A(e.unsubscribe)}function D(e){A(e)?e():e.unsubscribe()}_.EMPTY;var R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},P={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=P.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,N.ev)([e,t],(0,N.CR)(n))):setTimeout.apply(void 0,(0,N.ev)([e,t],(0,N.CR)(n)))},clearTimeout:function(e){var t=P.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function L(e){P.setTimeout(function(){var t=R.onUnhandledError;if(t)t(e);else throw e})}function M(){}var U=F("C",void 0,void 0);function F(e,t,n){return{kind:e,value:t,error:n}}var j=null,K=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,x(t)&&t.add(n)):n.destination=Q,n}return(0,N.ZT)(t,e),t.create=function(e,t,n){return new B(e,t,n)},t.prototype.next=function(e){this.isStopped?W(F("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?W(F("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?W(U,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(_),V=Function.prototype.bind;function $(e,t){return V.call(e,t)}var G=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){q(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){q(e)}else q(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){q(e)}},e}(),B=function(e){function t(t,n,r){var i,o,s=e.call(this)||this;return A(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&R.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&$(t.next,o),error:t.error&&$(t.error,o),complete:t.complete&&$(t.complete,o)}):i=t,s.destination=new G(i),s}return(0,N.ZT)(t,e),t}(K);function q(e){R.useDeprecatedSynchronousErrorHandling?R.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=e):L(e)}function W(e,t){var n=R.onStoppedNotification;n&&P.setTimeout(function(){return n(e,t)})}var Q={closed:!0,next:M,error:function(e){throw e},complete:M};function z(e,t,n,r,i){return new J(e,t,n,r,i)}var J=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,N.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(K);function Y(e,t){return k(function(n,r){var i,o,s,a=0;n.subscribe(new J(r,function(n){r.next(e.call(t,n,a++))},void 0,void 0,void 0))})}function H(e){let t=new Set;for(let n of e.attributes||[]){if(n?.type==="auth"&&"object"==typeof n?.properties&&Array.isArray(n?.properties?.rules)&&(n?.properties?.rules).every(e=>!!e.allow))for(let e of n.properties.rules)"owner"===e.allow?t.add(e.ownerField||"owner"):"groups"===e.allow&&void 0!==e.groupsField&&t.add(e.groupsField)}return Array.from(t)}function X(e){return`${e[0].toUpperCase()}${e.slice(1)}`}function Z(e){let t,n;let r=new Promise((e,r)=>{t=e,n=r});return e(r).then(e=>{t(e)}).catch(e=>{n(e)}),r}let ee=new WeakMap;function et(e,t){return ee.set(t,e),e.finally(()=>{ee.delete(t)})}let en={HAS_ONE:"HAS_ONE",HAS_MANY:"HAS_MANY",BELONGS_TO:"BELONGS_TO"},er={ID:"ID",String:"String",AWSDate:"String",AWSTime:"String",AWSDateTime:"String",AWSTimestamp:"Int",AWSEmail:"String",AWSPhone:"String",AWSURL:"String",AWSIPAddress:"String",AWSJSON:"String",Boolean:"Boolean",Int:"Int",Float:"Float"},ei=e=>1===e.length?e[0]:e.reduce((e,t,n)=>0===n?t:e+X(t),""),eo=(e,t,n)=>{if(!n)return null;let r={};for(let[i,o]of Object.entries(n)){let n=t?e.models[t]?.fields[i]:void 0,s={fieldDef:n,value:o};"object"==typeof s.fieldDef?.type&&"model"in s.fieldDef.type&&"string"==typeof s.fieldDef.type.model&&s.fieldDef.isArray&&Array.isArray(s.value?.items)?r[i]=s.value.items.map(t=>eo(e,s.fieldDef.type.model,t)):"object"==typeof n?.type&&"model"in n.type&&"string"==typeof n.type.model?r[i]=eo(e,n.type.model,o):r[i]=o}return r};function es(e,t,n,r,i,o,s=!1){let a=r.models[t],c=a.fields,u=Object.entries(c).filter(([e,t])=>t?.type?.model!==void 0).map(([e])=>e);return n.map(t=>{if(null==t)return t;let n={};for(let l of u){let u=c[l],d=(u?.type).model,h=r.models[d],p=h.primaryKeyInfo.primaryKeyFieldName,f=h.primaryKeyInfo.sortKeyFieldNames,y=u.association?.connectionType,g=[];u.association&&"associatedWith"in u.association&&(g=u.association.associatedWith);let m=[];switch(u.association&&"targetNames"in u.association&&m.push(...u.association.targetNames),y){case en.BELONGS_TO:{let r=f.reduce((e,n)=>(t[n]&&(e[n]=t[n]),e),{});if(e.models[d]?.get===void 0)break;s?n[l]=(n,s)=>t[m[0]]?e.models[d].get(n,{[p]:t[m[0]],...r},{authMode:s?.authMode||i,authToken:s?.authToken||o}):{data:null}:n[l]=n=>t[m[0]]?e.models[d].get({[p]:t[m[0]],...r},{authMode:n?.authMode||i,authToken:n?.authToken||o}):{data:null};break}case en.HAS_ONE:case en.HAS_MANY:{let r=y===en.HAS_ONE?e=>({data:e?.data.shift()||null,errors:e.errors,extensions:e.extensions}):e=>e,c=a.primaryKeyInfo.primaryKeyFieldName,u=a.primaryKeyInfo.sortKeyFieldNames,p=h.fields[g[0]];if(p.type.model){let a=[];p.association&&"targetNames"in p.association&&(a=p.association?.targetNames);let h=a.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(e.models[d]?.list===void 0)break;s?n[l]=(n,s)=>t[c]?Z(async t=>{let a=et(e.models[d].list(n,{filter:{and:h},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n[l]=n=>t[c]?Z(async t=>{let s=et(e.models[d].list({filter:{and:h},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[];break}let f=g.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(e.models[d]?.list===void 0)break;s?n[l]=(n,s)=>t[c]?Z(async t=>{let a=et(e.models[d].list(n,{filter:{and:f},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n[l]=n=>t[c]?Z(async t=>{let s=et(e.models[d].list({filter:{and:f},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[]}}}return{...t,...n}})}let ea={CREATE:{operationPrefix:"create",usePlural:!1},GET:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVEQUERY:{operationPrefix:"observeQuery",usePlural:!1}},ec=(e,t)=>{let{fields:n}=e;return Object.fromEntries(Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum?[n,el]:"string"==typeof e.nonModel?[n,ec(t.nonModels[e.nonModel],t)]:"string"==typeof e?[n,el]:void 0).filter(e=>void 0!==e))},eu=(e,t)=>{let{fields:n}=e,r=Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum||"string"==typeof e?[n,el]:"string"==typeof e.nonModel?[n,ec(t.nonModels[e.nonModel],t)]:void 0).filter(e=>void 0!==e),i=H(e).map(e=>[e,el]);return Object.fromEntries(r.concat(i))},el="";function ed(e){let t=[];return Object.entries(e).forEach(([e,n])=>{n===el?t.push(e):"object"==typeof n&&null!==n&&(n?.items?t.push(e,"{","items","{",ed(n.items),"}","}"):t.push(e,"{",ed(n),"}"))}),t.join(" ")}function eh(e,t,n){let r=e.models[t];return ed(function(e,t,n){let r=(t,n)=>{let[i,...o]=t.split("."),s=o[0],a=e.models[n]??e.nonModels[n],c=a?.fields,u=c?.[i]?.type?.model,l=e.models[u],d=c?.[i]?.type?.nonModel,h=e.nonModels[d],p=l?"model":h?"nonModel":"field";if("nonModel"===p){if(!s)throw Error(`${i} must declare a wildcard (*) or a field of custom type ${d}`);return"*"===s?{[i]:ec(h,e)}:{[i]:r(o.join("."),d)}}if("model"===p){let t={};if(!s)throw Error(`${i} must declare a wildcard (*) or a field of model ${u}`);return t="*"===s?{[i]:eu(e.models[u],e)}:{[i]:r(o.join("."),u)},c[i]?.isArray&&(t={[i]:{items:t[i]}}),t}{let t=c?.[i],r=e.nonModels[n],o=r?.fields?.[i];if(r){if(!o)throw Error(`${i} is not a field of custom type ${n}`)}else{let e=H(a).includes(i);if(!t&&!e)throw Error(`${i} is not a field of model ${n}`)}return{[i]:el}}};return n.reduce((e,n)=>(function e(t,n){let r=e=>e&&"object"==typeof e;for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(n,i)&&r(n[i])?e(t[i],n[i]):n[i]=t[i]);return n})(r(n,t),e),{})}(e,t,n??function(e){let{fields:t}=e,n=Object.values(t).map(({type:e,name:t})=>{if("string"==typeof e)return t;if("object"==typeof e){if("string"==typeof e?.enum)return t;if("string"==typeof e?.nonModel)return`${t}.*`}}).filter(Boolean),r=H(e);return Array.from(new Set(n.concat(r)))}(r)))}function ep(e,t,n,r,i){let o,s,a,c,u;let{name:l,pluralName:d,fields:h,primaryKeyInfo:{isCustomPrimaryKey:p,primaryKeyFieldName:f,sortKeyFieldNames:y},attributes:g}=t,m=l.charAt(0).toUpperCase()+l.slice(1),v=d.charAt(0).toUpperCase()+d.slice(1),{operationPrefix:b,usePlural:S}=ea[n],{selectionSet:E}=r||{};if(b)o=`${b}${S?v:m}`;else if(i){let{queryField:e,pk:t,sk:n=[]}=i;o=e;let r={};if(1===n.length){let[e]=n,t=er["string"==typeof h[e].type?h[e].type:"String"];r={[e]:`Model${t}KeyConditionInput`}}else if(n.length>1){let t=ei(n),i=g?.find(t=>t?.properties?.queryField===e)?.properties?.name;r={[t]:`Model${X(l)}${X(i)}CompositeKeyConditionInput`}}s={[t]:`${Object.prototype.hasOwnProperty.call(h[t].type,"enum")?h[t].type.enum:h[t].type}!`,...r}}else throw Error("Error generating GraphQL Document - invalid operation name");let I=eh(e,l,E),w={[f]:`${h[f].type}!`},T={},A=e=>{if(0===y.length)return{};if("get"===e)return y.reduce((t,n)=>{let r=h[n].type;return"get"===e&&(t[n]=`${r}!`),t},{});if(1!==y.length)return{[ei(y)]:`Model${X(l)}PrimaryCompositeKeyConditionInput`};{let[e]=y,t=er["string"==typeof h[e].type?h[e].type:"String"];return{[e]:`Model${t}KeyConditionInput`}}};switch(p&&(Object.assign(w,A("get")),Object.assign(T,{[f]:`${h[f].type}`,sortDirection:"ModelSortDirection"},A("list"))),n){case"CREATE":case"UPDATE":case"DELETE":u??(u={input:`${b.charAt(0).toLocaleUpperCase()+b.slice(1)}${m}Input!`}),a??(a="mutation");case"GET":u??(u=w),c??(c=I);case"LIST":u??(u={...T,filter:`Model${m}FilterInput`,limit:"Int",nextToken:"String"}),a??(a="query"),c??(c=`items { ${I} } nextToken __typename`);case"INDEX_QUERY":u??(u={...s,filter:`Model${m}FilterInput`,sortDirection:"ModelSortDirection",limit:"Int",nextToken:"String"}),a??(a="query"),c??(c=`items { ${I} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":u??(u={filter:`ModelSubscription${m}FilterInput`}),a??(a="subscription"),c??(c=I);break;default:throw Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${a}${u?`(${Object.entries(u).map(([e,t])=>`$${e}: ${t}`)})`:""} { ${o}${u?`(${Object.keys(u).map(e=>`${e}: $${e}`)})`:""} { ${c} } }`}function ef(e,t,n,r,i){let{fields:o,primaryKeyInfo:{isCustomPrimaryKey:s,primaryKeyFieldName:a,sortKeyFieldNames:c}}=e,u=c?.length&&ei(c),l={};switch(t){case"CREATE":l={input:n?ey(n,e,r):{}};break;case"UPDATE":l={input:n?Object.fromEntries(Object.entries(ey(n,e,r)).filter(([t])=>o[t]?!o[t].isReadOnly:!H(e).includes(t))):{}};break;case"GET":case"DELETE":n&&(l=s?[a,...c].reduce((e,t)=>(e[t]=n[t],e),{}):{[a]:n[a]}),"DELETE"===t&&(l={input:l});break;case"LIST":n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n&&n[a]&&(l[a]=n[a]),u&&n&&n[u]&&(l[u]=n[u]),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break;case"INDEX_QUERY":{let{pk:e,sk:t=[]}=i,r=t?.length&&ei(t);l[e]=n[e],r&&n&&n[r]&&(l[r]=n[r]),n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break}case"ONCREATE":case"ONUPDATE":case"ONDELETE":n?.filter&&(l={filter:n.filter});break;case"OBSERVEQUERY":throw Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:throw Error(`Unhandled operation case: ${t}`)}return l}function ey(e,t,n){let{fields:r}=t,i={};return Object.entries(e).forEach(([e,t])=>{let o=r[e]?.type,s=o?.model;if(s){let o=r[e]?.association,a=n.models[s].primaryKeyInfo;o?.connectionType===en.HAS_ONE&&o.targetNames.forEach((e,n)=>{let r=o.associatedWith[n];i[e]=t[r]}),o?.connectionType===en.BELONGS_TO&&o.targetNames.forEach((e,n)=>{if(0===n){let n=a.primaryKeyFieldName;i[e]=t[n]}else{let r=a.sortKeyFieldNames[n-1];i[e]=t[r]}})}else i[e]=t}),i}function eg(e,t,n={}){let r=t(e);return{authMode:n.authMode||r.authMode,authToken:n.authToken||r.authToken}}function em(e,t,n){let r=t(e).headers||{};return n&&(r=n),r}function ev(e){if(e?.errors)return{...e,data:[]};throw e}function eb(e){if(e.errors)return{...e,data:null};throw e}let eS=Symbol("INTERNAL_USER_AGENT_OVERRIDE");(o=f||(f={})).CreateConversation="1",o.GetConversation="2",o.ListConversations="3",o.DeleteConversation="4",o.SendMessage="5",o.ListMessages="6",o.OnStreamEvent="7",o.Generation="8",o.UpdateConversation="9";let eE=e=>({category:"ai",action:e});function eI(e){return e?{[eS]:e}:void 0}let ew=e=>"symbol"==typeof e?.token?.value;function eT(e,t,n,r,i,o,s){let a=void 0!==r.arguments;return(...c)=>{var u,l;let d,h;let p=c[c.length-1];if(i){if(ew(c[0]))d=c[0];else throw Error(`Invalid first argument passed to ${r.name}. Expected contextSpec`)}return(a&&(h=i?c[1]:c[0]),"subscription"===n)?function(e,t,n,r,i,o,s){let{name:a}=n,c=eg(e,r,o),u=em(e,r,o?.headers),l=ek(n),d=eN(n),h=eO(t,n),p=eA(n.type,"model")?n.type.model:void 0,f=`
    ${"subscription".toLocaleLowerCase()}${l} {
      ${a}${d} ${h}
    }
  `,y=eC(n,i),g=eI(s);return e.graphql({...c,query:f,variables:y,...g},u).pipe(Y(n=>{let[r]=Object.keys(n.data),i=n.data[r],[o]=p?es(e,p,[i],t,c.authMode,c.authToken):[i];return o}))}(e,t,r,o,h,p,s):(u=h,l=d,Z(async i=>{let{name:a}=r,c=eg(e,o,p),d=em(e,o,p?.headers),h=ek(r),f=eN(r),y=eO(t,r),g=eA(r.type,"model")?r.type.model:void 0,m=`
    ${n.toLocaleLowerCase()}${h} {
      ${a}${f} ${y}
    }
  `,v=eC(r,u),b=eI(s);try{let n=l?e.graphql(l,{...c,query:m,variables:v},d):e.graphql({...c,query:m,variables:v,...b},d),r=et(n,i),{data:o,extensions:s}=await r;if(!o)return{data:null,extensions:s};{let[n]=Object.keys(o),r=Array.isArray(o[n]),i=r?o[n].filter(e=>e):o[n],a=g?es(e,g,r?i:[i],t,c.authMode,c.authToken,!!l):i;return{data:!r&&Array.isArray(a)?a.shift():a,extensions:s}}}catch(i){let{data:n,errors:r}=i;if(!n||0===Object.keys(n).length||!r)return eb(i);{let[o]=Object.keys(n),s=Array.isArray(n[o]),a=s?n[o].filter(e=>e):n[o];if(!a)return eb(i);{let n=g?es(e,g,s?a:[a],t,c.authMode,c.authToken,!!l):a;return{data:!s&&Array.isArray(n)?n.shift():n,errors:r}}}}}))}}function eA(e,t){return"string"==typeof e[t]}function ek(e){if(void 0===e.arguments)return"";let t=Object.entries(e.arguments).map(([e,t])=>{let n=function({type:e,isRequired:t}){let n=t?"!":"";return e instanceof Object&&"enum"in e?`${e.enum}${n}`:e instanceof Object&&"input"in e?`${e.input}${n}`:`${e}${n}`}(t),r=t.isArray?`[${n}]${t.isArrayNullable?"":"!"}`:n;return`$${e}: ${r}`}).join(", ");return t.length>0?`(${t})`:""}function eN(e){if(void 0===e.arguments)return"";let t=Object.keys(e.arguments).map(e=>`${e}: $${e}`).join(", ");return t.length>0?`(${t})`:""}function eO(e,t){if(eA(t,"type")||eA(t.type,"enum"))return"";if(eA(t.type,"nonModel")){let n=e.nonModels[t.type.nonModel];return`{${ed(ec(n,e))}}`}return eA(t.type,"model")?`{${eh(e,t.type.model)}}`:""}function eC(e,t={}){let n={};if(void 0===e.arguments)return n;for(let r of Object.values(e.arguments))if(void 0!==t[r.name])n[r.name]=t[r.name];else if(r.isRequired)throw Error(`${e.name} requires arguments '${r.name}'`);return n}let e_={queries:"query",mutations:"mutation",subscriptions:"subscription"};function ex(e,t,n,r){if(!t)return{};let i=t.modelIntrospection;if(!i)return{};let o=i[n];if(!o)return{};let s={},a=null===r(e).amplify;for(let t of Object.values(o))s[t.name]=eT(e,i,e_[n],t,a,r);return s}function eD(e,t,n,r,i,o=!1,s){return o?(o,a,c)=>eR(e,t,n,a,c,r,i,o,s):(o,a)=>eR(e,t,n,o,a,r,i,void 0,s)}function eR(e,t,n,r,i,o,s,a,c){return Z(async u=>{let{name:l}=n,d=ep(t,n,o,i),h=ef(n,o,r,t),p=eg(e,s,i),f=em(e,s,i?.headers),y=eI(c);try{let n=a?e.graphql(a,{...p,query:d,variables:h},f):e.graphql({...p,query:d,variables:h,...y},f),r=et(n,u),{data:o,extensions:s}=await r;if(!o)return{data:null,extensions:s};{let[n]=Object.keys(o),r=eo(t,l,o[n]);if(null===r)return{data:null,extensions:s};if(i?.selectionSet)return{data:r,extensions:s};{let[n]=es(e,l,[r],t,p.authMode,p.authToken,!!a);return{data:n,extensions:s}}}}catch(o){let{data:n,errors:r}=o;if(!n||0===Object.keys(n).length||!r)return eb(o);{let[s]=Object.keys(n),c=eo(t,l,n[s]);if(!c)return eb(o);if(i?.selectionSet)return{data:c,errors:r};{let[n]=es(e,l,[c],t,p.authMode,p.authToken,!!a);return{data:n,errors:r}}}}})}function eP(e,t,n,r,i=!1,o){return i?(i,s)=>eL(e,t,n,r,s,i,o):i=>eL(e,t,n,r,i,void 0,o)}function eL(e,t,n,r,i,o,s){return Z(async a=>{let{name:c}=n,u=ep(t,n,"LIST",i),l=ef(n,"LIST",i,t),d=eg(e,r,i),h=em(e,r,i?.headers),p=eI(s);try{let n=o?e.graphql(o,{...d,query:u,variables:l},h):e.graphql({...d,query:u,variables:l,...p},h),r=et(n,a),{data:s,extensions:f}=await r;if(void 0!==s){let[n]=Object.keys(s);if(s[n].items){let r=s[n].items.map(e=>eo(t,c,e));if(i?.selectionSet)return{data:r,nextToken:s[n].nextToken,extensions:f};return{data:es(e,c,r,t,d.authMode,d.authToken,!!o),nextToken:s[n].nextToken,extensions:f}}return{data:s[n],nextToken:s[n].nextToken,extensions:f}}}catch(s){let{data:n,errors:r}=s;if(null==n||0===Object.keys(n).length||!r)return ev(s);{let[a]=Object.keys(n);if(!n[a]?.items)return ev(s);{let s=n[a].items.map(e=>eo(t,c,e));if(s){if(i?.selectionSet)return{data:s,nextToken:n[a]?.nextToken,errors:r};return{data:es(e,c,s,t,d.authMode,d.authToken,!!o),nextToken:n[a]?.nextToken,errors:r}}return{data:n[a],nextToken:n[a]?.nextToken,errors:r}}}}})}let eM={},eU=Array(64);for(let e=0;e+65<=90;e++){let t=String.fromCharCode(e+65);eM[t]=e,eU[e]=t}for(let e=0;e+97<=122;e++){let t=String.fromCharCode(e+97),n=e+26;eM[t]=n,eU[n]=t}for(let e=0;e<10;e++){eM[e.toString(10)]=e+52;let t=e.toString(10),n=e+52;eM[t]=n,eU[n]=t}eM["+"]=62,eU[62]="+",eM["/"]=63,eU[63]="/";let eF=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;let n=new ArrayBuffer(t),r=new DataView(n);for(let t=0;t<e.length;t+=4){let n=0,i=0;for(let r=t,o=t+3;r<=o;r++)if("="!==e[r]){if(!(e[r]in eM))throw TypeError(`Invalid character ${e[r]} in base64 string.`);n|=eM[e[r]]<<(o-r)*6,i+=6}else n>>=6;let o=t/4*3;n>>=i%8;let s=Math.floor(i/8);for(let e=0;e<s;e++){let t=(s-e-1)*8;r.setUint8(o+e,(n&255<<t)>>t)}}return new Uint8Array(n)},ej=e=>new TextEncoder().encode(e);function eK(e){let t;let n="object"==typeof(t="string"==typeof e?ej(e):e)&&"number"==typeof t.length,r="object"==typeof t&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength;if(!n&&!r)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let e=0;e<t.length;e+=3){let n=0,r=0;for(let i=e,o=Math.min(e+3,t.length);i<o;i++)n|=t[i]<<(o-i-1)*8,r+=8;let o=Math.ceil(r/6);n<<=6*o-r;for(let e=1;e<=o;e++){let t=(o-e)*6;i+=eU[(n&63<<t)>>t]}i+="==".slice(0,4-o)}return i}let eV=e=>e.map(e=>e.image?e$(e):e.document?eG(e):e.toolUse?eq(e):e.toolResult?eW(e):eQ(e)),e$=({image:e})=>({image:{...e,source:{...e.source,bytes:eF(e.source.bytes)}}}),eG=({document:e})=>({document:{...e,source:{...e.source,bytes:eF(e.source.bytes)}}}),eB=({json:e})=>({json:JSON.parse(e)}),eq=({toolUse:e})=>({toolUse:{...e,input:JSON.parse(e.input)}}),eW=({toolResult:e})=>({toolResult:{toolUseId:e.toolUseId,content:e.content.map(e=>e.image?e$(e):e.json?eB(e):eQ(e))}}),eQ=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),ez=({content:e,createdAt:t,id:n,conversationId:r,role:i})=>({content:eV(e??[]),conversationId:r,createdAt:t,id:n,role:i}),eJ=(e,t,n,r,i)=>async o=>{let s=eP(e,t,r,i,!1,eE(f.ListMessages)),{data:a,nextToken:c,errors:u}=await s({...o,filter:{conversationId:{eq:n}}});return{data:a.map(e=>ez(e)),nextToken:c,errors:u}},eY=({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,contentBlockText:s,contentBlockToolUse:a,stopReason:c,errors:u})=>u?{error:{id:e,conversationId:t,associatedUserMessageId:n,errors:u}}:{next:eX({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,text:s,toolUse:eH(a),stopReason:c})},eH=e=>{if(e)return{...e,input:JSON.parse(e.input)}},eX=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),eZ=(e,t,n,r,i)=>o=>{let{conversations:s}=t;return s?eT(e,t,"subscription",s[r].message.subscribe,!1,i,eE(f.OnStreamEvent))({conversationId:n}).subscribe(e=>{let{next:t,error:n}=eY(e);n&&o.error(n),t&&o.next(t)}):{}},e0=e=>JSON.stringify(e),e1=e=>e.map(e=>e.image?e4(e):e.document?e6(e):e.toolResult?e5(e):e),e2=({tools:e})=>({tools:Object.entries(e).map(([e,t])=>({toolSpec:{name:e,description:t.description,inputSchema:{json:JSON.stringify(t.inputSchema.json)}}}))}),e4=({image:e})=>({image:{...e,source:{...e.source,bytes:eK(e.source.bytes)}}}),e6=({document:e})=>({document:{...e,source:{...e.source,bytes:eK(e.source.bytes)}}}),e3=({json:e})=>({json:JSON.stringify(e)}),e5=({toolResult:e})=>({toolResult:{...e,content:e.content.map(e=>e.image?e4(e):e.json?e3(e):e)}}),e9=(e,t,n,r,i)=>async o=>{let{conversations:s}=t;if(!s)return{};let{content:a,aiContext:c,toolConfiguration:u}="string"==typeof o?{content:[{text:o}]}:o,l=eT(e,t,"mutation",s[r].message.send,!1,i,eE(f.SendMessage)),{data:d,errors:h}=await l({conversationId:n,content:e1(a),...c&&{aiContext:e0(c)},...u&&{toolConfiguration:e2(u)}});return{data:d?ez(d):d,errors:h}},e8=(e,t,n,r,i,o,s,a,c,u)=>{if(!n)throw Error(`An error occurred converting a ${o} conversation: Missing ID`);return{id:n,createdAt:r,updatedAt:i,metadata:c,name:u,onStreamEvent:eZ(e,t,n,o,a),sendMessage:e9(e,t,n,o,a),listMessages:eJ(e,t,n,s,a)}},e7=(e,t,n,r,i,o)=>async s=>{let{name:a,metadata:c}=s??{},u=JSON.stringify(c),l=eD(e,t,r,"CREATE",o,!1,eE(f.CreateConversation)),{data:d,errors:h}=await l({name:a,metadata:u});return{data:e8(e,t,d?.id,d?.createdAt,d?.updatedAt,n,i,o,d?.metadata,d?.name),errors:h}},te=(e,t,n,r,i,o)=>async({id:s})=>{let a=eD(e,t,r,"GET",o,!1,eE(f.GetConversation)),{data:c,errors:u}=await a({id:s});return{data:c?e8(e,t,c.id,c.createdAt,c.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},tt=(e,t,n,r,i,o)=>async s=>{let a=eP(e,t,r,o,!1,eE(f.ListConversations)),{data:c,nextToken:u,errors:l}=await a(s);return{data:c.map(r=>e8(e,t,r.id,r.createdAt,r.updatedAt,n,i,o,r?.metadata,r?.name)),nextToken:u,errors:l}},tn=(e,t,n,r,i,o)=>async({id:s})=>{let a=eD(e,t,r,"DELETE",o,!1,eE(f.DeleteConversation)),{data:c,errors:u}=await a({id:s});return{data:c?e8(e,t,c?.id,c?.createdAt,c?.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},tr=(e,t,n,r,i,o)=>async({id:s,metadata:a,name:c})=>{let u=JSON.stringify(a),l=eD(e,t,r,"UPDATE",o,!1,eE(f.UpdateConversation)),{data:d,errors:h}=await l({id:s,metadata:u,name:c});return{data:d?e8(e,t,d?.id,d?.createdAt,d?.updatedAt,n,i,o,d?.metadata,d?.name):d,errors:h}},ti=e=>{let t=e.modelIntrospection;if(!t)return{};let n={};for(let[e,r]of Object.entries(t.enums))n[r.name]={values:()=>r.values};return n};function to(e,t,n,r,i,o,s){return Z(async a=>{let{name:c}=n,u=ep(t,n,"INDEX_QUERY",o,r),l=ef(n,"INDEX_QUERY",o,t,r),d=eg(e,i,o),h=n=>es(e,c,n,t,d.authMode,d.authToken,!!s);try{let n=em(e,i,o?.headers),r=[{...d,query:u,variables:l},n];void 0!==s&&r.unshift(s);let p=e.graphql(...r),f=et(p,a),y=await f;if(void 0!==y.data)return function(e,t,n,r,i){let{data:o,extensions:s}=n,[a]=Object.keys(o);if(o[a].items){let n=o[a].items.map(n=>eo(e,t,n));return{data:r?n:i(n),nextToken:o[a].nextToken,extensions:s}}return{data:o[a],nextToken:o[a].nextToken,extensions:s}}(t,c,y,o?.selectionSet,h)}catch(r){let{data:e,errors:n}=r;if(null==e||0===Object.keys(e).length||!n)return ev(r);{let[n]=Object.keys(e);if(e[n]?.items){let r=e[n]?.items.map(e=>eo(t,c,e));if(r)return{data:o?.selectionSet?r:h(r),nextToken:e[n]?.nextToken}}return{data:e[n],nextToken:e[n]?.nextToken}}}})}var ts="function"==typeof Symbol&&Symbol.observable||"@@observable",ta=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof K||r&&A(r.next)&&A(r.error)&&A(r.complete)&&x(r)?e:new B(e,t,n);return function(e){if(R.useDeprecatedSynchronousErrorHandling){var t=!j;if(t&&(j={errorThrown:!1,error:null}),e(),t){var n=j,r=n.errorThrown,i=n.error;if(j=null,r)throw i}}else e()}(function(){var e=i.operator,t=i.source;o.add(e?e.call(o,t):t?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=tc(t))(function(t,r){var i=new B({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[ts]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=tc(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function tc(e){var t;return null!==(t=null!=e?e:R.Promise)&&void 0!==t?t:Promise}let tu=e=>"key"===e.type&&e.properties?.name&&e.properties?.queryField&&e.properties?.fields.length>0,tl=e=>e.attributes?.filter(tu).map(e=>{let t=e.properties.queryField,[n,...r]=e.properties.fields;return{queryField:t,pk:n,sk:r}})||[],td=(e,t)=>{let n=e.models[t].attributes?.find(e=>"model"===e.type),r={queries:["list","get","observeQuery"],mutations:["create","update","delete"],subscriptions:["onCreate","onUpdate","onDelete"]},i=[];if(!n)return ea;if(n.properties)for(let[e,t]of Object.entries(n.properties))e in r&&(null===t?i.push(...r[e]):t instanceof Object&&i.push(...Object.keys(t)));i.includes("list")&&i.push("observeQuery");let o=i.map(e=>e.toUpperCase());return Object.fromEntries(Object.entries(ea).filter(([e])=>!o.includes(e)))};function th(e,t,n){return!function(e){let t=e.cancel.bind(e);e.cancel=function(e,n){let r=new Set,i=e;for(;i&&ee.has(i);){if(r.has(i))throw Error("A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!");r.add(i),i=ee.get(i)}return t(i,n)}}(e),e.models=function(e,t,n){let r={},i=t.modelIntrospection;if(!i)return{};let o=["ONCREATE","ONUPDATE","ONDELETE"];for(let t of Object.values(i.models)){let{name:s}=t;for(let a of(r[s]={},Object.entries(td(i,s)).forEach(([a,{operationPrefix:c}])=>{"LIST"===a?r[s][c]=eP(e,i,t,n):o.includes(a)?r[s][c]=function(e,t,n,r,i){let{name:o}=n;return s=>{let a=ep(t,n,r,s),c=ef(n,r,s,t),u=eg(e,i,s),l=em(e,i,s?.headers);return e.graphql({...u,query:a,variables:c},l).pipe(Y(n=>{let[r]=Object.keys(n.data),i=eo(t,o,n.data[r]);if(null===i)return null;if(s?.selectionSet)return i;{let[n]=es(e,o,[i],t,u.authMode,u.authToken);return n}}))}}(e,i,t,a,n):"OBSERVEQUERY"===a?r[s][c]=function(e,t){let{name:n}=t;return r=>new ta(i=>{let o=[],s=[],a=(...e)=>s.push(...e),c=e[n].onCreate(r).subscribe({next(e){a({item:e,type:"create"})},error(e){i.error({type:"onCreate",error:e})}}),u=e[n].onUpdate(r).subscribe({next(e){a({item:e,type:"update"})},error(e){i.error({type:"onUpdate",error:e})}}),l=e[n].onDelete(r).subscribe({next(e){a({item:e,type:"delete"})},error(e){i.error({type:"onDelete",error:e})}});function d(e){for(let t of e){let e=function(e,t,n){let r=Object.fromEntries(n.map(t=>[t,e[t]]));for(let e=0;e<t.length;e++)if(Object.keys(r).every(n=>r[n]===t[e][n]))return e;return -1}(t.item,o,h);switch(t.type){case"create":e<0&&o.push(t.item);break;case"update":e>=0&&(o[e]=t.item);break;case"delete":e>=0&&o.splice(e,1);break;default:console.error("Unrecognized message in observeQuery.",t)}}i.next({items:o,isSynced:!0})}let h=function(e){let{primaryKeyFieldName:t,sortKeyFieldNames:n}=e.primaryKeyInfo;return[t,...n]}(t);return(async()=>{let t=!0,c=null;for(;!i.closed&&(t||c);){t=!1;let{data:a,errors:u,nextToken:l}=await e[n].list({...r,nextToken:c});c=l,o.push(...a);let d=0===s.length&&null==c;if(i.next({items:o,isSynced:d}),Array.isArray(u))for(let e of u)i.error(e)}s.length>0&&d(s),a=(...e)=>(d(e),o.length)})(),()=>{c.unsubscribe(),u.unsubscribe(),l.unsubscribe()}})}(r,t):r[s][c]=eD(e,i,t,a,n)}),tl(t)))r[s][a.queryField]=function(e,t,n,r,i,o=!1){return o?(o,s,a)=>to(e,t,n,r,i,{...s,...a},o):(o,s)=>to(e,t,n,r,i,{...o,...s})}(e,i,t,a,n)}return r}(e,t,n),e.enums=ti(t),e.queries=ex(e,t,"queries",n),e.mutations=ex(e,t,"mutations",n),e.subscriptions=ex(e,t,"subscriptions",n),e.conversations=function(e,t,n){let r=t?.modelIntrospection;if(!r?.conversations)return{};let i={};for(let{name:t,conversation:o,message:s,models:a,nonModels:c,enums:u}of Object.values(r.conversations)){let l=a[o.modelName],d=a[s.modelName];if(!l||!d)return{};let h={...r,models:{...r.models,...a},nonModels:{...r.nonModels,...c},enums:{...r.enums,...u}};i[t]={update:tr(e,h,t,l,d,n),create:e7(e,h,t,l,d,n),get:te(e,h,t,l,d,n),delete:tn(e,h,t,l,d,n),list:tt(e,h,t,l,d,n)}}return i}(e,t,n),e.generations=function(e,t,n){let r=t?.modelIntrospection;if(!r?.generations)return{};let i={};for(let t of Object.values(r.generations))i[t.name]=eT(e,r,"query",t,!1,n,eE(f.Generation));return i}(e,t,n),e}(s=y||(y={})).NO_API_KEY="No api-key configured",s.NO_CURRENT_USER="No current user",s.NO_CREDENTIALS="No credentials",s.NO_FEDERATED_JWT="No federated jwt",s.NO_AUTH_TOKEN="No auth token specified";let tp=Symbol("amplify"),tf=Symbol("authMode"),ty=Symbol("authToken"),tg=Symbol("apiKey"),tm=Symbol("headers"),tv=Symbol("endpoint");function tb(e){return{amplify:e[tp],apiKey:e[tg],authMode:e[tf],authToken:e[ty],endpoint:e[tv],headers:e[tm]}}var tS=n(5);function tE(e){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tI="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function tw(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function tT(e,t){var n=e.locationOffset.column-1,r=tk(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,u="".concat(e.name,":").concat(s,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),d=l[i];if(d.length>120){for(var h=Math.floor(c/80),p=c%80,f=[],y=0;y<d.length;y+=80)f.push(d.slice(y,y+80));return u+tA([["".concat(s),f[0]]].concat(f.slice(1,h+1).map(function(e){return["",e]}),[[" ",tk(p-1)+"^"],["",f[h+1]]]))}return u+tA([["".concat(s-1),l[i-1]],["".concat(s),d],["",tk(c-1)+"^"],["".concat(s+1),l[i+1]]])}function tA(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t=e[0],r=e[1];return tk(n-t.length)+t+(r?" | "+r:" |")}).join("\n")}function tk(e){return Array(e+1).join(" ")}function tN(e){return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tC(e,t){return t&&("object"===tN(t)||"function"==typeof t)?t:t_(e)}function t_(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tx(e){var t="function"==typeof Map?new Map:void 0;return(tx=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return tD(e,arguments,tL(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),tP(n,e)})(e)}function tD(e,t,n){return(tD=tR()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&tP(i,n.prototype),i}).apply(null,arguments)}function tR(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function tP(e,t){return(tP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tL(e){return(tL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tP(e,t)}(i,e);var t,n,r=(t=tR(),function(){var e,n=tL(i);return e=t?Reflect.construct(n,arguments,tL(this).constructor):n.apply(this,arguments),tC(this,e)});function i(e,t,n,o,s,a,c){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),(g=r.call(this,e)).name="GraphQLError",g.originalError=null!=a?a:void 0,g.nodes=tU(Array.isArray(t)?t:t?[t]:void 0);for(var u,l=[],d=0,h=null!==(m=g.nodes)&&void 0!==m?m:[];d<h.length;d++){var p,f,y,g,m,v=h[d].loc;null!=v&&l.push(v)}l=tU(l),g.source=null!=n?n:null===(p=l)||void 0===p?void 0:p[0].source,g.positions=null!=o?o:null===(f=l)||void 0===f?void 0:f.map(function(e){return e.start}),g.locations=o&&n?o.map(function(e){return tw(n,e)}):null===(y=l)||void 0===y?void 0:y.map(function(e){return tw(e.source,e.start)}),g.path=null!=s?s:void 0;var b=null==a?void 0:a.extensions;return null==c&&"object"==tE(u=b)&&null!==u?g.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},b):g.extensions=null!=c?c:{},(Object.defineProperties(t_(g),{message:{enumerable:!0},locations:{enumerable:null!=g.locations},path:{enumerable:null!=g.path},extensions:{enumerable:null!=g.extensions&&Object.keys(g.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack)?(Object.defineProperty(t_(g),"stack",{value:a.stack,writable:!0,configurable:!0}),tC(g)):(Error.captureStackTrace?Error.captureStackTrace(t_(g),i):Object.defineProperty(t_(g),"stack",{value:Error().stack,writable:!0,configurable:!0}),g)}return n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i,o=r[n];o.loc&&(t+="\n\n"+tT((i=o.loc).source,tw(i.source,i.start)))}else if(e.source&&e.locations)for(var s=0,a=e.locations;s<a.length;s++){var c=a[s];t+="\n\n"+tT(e.source,c)}return t}(this)}},{key:tI,get:function(){return"Object"}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,n),i}(tx(Error));function tU(e){return void 0===e||0===e.length?void 0:e}function tF(e,t,n){return new tM("Syntax Error: ".concat(n),void 0,e,[t])}var tj=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),tK="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function tV(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){throw Error("Unexpected invariant triggered.")}(0),e.prototype.inspect=t,tK&&(e.prototype[tK]=t)}var t$=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();tV(t$);var tG=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function tB(e){return null!=e&&"string"==typeof e.kind}tV(tG);var tq=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function tW(e){return(tW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tQ(e,t){switch(tW(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":if(null===e)return"null";return function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n,r,i=[].concat(t,[e]),o="function"==typeof(n=e[String(tK)])?n:"function"==typeof e.inspect?e.inspect:void 0;if(void 0!==o){var s=o.call(e);if(s!==e)return"string"==typeof s?s:tQ(s,i)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(tQ(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,i);return 0===(r=Object.keys(e)).length?"{}":i.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+r.map(function(t){var n=tQ(e[t],i);return t+": "+n}).join(", ")+" }"}(e,t);default:return String(e)}}function tz(e,t){if(!e)throw Error(t)}var tJ=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||tz(0,"Body must be a string. Received: ".concat(tQ(e,[]),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||tz(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||tz(0,"column in locationOffset is 1-indexed and must be positive.")}return function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:tI,get:function(){return"Source"}}]),e}(),tY=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function tH(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"	"!==e[t])return!1;return!0}var tX=function(){function e(e){var t=new tG(tq.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e,t=this.token;if(t.kind!==tq.EOF)do t=null!==(e=t.next)&&void 0!==e?e:t.next=function(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var s=r.charCodeAt(o),a=e.line,c=1+o-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new tG(tq.BANG,o,o+1,a,c,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do o=s.charCodeAt(++a);while(!isNaN(o)&&(o>31||9===o));return new tG(tq.COMMENT,t,a,n,r,i,s.slice(t+1,a))}(n,o,a,c,t);case 36:return new tG(tq.DOLLAR,o,o+1,a,c,t);case 38:return new tG(tq.AMP,o,o+1,a,c,t);case 40:return new tG(tq.PAREN_L,o,o+1,a,c,t);case 41:return new tG(tq.PAREN_R,o,o+1,a,c,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new tG(tq.SPREAD,o,o+3,a,c,t);break;case 58:return new tG(tq.COLON,o,o+1,a,c,t);case 61:return new tG(tq.EQUALS,o,o+1,a,c,t);case 64:return new tG(tq.AT,o,o+1,a,c,t);case 91:return new tG(tq.BRACKET_L,o,o+1,a,c,t);case 93:return new tG(tq.BRACKET_R,o,o+1,a,c,t);case 123:return new tG(tq.BRACE_L,o,o+1,a,c,t);case 124:return new tG(tq.PIPE,o,o+1,a,c,t);case 125:return new tG(tq.BRACE_R,o,o+1,a,c,t);case 34:if(34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2))return function(e,t,n,r,i,o){for(var s=e.body,a=t+3,c=a,u=0,l="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(34===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return l+=s.slice(c,a),new tG(tq.BLOCK_STRING,t,a+3,n,r,i,function(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&tH(t[i]);)++i;for(var o=t.length;o>i&&tH(t[o-1]);)--o;return t.slice(i,o).join("\n")}(l));if(u<32&&9!==u&&10!==u&&13!==u)throw tF(e,a,"Invalid character within String: ".concat(tZ(u),"."));10===u?(++a,++o.line,o.lineStart=a):13===u?(10===s.charCodeAt(a+1)?a+=2:++a,++o.line,o.lineStart=a):92===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(l+=s.slice(c,a)+'"""',a+=4,c=a):++a}throw tF(e,a,"Unterminated string.")}(n,o,a,c,t,e);return function(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,c=0,u="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&10!==c&&13!==c;){if(34===c)return u+=o.slice(a,s),new tG(tq.STRING,t,s+1,n,r,i,u);if(c<32&&9!==c)throw tF(e,s,"Invalid character within String: ".concat(tZ(c),"."));if(++s,92===c){switch(u+=o.slice(a,s-1),c=o.charCodeAt(s)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="	";break;case 117:var l,d,h,p,f=(l=o.charCodeAt(s+1),d=o.charCodeAt(s+2),h=o.charCodeAt(s+3),p=o.charCodeAt(s+4),t1(l)<<12|t1(d)<<8|t1(h)<<4|t1(p));if(f<0){var y=o.slice(s+1,s+5);throw tF(e,s,"Invalid character escape sequence: \\u".concat(y,"."))}u+=String.fromCharCode(f),s+=4;break;default:throw tF(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw tF(e,s,"Unterminated string.")}(n,o,a,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s,a=e.body,c=n,u=t,l=!1;if(45===c&&(c=a.charCodeAt(++u)),48===c){if((c=a.charCodeAt(++u))>=48&&c<=57)throw tF(e,u,"Invalid number, unexpected digit after 0: ".concat(tZ(c),"."))}else u=t0(e,u,c),c=a.charCodeAt(u);if(46===c&&(l=!0,c=a.charCodeAt(++u),u=t0(e,u,c),c=a.charCodeAt(u)),(69===c||101===c)&&(l=!0,(43===(c=a.charCodeAt(++u))||45===c)&&(c=a.charCodeAt(++u)),u=t0(e,u,c),c=a.charCodeAt(u)),46===c||95===(s=c)||s>=65&&s<=90||s>=97&&s<=122)throw tF(e,u,"Invalid number, expected digit but got: ".concat(tZ(c),"."));return new tG(l?tq.FLOAT:tq.INT,t,u,r,i,o,a.slice(t,u))}(n,o,s,a,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,c=0;a!==s&&!isNaN(c=o.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new tG(tq.NAME,t,a,n,r,i,o.slice(t,a))}(n,o,a,c,t)}throw tF(n,o,s<32&&9!==s&&10!==s&&13!==s?"Cannot contain the invalid character ".concat(tZ(s),"."):39===s?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(tZ(s),"."))}var u=e.line,l=1+o-e.lineStart;return new tG(tq.EOF,i,i,u,l,t)}(this,t);while(t.kind===tq.COMMENT);return t},e}();function tZ(e){return isNaN(e)?tq.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function t0(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do o=r.charCodeAt(++i);while(o>=48&&o<=57);return i}throw tF(e,i,"Invalid number, expected digit but got: ".concat(tZ(o),"."))}function t1(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function t2(e,t){return new t4(e,t).parseDocument()}var t4=function(){function e(e,t){var n=e instanceof tJ?e:new tJ(e);this._lexer=new tX(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(tq.NAME);return{kind:tj.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:tj.DOCUMENT,definitions:this.many(tq.SOF,this.parseDefinition,tq.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(tq.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(tq.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},t.parseOperationDefinition=function(){var e,t=this._lexer.token;if(this.peek(tq.BRACE_L))return{kind:tj.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var n=this.parseOperationType();return this.peek(tq.NAME)&&(e=this.parseName()),{kind:tj.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseOperationType=function(){var e=this.expectToken(tq.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(tq.PAREN_L,this.parseVariableDefinition,tq.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:tj.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(tq.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(tq.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(tq.DOLLAR),{kind:tj.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:tj.SELECTION_SET,selections:this.many(tq.BRACE_L,this.parseSelection,tq.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(tq.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(tq.COLON)?(e=r,t=this.parseName()):t=r,{kind:tj.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(tq.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(tq.PAREN_L,t,tq.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(tq.COLON),{kind:tj.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:tj.ARGUMENT,name:this.parseName(),value:(this.expectToken(tq.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(tq.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(tq.NAME)?{kind:tj.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:tj.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return(this.expectKeyword("fragment"),(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)===!0)?{kind:tj.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:tj.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case tq.BRACKET_L:return this.parseList(e);case tq.BRACE_L:return this.parseObject(e);case tq.INT:return this._lexer.advance(),{kind:tj.INT,value:t.value,loc:this.loc(t)};case tq.FLOAT:return this._lexer.advance(),{kind:tj.FLOAT,value:t.value,loc:this.loc(t)};case tq.STRING:case tq.BLOCK_STRING:return this.parseStringLiteral();case tq.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:tj.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:tj.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:tj.NULL,loc:this.loc(t)};default:return{kind:tj.ENUM,value:t.value,loc:this.loc(t)}}case tq.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:tj.STRING,value:e.value,block:e.kind===tq.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:tj.LIST,values:this.any(tq.BRACKET_L,function(){return t.parseValueLiteral(e)},tq.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:tj.OBJECT,fields:this.any(tq.BRACE_L,function(){return t.parseObjectField(e)},tq.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(tq.COLON),{kind:tj.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(tq.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(tq.AT),{kind:tj.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return(this.expectOptionalToken(tq.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(tq.BRACKET_R),e={kind:tj.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(tq.BANG))?{kind:tj.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:tj.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===tq.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(tq.STRING)||this.peek(tq.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(tq.BRACE_L,this.parseOperationTypeDefinition,tq.BRACE_R);return{kind:tj.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(tq.COLON);var n=this.parseNamedType();return{kind:tj.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:tj.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:tj.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if((null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(tq.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(tq.AMP)||this.peek(tq.NAME));return t}return this.delimitedMany(tq.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)===!0&&this.peek(tq.BRACE_L)&&this._lexer.lookahead().kind===tq.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(tq.BRACE_L,this.parseFieldDefinition,tq.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(tq.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:tj.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(tq.PAREN_L,this.parseInputValueDef,tq.PAREN_R)},t.parseInputValueDef=function(){var e,t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(tq.COLON);var i=this.parseTypeReference();this.expectOptionalToken(tq.EQUALS)&&(e=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:tj.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:e,directives:o,loc:this.loc(t)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:tj.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:tj.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(tq.EQUALS)?this.delimitedMany(tq.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:tj.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(tq.BRACE_L,this.parseEnumValueDefinition,tq.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:tj.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:tj.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(tq.BRACE_L,this.parseInputValueDef,tq.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===tq.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(tq.BRACE_L,this.parseOperationTypeDefinition,tq.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:tj.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:tj.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:tj.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:tj.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:tj.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:tj.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:tj.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(tq.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:tj.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(tq.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==tY[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if((null===(t=this._options)||void 0===t?void 0:t.noLocation)!==!0)return new t$(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw tF(this._lexer.source,t.start,"Expected ".concat(t3(e),", found ").concat(t6(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind===tq.NAME&&t.value===e)this._lexer.advance();else throw tF(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(t6(t),"."))},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===tq.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return tF(this._lexer.source,t.start,"Unexpected ".concat(t6(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n},e}();function t6(e){var t=e.value;return t3(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function t3(e){return e===tq.BANG||e===tq.DOLLAR||e===tq.AMP||e===tq.PAREN_L||e===tq.PAREN_R||e===tq.SPREAD||e===tq.COLON||e===tq.EQUALS||e===tq.AT||e===tq.BRACKET_L||e===tq.BRACKET_R||e===tq.BRACE_L||e===tq.PIPE||e===tq.BRACE_R?'"'.concat(e,'"'):e}var t5={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},t9=Object.freeze({});function t8(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t5,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,d=[],h=[],p=e;do{var f,y=++s===o.length,g=y&&0!==a.length;if(y){if(u=0===h.length?void 0:d[d.length-1],c=l,l=h.pop(),g){if(i)c=c.slice();else{for(var m={},v=0,b=Object.keys(c);v<b.length;v++){var S=b[v];m[S]=c[S]}c=m}for(var E=0,I=0;I<a.length;I++){var w=a[I][0],T=a[I][1];i&&(w-=E),i&&null===T?(c.splice(w,1),E++):c[w]=T}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,null==(c=l?l[u]:p))continue;l&&d.push(u)}var A=void 0;if(!Array.isArray(c)){if(!tB(c))throw Error("Invalid AST Node: ".concat(tQ(c,[]),"."));var k=function(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}(t,c.kind,y);if(k){if((A=k.call(t,c,u,l,d,h))===t9)break;if(!1===A){if(!y){d.pop();continue}}else if(void 0!==A&&(a.push([u,A]),!y)){if(tB(A))c=A;else{d.pop();continue}}}}void 0===A&&g&&a.push([u,c]),y?d.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:null!==(f=n[c.kind])&&void 0!==f?f:[],s=-1,a=[],l&&h.push(l),l=c)}while(void 0!==r);return 0!==a.length&&(p=a[a.length-1][1]),p}(e,{leave:t7})}var t7={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return nt(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=nr("(",nt(e.variableDefinitions,", "),")"),i=nt(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?nt([t,nt([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+nr(" = ",r)+nr(" ",nt(i," "))},SelectionSet:function(e){return nn(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=nr("",t,": ")+n,a=s+nr("(",nt(r,", "),")");return a.length>80&&(a=s+nr("(\n",ni(nt(r,"\n")),"\n)")),nt([a,nt(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+nr(" ",nt(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return nt(["...",nr("on ",t),nt(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(nr("(",nt(r,", "),")")," ")+"on ".concat(n," ").concat(nr("",nt(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,c="";return a&&!(r&&i)&&(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+nt(e.values,", ")+"]"},ObjectValue:function(e){return"{"+nt(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+nr("(",nt(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:ne(function(e){var t=e.directives,n=e.operationTypes;return nt(["schema",nt(t," "),nn(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:ne(function(e){return nt(["scalar",e.name,nt(e.directives," ")]," ")}),ObjectTypeDefinition:ne(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nt(["type",t,nr("implements ",nt(n," & ")),nt(r," "),nn(i)]," ")}),FieldDefinition:ne(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(ns(n)?nr("(\n",ni(nt(n,"\n")),"\n)"):nr("(",nt(n,", "),")"))+": "+r+nr(" ",nt(i," "))}),InputValueDefinition:ne(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return nt([t+": "+n,nr("= ",r),nt(i," ")]," ")}),InterfaceTypeDefinition:ne(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nt(["interface",t,nr("implements ",nt(n," & ")),nt(r," "),nn(i)]," ")}),UnionTypeDefinition:ne(function(e){var t=e.name,n=e.directives,r=e.types;return nt(["union",t,nt(n," "),r&&0!==r.length?"= "+nt(r," | "):""]," ")}),EnumTypeDefinition:ne(function(e){var t=e.name,n=e.directives,r=e.values;return nt(["enum",t,nt(n," "),nn(r)]," ")}),EnumValueDefinition:ne(function(e){return nt([e.name,nt(e.directives," ")]," ")}),InputObjectTypeDefinition:ne(function(e){var t=e.name,n=e.directives,r=e.fields;return nt(["input",t,nt(n," "),nn(r)]," ")}),DirectiveDefinition:ne(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(ns(n)?nr("(\n",ni(nt(n,"\n")),"\n)"):nr("(",nt(n,", "),")"))+(r?" repeatable":"")+" on "+nt(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return nt(["extend schema",nt(t," "),nn(n)]," ")},ScalarTypeExtension:function(e){return nt(["extend scalar",e.name,nt(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nt(["extend type",t,nr("implements ",nt(n," & ")),nt(r," "),nn(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return nt(["extend interface",t,nr("implements ",nt(n," & ")),nt(r," "),nn(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return nt(["extend union",t,nt(n," "),r&&0!==r.length?"= "+nt(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return nt(["extend enum",t,nt(n," "),nn(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return nt(["extend input",t,nt(n," "),nn(r)]," ")}};function ne(e){return function(t){return nt([t.description,e(t)],"\n")}}function nt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(n))&&void 0!==t?t:""}function nn(e){return nr("{\n",ni(nt(e,"\n")),"\n}")}function nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function ni(e){return nr("  ",e.replace(/\n/g,"\n  "))}function no(e){return -1!==e.indexOf("\n")}function ns(e){return null!=e&&e.some(no)}var na="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function nc(e){if(e instanceof ta)return e;if(null!=e){if(A(e[ts]))return new ta(function(t){var n=e[ts]();if(A(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(e&&"number"==typeof e.length&&"function"!=typeof e)return new ta(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(A(null==e?void 0:e.then))return new ta(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,L)});if(Symbol.asyncIterator&&A(null==e?void 0:e[Symbol.asyncIterator]))return nu(e);if(A(null==e?void 0:e[na]))return new ta(function(t){var n,r;try{for(var i=(0,N.XA)(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()});if(A(null==e?void 0:e.getReader))return nu(function(e){return(0,N.FC)(this,arguments,function(){var t,n,r;return(0,N.Jh)(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,N.qq)(t.read())];case 3:if(r=(n=i.sent()).value,!n.done)return[3,5];return[4,(0,N.qq)(void 0)];case 4:return[2,i.sent()];case 5:return[4,(0,N.qq)(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}(e))}throw TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function nu(e){return new ta(function(t){(function(e,t){var n,r,i,o;return(0,N.mG)(this,void 0,void 0,function(){var s;return(0,N.Jh)(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=(0,N.KL)(e),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:a.sent()},[3,11];case 6:if(a.trys.push([6,,9,10]),!(r&&!r.done&&(o=n.return)))return[3,8];return[4,o.call(n)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}var nl=n(6743),nd=n(1847),nh=n(5967);class np extends nh._{get response(){return this._response?nf(this._response):void 0}constructor(e){super(e),this.constructor=np,Object.setPrototypeOf(this,np.prototype),e.response&&(this._response=e.response)}}let nf=e=>({...e,headers:{...e.headers}});class ny extends np{constructor(e){super(e),this.constructor=ny,Object.setPrototypeOf(this,ny.prototype)}}class ng extends ny{constructor(e={}){super({name:"CanceledError",message:"Request is canceled by user",...e}),this.constructor=ng,Object.setPrototypeOf(this,ng.prototype)}}let nm=e=>!!e&&e instanceof ng;(g||(g={})).InvalidApiName="InvalidApiName",g.InvalidApiName;var nv=n(5434);let nb=async e=>{if(!e)return;let t=await (0,nv.f)(nS(e));if(t){let n=await e.body?.text();return nE(t,{statusCode:e.statusCode,headers:e.headers,body:n})}},nS=e=>{let t;let n=new Proxy(e.body,{get:(e,n,r)=>"json"===n?async()=>{t||(t=e.text());try{return JSON.parse(await t)}catch(e){return{}}}:"text"===n?async()=>(t||(t=e.text()),t):Reflect.get(e,n,r)});return new Proxy(e,{get:(e,t,r)=>"body"===t?n:Reflect.get(e,t,r)})},nE=(e,t)=>Object.assign(new ny({name:e?.name,message:e.message,underlyingError:e,response:t}),{$metadata:e.$metadata});var nI=n(6344);let nw=new nI.k("RestApis");var nT=n(4629),nA=n(7836);let nk="execute-api",nN=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,nO=(e,t)=>{let{service:n=nk,region:r="us-east-1"}=t?.amplify.getConfig()?.API?.REST?.[t?.apiName]??{},{hostname:i}=e,[,o,s]=nN.exec(i)??[];return o===nk?{service:o,region:s??r}:"appsync-api"===o?{service:"appsync",region:s??r}:{service:n,region:r}},nC=(e,t)=>{let n={};for(let t in e)n[t.toLowerCase()]=e[t];return t&&(n["content-type"]="application/json; charset=UTF-8",t instanceof FormData&&delete n["content-type"]),n};var n_=n(525),nx=n(9265),nD=n(1693);let nR=e=>Object.keys(e).map(e=>e.toLowerCase()).sort().join(";"),nP="aws4_request",nL="AWS4-HMAC-SHA256",nM=(e,t,n)=>`${e}/${t}/${n}/${nP}`,nU=e=>{let t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},nF=({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:i=!0})=>{let{accessKeyId:o,secretAccessKey:s,sessionToken:a}=e,{longDate:c,shortDate:u}=nU(t);return{accessKeyId:o,credentialScope:nM(u,n,r),longDate:c,secretAccessKey:s,sessionToken:a,shortDate:u,signingRegion:n,signingService:r,uriEscapePath:i}};var nj=n(5169),nK=n(6361);let nV=(e,t)=>{let n=new nj.f(e??void 0);return n.update(t),n.digestSync()},n$=(e,t)=>{let n=nV(e,t);return(0,nK.N)(n)},nG=e=>Object.entries(e).map(([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""})).sort((e,t)=>e.key<t.key?-1:1).map(e=>`${e.key}:${e.value}
`).join(""),nB=e=>Array.from(e).sort(([e,t],[n,r])=>e===n?t<r?-1:1:e<n?-1:1).map(([e,t])=>`${nq(e)}=${nq(t)}`).join("&"),nq=e=>encodeURIComponent(e).replace(/[!'()*]/g,nW),nW=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,nQ=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",nz=e=>null==e?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":nJ(e)?n$(null,e):"UNSIGNED-PAYLOAD",nJ=e=>"string"==typeof e||ArrayBuffer.isView(e)||nY(e),nY=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),nH=({body:e,headers:t,method:n,url:r},i=!0)=>[n,nQ(r.pathname,i),nB(r.searchParams),nG(t),nR(t),nz(e)].join("\n"),nX=(e,t,n,r)=>{let i=nV(`AWS4${e}`,t),o=nV(i,n),s=nV(o,r);return nV(s,nP)},nZ=(e,t,n)=>[nL,e,t,n].join("\n"),n0=(e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:i,signingRegion:o,signingService:s,uriEscapePath:a})=>{let c=nZ(n,t,n$(null,nH(e,a)));return n$(nX(r,i,o,s),c)},n1=(e,t)=>{let n=nF(t),{accessKeyId:r,credentialScope:i,longDate:o,sessionToken:s}=n,a={...e.headers};a.host=e.url.host,a["x-amz-date"]=o,s&&(a["x-amz-security-token"]=s);let c={...e,headers:a},u=n0(c,n),l=`Credential=${r}/${i}`,d=`SignedHeaders=${nR(a)}`,h=`Signature=${u}`;return a.authorization=`${nL} ${l}, ${d}, ${h}`,c},n2=e=>new Date(Date.now()+e),n4=(e,t)=>Math.abs(n2(t).getTime()-e)>=3e5,n6=(e,t)=>n4(e,t)?e-Date.now():t,n3=({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"];var n5=n(182);let n9=(0,n5.V)(n_.S,[nx.n,nD.d,({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let i;return(o,s)=>async function(a){i=i??0;let c={credentials:"function"==typeof e?await e({forceRefresh:!!s?.isCredentialsExpired}):e,signingDate:n2(i),signingRegion:t,signingService:n,uriEscapePath:r},u=await n1(a,c),l=await o(u),d=n3(l);return d&&(i=n6(Date.parse(d),i)),l}}]),n8=(0,n5.V)(n_.S,[nx.n,nD.d]),n7=async(e,t,n,r)=>{let i;let{url:o,method:s,headers:a,body:c,withCredentials:u,abortSignal:l,retryStrategy:d}=t,h=c?c instanceof FormData?c:JSON.stringify(c??""):void 0,p={url:o,headers:nC(a,c),method:s,body:h},f={retryDecider:re(d??e?.libraryOptions?.API?.REST?.retryStrategy),computeDelay:nT.k,withCrossDomainCredentials:u,abortSignal:l},y=n(p,r),g=await rt(e);if(y&&g){let e=nO(o),t=r?.service??e.service,n=r?.region??e.region;i=await n9(p,{...f,credentials:g,region:n,service:t})}else i=await n8(p,{...f});return{statusCode:i.statusCode,headers:i.headers,body:i.body}},re=e=>"no-retry"===e?.strategy?()=>Promise.resolve({retryable:!1}):(0,nA.j)(nb),rt=async e=>{try{let{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch(e){nw.debug("No credentials available, the request will be unsigned.")}return null},rn=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,rr=new WeakMap,ri=(e,{url:t,options:n,abortController:r})=>{let i=r??new AbortController,o=(function(e,t){let n;let r=e=>!!t,i=new AbortController,o=i.signal,s=t?.signal,a=async()=>{try{let t=await (r(e)?e():e(o));if(t.statusCode>=300)throw await nb(t);return t}catch(r){let e=s??o,t=n??e.reason;if("AbortError"===r.name||e?.aborted===!0){let e=new ng({...t&&{message:t},underlyingError:r,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw nw.debug(r),e}throw nw.debug(r),r}};return r()?a():{response:a(),cancel:e=>{!0!==o.aborted&&(i.abort(e),e&&o.reason!==e&&(n=e))}}})(async()=>n7(e,{url:t,method:"POST",...n,abortSignal:i.signal,retryStrategy:{strategy:"jittered-exponential-backoff"}},rn,n?.signingServiceInfo),i).finally(()=>{rr.delete(o)});return o},ro=(e,t)=>{let n=rr.get(e);return!!n&&(n.abort(t),t&&n.signal.reason!==t&&(n.signal.reason=t),!0)},rs=(e,t)=>{rr.set(e,t)};var ra=n(8159);let rc=[400,401,403],ru=["BadRequestException","UnauthorizedException"];(a=m||(m={})).GQL_CONNECTION_INIT="connection_init",a.GQL_CONNECTION_ERROR="connection_error",a.GQL_CONNECTION_ACK="connection_ack",a.GQL_START="start",a.GQL_START_ACK="start_ack",a.DATA="data",a.GQL_CONNECTION_KEEP_ALIVE="ka",a.GQL_STOP="stop",a.GQL_COMPLETE="complete",a.GQL_ERROR="error",a.EVENT_SUBSCRIBE="subscribe",a.EVENT_PUBLISH="publish",a.EVENT_SUBSCRIBE_ACK="subscribe_success",a.EVENT_PUBLISH_ACK="publish_success",a.EVENT_STOP="unsubscribe",a.EVENT_COMPLETE="unsubscribe_success",(c=v||(v={}))[c.PENDING=0]="PENDING",c[c.CONNECTED=1]="CONNECTED",c[c.FAILED=2]="FAILED",(u=b||(b={}))[u.CLOSED=0]="CLOSED",u[u.READY=1]="READY",u[u.CONNECTING=2]="CONNECTING";let rl={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"};class rd extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}var rh=n(8726);let rp=e=>e&&e.nonRetryable;var rf=n(1698),ry=n(7961),rg=n(8161);let rm=new nI.k("retryUtil");async function rv(e,t,n,r){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise(async(i,o)=>{let s,a,c=0,u=!1,l=()=>{};for(r&&r.then(()=>{u=!0,clearTimeout(s),l()});!u;){c++,rm.debug(`${e.name} attempt #${c} with this vars: ${JSON.stringify(t)}`);try{i(await e(...t));return}catch(i){if(a=i,rm.debug(`error on ${e.name}`,i),rp(i)){rm.debug(`${e.name} non retryable error`,i),o(i);return}let r=n(c,t,i);if(rm.debug(`${e.name} retrying in ${r} ms`),!1===r||u){o(i);return}await new Promise(e=>{s=setTimeout(l=e,r)})}}o(a)})}let rb=(e,t,n=ry.t,r)=>rv(e,t,(0,rg.k)(n),r);(l=S||(S={})).CONNECTION_CLOSED="Connection closed",l.CONNECTION_FAILED="Connection failed",l.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",l.SUBSCRIPTION_ACK="Subscription ack",l.TIMEOUT_DISCONNECT="Timeout disconnect",(d=E||(E={})).Connected="Connected",d.ConnectedPendingNetwork="ConnectedPendingNetwork",d.ConnectionDisrupted="ConnectionDisrupted",d.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",d.Connecting="Connecting",d.ConnectedPendingDisconnect="ConnectedPendingDisconnect",d.Disconnected="Disconnected",d.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive";let rS=()=>{if("undefined"==typeof self)return!1;let e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope};class rE{networkMonitor(e){let t=rS()?self:"undefined"!=typeof window&&window;return t?new ta(e=>{e.next({online:t.navigator.onLine});let n=()=>{e.next({online:!0})},r=()=>{e.next({online:!1})};return t.addEventListener("online",n),t.addEventListener("offline",r),rE._observers.push(e),()=>{t.removeEventListener("online",n),t.removeEventListener("offline",r),rE._observers=rE._observers.filter(t=>t!==e)}}):nc([{online:!0}])}static _observerOverride(e){for(let t of this._observers){if(t.closed){this._observers=this._observers.filter(e=>e!==t);continue}t?.next&&t.next(e)}}}rE._observers=[];let rI=()=>new rE().networkMonitor(),rw={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class rT{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=rI().subscribe(({online:e})=>{this.record(e?rw.ONLINE:rw.OFFLINE),this._initialNetworkStateSubscription?.unsubscribe()}),this._linkedConnectionStateObservable=new ta(e=>{e.next(this._linkedConnectionState),this._linkedConnectionStateObserver=e})}enableNetworkMonitoring(){this._initialNetworkStateSubscription?.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=rI().subscribe(({online:e})=>{this.record(e?rw.ONLINE:rw.OFFLINE)}))}disableNetworkMonitoring(){this._networkMonitoringSubscription?.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){var e;let t;return this._linkedConnectionStateObservable.pipe(Y(e=>this.connectionStatesTranslator(e))).pipe((e=e=>{let n=e!==t;return t=e,n},k(function(t,n){var r,i,o,s=0;t.subscribe(new J(n,function(t){return e.call(void 0,t,s++)&&n.next(t)},void 0,void 0,void 0))})))}record(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();let t={...this._linkedConnectionState,...e};this._linkedConnectionState={...t},this._linkedConnectionStateObserver?.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:e,networkState:t,intendedConnectionState:n,keepAliveState:r}){return"connected"===e&&"disconnected"===t?E.ConnectedPendingNetwork:"connected"===e&&"disconnected"===n?E.ConnectedPendingDisconnect:"disconnected"===e&&"connected"===n&&"disconnected"===t?E.ConnectionDisruptedPendingNetwork:"disconnected"===e&&"connected"===n?E.ConnectionDisrupted:"connected"===e&&"unhealthy"===r?E.ConnectedPendingKeepAlive:"connecting"===e?E.Connecting:"disconnected"===e?E.Disconnected:E.Connected}}(h=I||(I={})).START_RECONNECT="START_RECONNECT",h.HALT_RECONNECT="HALT_RECONNECT";class rA{constructor(){this.reconnectObservers=[]}addObserver(e){this.reconnectObservers.push(e)}record(e){e===I.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval(()=>{this._triggerReconnect()},6e4)},5e3)),e===I.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(e=>{e.complete?.()})}_triggerReconnect(){this.reconnectObservers.forEach(e=>{e.next?.()})}}let rk="wss://",rN=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,rO=/^https:\/\/\w{26}\.\w+-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/event$/i,rC="/realtime",r_=e=>null===e.match(rN),rx=e=>null!==e.match(rO),rD=e=>{let t=e??"";return t=(t=rx(t)?t.concat(rC).replace("ddpg-api","grt-gamma").replace("appsync-api","appsync-realtime-api"):r_(t)?t.concat(rC):t.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta").replace("ddpg-api","grt-gamma")).replace("https://",rk).replace("http://",rk),new nl.a(t)},rR=e=>{if(!e)return{};if("Authorization"in e){let{Authorization:t,...n}=e;return n}return e},rP=e=>{let t=rR(e),n=new nl.z;return Object.entries(t).forEach(([e,t])=>{n.append(e,t)}),n},rL=(e,t)=>{let n=rD(e),r=new nl.z(n.search);for(let[e,n]of t.entries())r.append(e,n);return n.search=r.toString(),n.toString()},rM=async e=>{let{appSyncGraphqlEndpoint:t,query:n,libraryConfigHeaders:r=()=>({}),additionalHeaders:i={},authToken:o}=e,s={},a=await r();return s="function"==typeof i?await i({url:t||"",queryString:n||""}):i,o&&(s={...s,Authorization:o}),{additionalCustomHeaders:s,libraryConfigHeaders:a}};var rU=n(9319);let rF=new nI.k("AWSAppSyncRealTimeProvider Auth"),rj=async({host:e})=>{let t=await (0,rU.y)();return{Authorization:t?.tokens?.accessToken?.toString(),host:e}},rK=async({apiKey:e,host:t})=>({host:t,"x-amz-date":new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":e}),rV=async({payload:e,canonicalUri:t,appSyncGraphqlEndpoint:n,region:r})=>{let i=(await (0,rU.y)()).credentials,o={url:`${n}${t}`,data:e,method:"POST",headers:{...rl}};return n1({headers:o.headers,method:o.method,url:new nl.a(o.url),body:o.data},{credentials:i,signingRegion:r,signingService:"appsync"}).headers},r$=async({host:e,additionalCustomHeaders:t})=>{if(!t?.Authorization)throw Error("No auth token specified");return{Authorization:t.Authorization,host:e}},rG=async({apiKey:e,authenticationType:t,canonicalUri:n,appSyncGraphqlEndpoint:r,region:i,additionalCustomHeaders:o,payload:s})=>{let a={apiKey:rK,iam:rV,oidc:rj,userPool:rj,lambda:r$,none:r$};if(t&&a[t]){let c=a[t],u=r?new nl.a(r).host:void 0;return rF.debug(`Authenticating with ${JSON.stringify(t)}`),await c({payload:s,canonicalUri:n,appSyncGraphqlEndpoint:r,apiKey:"apiKey"===t?e:void 0,region:i,host:u,additionalCustomHeaders:o})}rF.debug(`Authentication type ${t} not supported`)},rB=e=>{T.Xb.dispatch("api",e,"PubSub",T.SQ)};class rq{constructor(e){this.subscriptionObserverMap=new Map,this.allowNoSubscriptions=!1,this.socketStatus=b.CLOSED,this.keepAliveTimestamp=Date.now(),this.promiseArray=[],this.connectionStateMonitor=new rT,this.reconnectionMonitor=new rA,this._establishConnection=async(e,t)=>{this.logger.debug(`Establishing WebSocket connection to ${e}`);try{await this._openConnection(e,t),await this._initiateHandshake()}catch(n){let{errorType:e,errorCode:t}=n;if(rc.includes(t)||ru.includes(e))throw new rd(e);if(e)throw Error(e);throw n}},this.logger=new nI.k(e.providerName),this.wsProtocolName=e.wsProtocolName,this.wsConnectUri=e.connectUri,this.connectionStateMonitorSubscription=this._startConnectionStateMonitoring()}close(){return this.socketStatus=b.CLOSED,this.connectionStateMonitor.record(rw.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close(),new Promise((e,t)=>{this.awsRealTimeSocket?(this.awsRealTimeSocket.onclose=t=>{this._closeSocket(),this.subscriptionObserverMap=new Map,this.awsRealTimeSocket=void 0,e()},this.awsRealTimeSocket.onerror=e=>{t(e)},this.awsRealTimeSocket.close()):e()})}subscribe(e,t){return new ta(n=>{if(!e?.appSyncGraphqlEndpoint){n.error({errors:[{...new tM("Subscribe only available for AWS AppSync endpoint")}]}),n.complete();return}let r=!1,i=(0,rh.r)(),o=()=>{r||(r=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:e,observer:n,subscriptionId:i,customUserAgentDetails:t}).catch(e=>{this.logger.debug(`${S.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${e}`),this._closeSocket()}).finally(()=>{r=!1}))},s=new ta(e=>{this.reconnectionMonitor.addObserver(e)}).subscribe(()=>{o()});return o(),async()=>{await this._cleanupSubscription(i,s)}})}async connect(e){this.socketStatus!==b.READY&&await this._connectWebSocket(e)}async publish(e,t){if(this.socketStatus!==b.READY)throw Error("Subscription has not been initialized");return this._publishMessage(e,t)}async _connectWebSocket(e){let{apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i}=e,{additionalCustomHeaders:o}=await rM(e);this.connectionStateMonitor.record(rw.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i,additionalCustomHeaders:o})}async _publishMessage(e,t){let n=(0,rh.r)(),{additionalCustomHeaders:r,libraryConfigHeaders:i}=await rM(e),o=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:t,additionalCustomHeaders:r,libraryConfigHeaders:i,publish:!0});return new Promise((e,t)=>{if(this.awsRealTimeSocket){let r=i=>{let o=JSON.parse(i.data);if(o.id===n&&"publish_success"===o.type&&(this.awsRealTimeSocket&&this.awsRealTimeSocket.removeEventListener("message",r),a(),e()),o.errors&&o.errors.length>0){let e=o.errors.map(e=>e.errorType);a(),t(Error(`Publish errors: ${e.join(", ")}`))}},i=e=>{a(),t(Error(`WebSocket error: ${e}`))},s=()=>{a(),t(Error("WebSocket is closed"))},a=()=>{this.awsRealTimeSocket?.removeEventListener("message",r),this.awsRealTimeSocket?.removeEventListener("error",i),this.awsRealTimeSocket?.removeEventListener("close",s)};this.awsRealTimeSocket.addEventListener("message",r),this.awsRealTimeSocket.addEventListener("error",i),this.awsRealTimeSocket.addEventListener("close",s),this.awsRealTimeSocket.send(o)}else t(Error("WebSocket is not connected"))})}async _cleanupSubscription(e,t){t?.unsubscribe();try{await this._waitForSubscriptionToBeConnected(e);let{subscriptionState:t}=this.subscriptionObserverMap.get(e)||{};if(!t)return;if(t===v.CONNECTED)this._sendUnsubscriptionMessage(e);else throw Error("Subscription never connected")}catch(e){this.logger.debug(`Error while unsubscribing ${e}`)}finally{this._removeSubscriptionObserver(e)}}_startConnectionStateMonitoring(){return this.connectionStateMonitor.connectionStateObservable.subscribe(e=>{rB({event:"ConnectionStateChange",data:{provider:this,connectionState:e},message:`Connection state is ${e}`}),this.connectionState=e,e===E.ConnectionDisrupted&&this.reconnectionMonitor.record(I.START_RECONNECT),[E.Connected,E.ConnectedPendingDisconnect,E.ConnectedPendingKeepAlive,E.ConnectedPendingNetwork,E.ConnectionDisruptedPendingNetwork,E.Disconnected].includes(e)&&this.reconnectionMonitor.record(I.HALT_RECONNECT)})}async _startSubscriptionWithAWSAppSyncRealTime({options:e,observer:t,subscriptionId:n,customUserAgentDetails:r}){let{query:i,variables:o}=e;this.subscriptionObserverMap.set(n,{observer:t,query:i??"",variables:o??{},subscriptionState:v.PENDING,startAckTimeoutId:void 0});let{additionalCustomHeaders:s,libraryConfigHeaders:a}=await rM(e),c=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:r,additionalCustomHeaders:s,libraryConfigHeaders:a});try{await this._connectWebSocket(e)}catch(e){this._logStartSubscriptionError(n,t,e);return}let{subscriptionFailedCallback:u,subscriptionReadyCallback:l}=this.subscriptionObserverMap.get(n)??{};this.subscriptionObserverMap.set(n,{observer:t,subscriptionState:v.PENDING,query:i??"",variables:o??{},subscriptionReadyCallback:l,subscriptionFailedCallback:u,startAckTimeoutId:setTimeout(()=>{this._timeoutStartSubscriptionAck(n)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(c)}_logStartSubscriptionError(e,t,n){this.logger.debug({err:n});let r=String(n.message??"");if(this._closeSocket(),this.connectionState!==E.ConnectionDisruptedPendingNetwork){rp(n)?t.error({errors:[{...new tM(`${S.CONNECTION_FAILED}: ${r}`)}]}):this.logger.debug(`${S.CONNECTION_FAILED}: ${r}`);let{subscriptionFailedCallback:i}=this.subscriptionObserverMap.get(e)||{};"function"==typeof i&&i()}}async _waitForSubscriptionToBeConnected(e){let t=this.subscriptionObserverMap.get(e);if(t){let{subscriptionState:n}=t;if(n===v.PENDING)return new Promise((n,r)=>{let{observer:i,subscriptionState:o,variables:s,query:a}=t;this.subscriptionObserverMap.set(e,{observer:i,subscriptionState:o,variables:s,query:a,subscriptionReadyCallback:n,subscriptionFailedCallback:r})})}}_sendUnsubscriptionMessage(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===b.READY){let t=this._unsubscribeMessage(e),n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){this.logger.debug({err:e})}}_removeSubscriptionObserver(e){this.subscriptionObserverMap.delete(e),this.allowNoSubscriptions||setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=b.CLOSED;return}if(this.connectionStateMonitor.record(rw.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{this.logger.debug("closing WebSocket...");let e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=b.CLOSED,this._closeSocket()}}}maintainKeepAlive(){this.keepAliveTimestamp=Date.now()}keepAliveHeartbeat(e){let t=Date.now();t-this.keepAliveTimestamp>65e3?this.connectionStateMonitor.record(rw.KEEP_ALIVE_MISSED):this.connectionStateMonitor.record(rw.KEEP_ALIVE),t-this.keepAliveTimestamp>e&&this._errorDisconnect(S.TIMEOUT_DISCONNECT)}_handleIncomingSubscriptionMessage(e){if("string"!=typeof e.data)return;let[t,n]=this._handleSubscriptionData(e);if(t){this.maintainKeepAlive();return}let{type:r,id:i,payload:o}=n,{observer:s=null,query:a="",variables:c={},startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:d}=this.subscriptionObserverMap.get(i)||{};if(r===m.GQL_START_ACK||r===m.EVENT_SUBSCRIBE_ACK){this.logger.debug(`subscription ready for ${JSON.stringify({query:a,variables:c})}`),"function"==typeof l&&l(),u&&clearTimeout(u),rB({event:S.SUBSCRIPTION_ACK,data:{query:a,variables:c},message:"Connection established for subscription"});let e=v.CONNECTED;s&&this.subscriptionObserverMap.set(i,{observer:s,query:a,variables:c,startAckTimeoutId:void 0,subscriptionState:e,subscriptionReadyCallback:l,subscriptionFailedCallback:d}),this.connectionStateMonitor.record(rw.CONNECTION_ESTABLISHED);return}if(r===m.GQL_CONNECTION_KEEP_ALIVE){this.maintainKeepAlive();return}if(r===m.GQL_ERROR){let e=v.FAILED;s&&(this.subscriptionObserverMap.set(i,{observer:s,query:a,variables:c,startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:d,subscriptionState:e}),this.logger.debug(`${S.CONNECTION_FAILED}: ${JSON.stringify(o??n)}`),s.error({errors:[{...new tM(`${S.CONNECTION_FAILED}: ${JSON.stringify(o??n)}`)}]}),u&&clearTimeout(u),"function"==typeof d&&d())}}_errorDisconnect(e){this.logger.debug(`Disconnect error: ${e}`),this.awsRealTimeSocket&&(this._closeSocket(),this.awsRealTimeSocket.close()),this.socketStatus=b.CLOSED}_closeSocket(){this.keepAliveHeartbeatIntervalId&&(clearInterval(this.keepAliveHeartbeatIntervalId),this.keepAliveHeartbeatIntervalId=void 0),this.connectionStateMonitor.record(rw.CLOSED)}_timeoutStartSubscriptionAck(e){let t=this.subscriptionObserverMap.get(e);if(t){let{observer:n,query:r,variables:i}=t;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:v.FAILED}),this._closeSocket(),this.logger.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}}_initializeWebSocketConnection({appSyncGraphqlEndpoint:e,authenticationType:t,apiKey:n,region:r,additionalCustomHeaders:i}){if(this.socketStatus!==b.READY)return new Promise(async(o,s)=>{if(this.promiseArray.push({res:o,rej:s}),this.socketStatus===b.CLOSED)try{this.socketStatus=b.CONNECTING;let o=await rG({authenticationType:t,payload:"{}",canonicalUri:this.wsConnectUri,apiKey:n,appSyncGraphqlEndpoint:e,region:r,additionalCustomHeaders:i}),s=o?JSON.stringify(o):"",a=rf.u.convert(s,{urlSafe:!0,skipPadding:!0}),c=`header-${a}`,u=rP(i),l=rL(e,u);await this._establishRetryableConnection(l,c),this.promiseArray.forEach(({res:e})=>{this.logger.debug("Notifying connection successful"),e()}),this.socketStatus=b.READY,this.promiseArray=[]}catch(e){this.logger.debug("Connection exited with",e),this.promiseArray.forEach(({rej:t})=>{t(e)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=b.CLOSED}})}async _establishRetryableConnection(e,t){this.logger.debug("Establishing retryable connection"),await rb(this._establishConnection.bind(this),[e,t],5e3)}async _openConnection(e,t){return new Promise((n,r)=>{let i=this._getNewWebSocket(e,[this.wsProtocolName,t]);i.onerror=()=>{this.logger.debug("WebSocket connection error")},i.onclose=()=>{this._closeSocket(),r(Error("Connection handshake error"))},i.onopen=()=>{this.awsRealTimeSocket=i,n()}})}_getNewWebSocket(e,t){return new WebSocket(e,t)}async _initiateHandshake(){return new Promise((e,t)=>{if(!this.awsRealTimeSocket){t(Error("awsRealTimeSocket undefined"));return}let n=!1;this.awsRealTimeSocket.onerror=e=>{this.logger.debug(`WebSocket error ${JSON.stringify(e)}`)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),t(Error(JSON.stringify(e)))},this.awsRealTimeSocket.onmessage=r=>{if("string"!=typeof r.data)return;this.logger.debug(`subscription message from AWS AppSyncRealTime: ${r.data} `);let i=JSON.parse(r.data),{type:o}=i,s=this._extractConnectionTimeout(i);if(o===m.GQL_CONNECTION_ACK){n=!0,this._registerWebsocketHandlers(s),e("Connected to AWS AppSyncRealTime");return}if(o===m.GQL_CONNECTION_ERROR){let{errorType:e,errorCode:n}=this._extractErrorCodeAndType(i);t({errorType:e,errorCode:n})}};let r={type:m.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(r));let i=e=>{e||(this.connectionStateMonitor.record(rw.CONNECTION_FAILED),t(Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(()=>{i(n)},15e3)})}_registerWebsocketHandlers(e){this.awsRealTimeSocket&&(this.keepAliveHeartbeatIntervalId=setInterval(()=>{this.keepAliveHeartbeat(e)},5e3),this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=e=>{this.logger.debug(e),this._errorDisconnect(S.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),this._errorDisconnect(S.CONNECTION_CLOSED)})}}let rW="AWSAppSyncRealTimeProvider";class rQ extends rq{constructor(){super({providerName:rW,wsProtocolName:"graphql-ws",connectUri:"/connect"})}getProviderName(){return rW}subscribe(e,t){return super.subscribe(e,t)}async _prepareSubscriptionPayload({options:e,subscriptionId:t,customUserAgentDetails:n,additionalCustomHeaders:r,libraryConfigHeaders:i}){let{appSyncGraphqlEndpoint:o,authenticationType:s,query:a,variables:c,apiKey:u,region:l}=e,d=JSON.stringify({query:a,variables:c}),h={...await rG({apiKey:u,appSyncGraphqlEndpoint:o,authenticationType:s,payload:d,canonicalUri:"",region:l,additionalCustomHeaders:r}),...i,...r,[ra.Mt]:(0,nd.Zm)(n)};return JSON.stringify({id:t,payload:{data:d,extensions:{authorization:{...h}}},type:m.GQL_START})}_handleSubscriptionData(e){this.logger.debug(`subscription message from AWS AppSync RealTime: ${e.data}`);let{id:t="",payload:n,type:r}=JSON.parse(String(e.data)),{observer:i=null,query:o="",variables:s={}}=this.subscriptionObserverMap.get(t)||{};return(this.logger.debug({id:t,observer:i,query:o,variables:s}),r===m.DATA&&n&&n.data)?(i?i.next(n):this.logger.debug(`observer not found for id: ${t}`),[!0,{id:t,type:r,payload:n}]):[!1,{id:t,type:r,payload:n}]}_unsubscribeMessage(e){return{id:e,type:m.GQL_STOP}}_extractConnectionTimeout(e){let{payload:{connectionTimeoutMs:t=3e5}={}}=e;return t}_extractErrorCodeAndType(e){let{payload:{errors:[{errorType:t="",errorCode:n=0}={}]=[]}={}}=e;return{errorCode:n,errorType:t}}}class rz extends nh._{constructor(e){super(e),this.constructor=rz,Object.setPrototypeOf(this,rz.prototype)}}(p=w||(w={})).NoAuthSession="NoAuthSession",p.NoRegion="NoRegion",p.NoCustomEndpoint="NoCustomEndpoint";let rJ={[w.NoAuthSession]:{message:"Auth session should not be empty."},[w.NoRegion]:{message:"Missing region."},[w.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}},rY=new nI.k("GraphQLAPI resolveConfig"),rH=e=>{let t=e.getConfig();t.API?.GraphQL||rY.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");let{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}=t.API?.GraphQL??{};return!function(e,t){let{message:n,recoverySuggestion:r}=rJ[t];if(!e)throw new rz({name:t,message:n,recoverySuggestion:r})}(!(!r&&i),w.NoCustomEndpoint),{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}},rX=e=>({headers:e.libraryOptions?.API?.GraphQL?.headers,withCredentials:e.libraryOptions?.API?.GraphQL?.withCredentials});function rZ(e){return e.errors&&Array.isArray(e.errors)&&e.errors.forEach(e=>{(e?.originalError?.name?.startsWith("UnauthorizedException")||e.message?.startsWith("Connection failed:")&&e.message?.includes("Permission denied"))&&(e.message="Unauthorized",e.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")}),e}let r0={name:"NoApiKey",message:y.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},r1={name:"NoCredentials",message:y.NO_CREDENTIALS,recoverySuggestion:`The API request was made with \`authMode: "iam"\` but no authentication credentials are available.

If you intended to make a request using an authenticated role, review if your user is signed in before making the request.

If you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the \`Amplify.configure()\` function.`},r2={name:"NoValidAuthTokens",message:y.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},r4={name:"NoSignedUser",message:y.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},r6={name:"NoAuthorizationHeader",message:y.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},r3={name:"NoEndpoint",message:"No GraphQL endpoint configured in `Amplify.configure()`.",recoverySuggestion:"Review if the GraphQL API endpoint is set in the `Amplify.configure()` function."},r5=e=>({data:{},errors:[new tM(e.message,null,null,null,null,e)]});async function r9(e,t,n,r={}){let i={};switch(t){case"apiKey":if(!n)throw new rz(r0);i={"X-Api-Key":n};break;case"iam":if(void 0===(await e.Auth.fetchAuthSession()).credentials)throw new rz(r1);break;case"oidc":case"userPool":{let t;try{t=(await e.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(e){throw new rz({...r4,underlyingError:e})}if(!t)throw new rz(r2);i={Authorization:t};break}case"lambda":if("object"==typeof r&&!r.Authorization)throw new rz(r6);i={Authorization:r.Authorization}}return i}let r8=e=>"function"!=typeof e;class r7{constructor(){this.appSyncRealTime=new Map,this._api={post:ri,cancelREST:ro,isCancelErrorREST:nm,updateRequestToBeCancellable:rs}}getModuleName(){return"InternalGraphQLAPI"}getGraphqlOperationType(e){let[{operation:t}]=t2(e).definitions;return t}graphql(e,{query:t,variables:n={},authMode:r,authToken:i,endpoint:o,apiKey:s},a,c){let u="string"==typeof t?t2(t):t2(t8(t)),[l={}]=u.definitions.filter(e=>"OperationDefinition"===e.kind),{operation:d}=l,h=a||{};switch(d){case"query":case"mutation":{let t;let a=new AbortController;return t=r8(e)?this._graphql(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},h,a,c,i):e(async e=>await this._graphql(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},h,a,c,i)),this._api.updateRequestToBeCancellable(t,a),t}case"subscription":return this._graphqlSubscribe(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},h,c,i);default:throw Error(`invalid operation type: ${d}`)}}async _graphql(e,{query:t,variables:n,authMode:r,endpoint:i,apiKey:o},s={},a,c,u){var l;let d,h,p;let{apiKey:f,region:y,endpoint:g,customEndpoint:m,customEndpointRegion:v,defaultAuthMode:b}=rH(e),S=r||b||"iam",E="identityPool"===S?"iam":S,{headers:I,withCredentials:w}=rX(e);if("function"==typeof s){let e={method:"POST",url:new nl.a(i||m||g||"").toString(),queryString:t8(t)};d=await s(e)}else d=s;u&&(d={...d,Authorization:u});let T=await r9(e,E,o??f,d),A={...!m&&T,...m&&(v?T:{})||{},...I&&await I({query:t8(t),variables:n}),...d,...!m&&{"x-amz-user-agent":(0,nd.Zm)(c)}},k={query:t8(t),variables:n||null};h=m&&!v||"oidc"!==E&&"userPool"!==E&&"iam"!==E&&"lambda"!==E?void 0:{service:v?"execute-api":"appsync",region:v||y};let N=i||m||g;if(!N)throw r5(new rz(r3));try{let{body:t}=await this._api.post(e,{url:new nl.a(N),options:{headers:A,body:k,signingServiceInfo:h,withCredentials:w},abortController:a});p=await t.json()}catch(e){if(this.isCancelError(e))throw e;p=r5(e)}if((l=p)&&Array.isArray(l.errors)&&l.errors.length>0)throw rZ(p);return p}isCancelError(e){return this._api.isCancelErrorREST(e)}cancel(e,t){return this._api.cancelREST(e,t)}_graphqlSubscribe(e,{query:t,variables:n,authMode:r,apiKey:i,endpoint:o},s={},a,c){let u=rH(e),l=r||u?.defaultAuthMode||"iam",{headers:d}=rX(e),h=o??u?.endpoint,p=h??"none",f=this.appSyncRealTime.get(p)??new rQ;return this.appSyncRealTime.set(p,f),f.subscribe({query:t8(t),variables:n,appSyncGraphqlEndpoint:h,region:u?.region,authenticationType:"identityPool"===l?"iam":l,apiKey:i??u?.apiKey,additionalHeaders:s,authToken:c,libraryConfigHeaders:d},a).pipe(function e(t){return k(function(n,r){var i,o,s=null,a=!1;s=n.subscribe(new J(r,void 0,void 0,function(i){o=nc(t(i,e(t)(n))),s?(s.unsubscribe(),s=null,o.subscribe(r)):a=!0},void 0)),a&&(s.unsubscribe(),s=null,o.subscribe(r))})}(e=>{if(e.errors)throw rZ(e);throw e}))}}new r7;class ie extends r7{getModuleName(){return"GraphQLAPI"}graphql(e,t,n){let r={category:tS.WD.API,action:tS.gq.GraphQl};if(eS in t){let{[eS]:i,...o}=t;return super.graphql(e,o,n,{...r,...i})}return super.graphql(e,t,n,{...r})}isCancelError(e){return super.isCancelError(e)}cancel(e,t){return super.cancel(e,t)}}let it=new ie;function ir(e,t){let n=tb(this),r=n.endpoint,i=n.authMode,o=n.apiKey;if(e.authMode=e.authMode||i,e.apiKey=e.apiKey??o,e.authToken=e.authToken||n.authToken,r&&"apiKey"===e.authMode&&!e.apiKey)throw Error("graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.");let s=t||n.headers;return it.graphql(n.amplify,{...e,endpoint:r},s)}function ii(e,t){return it.cancel(e,t)}function io(e){return it.isCancelError(e)}let is=e=>{T.Xb.listen("core",t=>{if("configure"!==t.payload.event)return;let n=t.payload.data.API?.GraphQL;void 0!==n&&th(e,n,tb)})},ia=new Proxy({},{get(){throw Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}});var ic=n(5165);function iu(e){return function(e){let t={[tp]:e.amplify,[tf]:e.authMode,[ty]:e.authToken,[tg]:"apiKey"in e?e.apiKey:void 0,[tv]:"endpoint"in e?e.endpoint:void 0,[tm]:e.headers,graphql:ir,cancel:ii,isCancelError:io,models:ia,enums:ia,queries:ia,mutations:ia,subscriptions:ia},n=e.amplify.getConfig().API?.GraphQL;if(t[tv]){if(!t[tf])throw Error("generateClient() requires an explicit `authMode` when `endpoint` is provided.");if("apiKey"===t[tf]&&!t[tg])throw Error("generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.")}return t[tv]||(void 0!==n?th(t,n,tb):is(t)),t}({...e||{},amplify:ic.d})}},4686:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(5967);class i extends r._{constructor(e){super(e),this.constructor=i,Object.setPrototypeOf(this,i.prototype)}}},9509:function(e,t,n){"use strict";n.d(t,{EU:function(){return o},Jg:function(){return i},MA:function(){return a},VL:function(){return l},hj:function(){return h},mP:function(){return s},sX:function(){return p},vC:function(){return c},wW:function(){return d},x9:function(){return u}});var r=n(4686);let i="UserUnAuthenticatedException",o="UserAlreadyAuthenticatedException",s="DeviceMetadataNotFoundException",a="AutoSignInException",c=new r.l({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new r.l({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});let u=new r.l({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),l=new r.l({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),d="OAuthSignOutException",h="TokenRefreshException",p="UnexpectedSignInInterruptionException"},9559:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(4982),i=n(4686);function o(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new i.l({name:r.Z.Unknown,message:"An unknown error has occurred.",underlyingError:e})}},9874:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});let r="cognito-idp"},8196:function(e,t,n){"use strict";n.d(t,{n:function(){return a}});var r=n(7836),i=n(5434),o=n(4629),s=n(1847);let a={service:n(9874).t,retryDecider:(0,r.j)(i.f),computeDelay:o.k,userAgentValue:(0,s.Zm)(),cache:"no-store"}},6378:function(e,t,n){"use strict";n.d(t,{N:function(){return c}});var r=n(7099),i=n(4719),o=n(5059),s=n(5409),a=n(8196);let c=e=>(0,r.z)(s.x,(0,i.u)("InitiateAuth"),(0,o.o)(),{...a.n,...e})},5409:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(182),i=n(3484);let o=(0,r.V)(i.y,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}])},5059:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(5434),i=n(9559),o=n(4686);let s=()=>async e=>{if(e.statusCode>=300){let t=await (0,r.f)(e);throw(0,i.R)(t),new o.l({name:t.name,message:t.message,metadata:t.$metadata})}return(0,r.e)(e)}},4719:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});let r=e=>(t,n)=>o(n,i(e),JSON.stringify(t)),i=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),o=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"})},6605:function(e,t,n){"use strict";n.d(t,{N:function(){return o},y:function(){return i}});var r=n(4686);function i(e){let t=e?.split("_")[0];if(!e||0>e.indexOf("_")||!t||"string"!=typeof t)throw new r.l({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function o(e){if(!e||!e.includes(":"))throw new r.l({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}},3638:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var r=n(6743),i=n(8481),o=n(9874);let s=({region:e})=>({url:new r.a(`https://${o.t}.${e}.${(0,i.b)(e)}`)}),a=({endpointOverride:e})=>t=>e?{url:new r.a(e)}:s(t)},2684:function(e,t,n){"use strict";n.d(t,{sI:function(){return d},_X:function(){return p}});var r,i=n(3461),o=n(4686);let s={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var a=n(2199);(r||(r={})).InvalidAuthTokens="InvalidAuthTokens";let c={[r.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},u=(0,a.$)(c),l="CognitoIdentityServiceProvider";class d{getKeyValueStorage(){if(!this.keyValueStorage)throw new o.l({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{let e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new o.l({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let n=(0,i.xp)(t),r=await this.getKeyValueStorage().getItem(e.idToken),s=r?(0,i.xp)(r):void 0,a=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,c=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",u=Number.parseInt(c),l=await this.getKeyValueStorage().getItem(e.signInDetails),d={accessToken:n,idToken:s,refreshToken:a,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:u,username:await this.getLastAuthUser()};return l&&(d.signInDetails=JSON.parse(l)),d}catch(e){return null}}async storeTokens(e){u(void 0!==e,r.InvalidAuthTokens);let t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(n.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${e.clockDrift}`)}async clearTokens(){let e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){let t=await this.getAuthKeys(e),n=await this.getKeyValueStorage().getItem(t.deviceKey),r=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i&&r&&n?{deviceKey:n,deviceGroupKey:r,randomPassword:i}:null}async clearDeviceMetadata(e){let t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){(0,i.FG)(this.authConfig?.Cognito);let t=e??await this.getLastAuthUser();return h(l,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){(0,i.FG)(this.authConfig?.Cognito);let e=this.authConfig.Cognito.userPoolClientId;return`${l}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){let{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){let{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}let h=(e,t)=>p(s)(`${e}`,t);function p(e){let t=Object.values({...e});return(e,n)=>t.reduce((t,r)=>({...t,[r]:`${e}.${n}.${r}`}),{})}},8714:function(e,t,n){"use strict";let r;n.d(t,{D:function(){return A},C:function(){return k}});var i,o=n(4685),s=n(3461),a=n(6605),c=n(6566),u=n(4686),l=n(6378),d=n(3638),h=n(2562);let p=(i=async({tokens:e,authConfig:t,username:n})=>{(0,s.FG)(t?.Cognito);let{userPoolId:r,userPoolClientId:i,userPoolEndpoint:o}=t.Cognito,p=(0,a.y)(r);(0,c.XD)(e);let f=e.refreshToken,y={REFRESH_TOKEN:f};e.deviceMetadata?.deviceKey&&(y.DEVICE_KEY=e.deviceMetadata.deviceKey);let g=(0,h.u)({username:n,userPoolId:r,userPoolClientId:i}),m=(0,l.N)({endpointResolver:(0,d.e)({endpointOverride:o})}),{AuthenticationResult:v}=await m({region:p},{ClientId:i,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:y,UserContextData:g}),b=(0,s.xp)(v?.AccessToken??""),S=v?.IdToken?(0,s.xp)(v.IdToken):void 0,{iat:E}=b.payload;if(!E)throw new u.l({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:b,idToken:S,clockDrift:1e3*E-new Date().getTime(),refreshToken:f,username:n}},async(...e)=>r||(r=new Promise((t,n)=>{i(...e).then(e=>{t(e)}).catch(e=>{n(e)}).finally(()=>{r=void 0})})));var f=n(2684),y=n(305),g=n(2459);function m({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}var v=n(4982),b=n(9559);let S=new(n(4574)).R(o.Fm),E=[],I=e=>{E.push(e)};class w{constructor(){this.waitForInflightOAuth=(0,g.j)()?async()=>await S.loadOAuthInFlight()?(this.inflightPromise||(this.inflightPromise=new Promise((e,t)=>{I(e)})),this.inflightPromise):void 0:async()=>{}}setAuthConfig(e){S.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new u.l({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new u.l({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{(0,s.FG)(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();let n=await this.getTokenStore().getLastAuthUser();if(null===t)return null;let r=!!t?.idToken&&m({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),i=m({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(e?.forceRefresh||r||i)&&null===(t=await this.refreshTokens({tokens:t,username:n}))?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{let{signInDetails:n}=e,r=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return r.signInDetails=n,await this.setTokens({tokens:r}),y.Xb.dispatch("auth",{event:"tokenRefresh"},"Auth",y.SQ),r}catch(e){return this.handleErrors(e)}}handleErrors(e){if((0,b.R)(e),e.name!==v.Z.NetworkError&&this.clearTokens(),y.Xb.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",y.SQ),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class T{constructor(){this.authTokenStore=new f.sI,this.authTokenStore.setKeyValueStorage(o.Fm),this.tokenOrchestrator=new w,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(p)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}let A=new T,{tokenOrchestrator:k}=A},4574:function(e,t,n){"use strict";n.d(t,{R:function(){return c}});var r=n(3461),i=n(2684),o=n(6566);let s="amplify-signin-with-hostedUI",a="CognitoIdentityServiceProvider";class c{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){(0,r.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){(0,r.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(s),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){(0,r.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){(0,r.FG)(this.cognitoConfig);let t=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){(0,r.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){(0,r.FG)(this.cognitoConfig);let t=u(a,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){(0,r.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){(0,r.FG)(this.cognitoConfig);let t=u(a,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){(0,r.FG)(this.cognitoConfig);let e=u(a,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(s),[n,i]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===t,preferPrivateSession:"true"===i}}async storeOAuthSignIn(e,t=!1){(0,r.FG)(this.cognitoConfig);let n=u(a,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${e},${t}`)}}let u=(e,t)=>(0,i._X)(o.Bx)(e,t)},6566:function(e,t,n){"use strict";n.d(t,{Bx:function(){return d},CA:function(){return o},Cg:function(){return s},XD:function(){return u},tr:function(){return l}});var r=n(4686),i=n(9509);function o(e){if(!e||!e.accessToken)throw new r.l({name:i.Jg,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function s(e){if(!e||!e.idToken)throw new r.l({name:i.Jg,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}let a=new r.l({name:i.hj,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),c=new r.l({name:i.Jg,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function u(e){if(h(e)&&!e?.refreshToken)throw a;if(!(h(e)&&e?.refreshToken))throw c}function l(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new r.l({name:i.mP,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}let d={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function h(e){return e?.accessToken||e?.idToken}},2562:function(e,t,n){"use strict";function r({username:e,userPoolId:t,userPoolClientId:n}){if("undefined"==typeof window)return;let r=window.AmazonCognitoAdvancedSecurityData;if(void 0===r)return;let i=r.getData(e,t,n);return i?{EncodedData:i}:{}}n.d(t,{u:function(){return r}})},305:function(e,t,n){"use strict";n.d(t,{SQ:function(){return s},Xb:function(){return u},qC:function(){return l}});var r=n(6344),i=n(8159),o=n(5967);let s="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",a=new r.k("Hub");class c{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){let n=this.listeners.get(e);if(!n){a.warn(`No listeners for ${e}`);return}this.listeners.set(e,[...n.filter(({callback:e})=>e!==t)])}dispatch(e,t,n,r){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&r!==s&&a.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`);let i={channel:e,payload:{...t},source:n,patternInfo:[]};try{this._toListeners(i)}catch(e){a.error(e)}}listen(e,t,n="noname"){if("function"!=typeof t)throw new o._({name:i.z2,message:"No callback supplied to Hub"});let r=this.listeners.get(e);return r||(r=[],this.listeners.set(e,r)),r.push({name:n,callback:t}),()=>{this._remove(e,t)}}_toListeners(e){let{channel:t,payload:n}=e,r=this.listeners.get(t);r&&r.forEach(r=>{a.debug(`Dispatching to ${t} with `,n);try{r.callback(e)}catch(e){a.error(e)}})}}let u=new c("__default__"),l=new c("internal-hub")},6344:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var r,i,o=n(8159);(r=i||(i={})).DEBUG="DEBUG",r.ERROR="ERROR",r.INFO="INFO",r.WARN="WARN",r.VERBOSE="VERBOSE",r.NONE="NONE";let s={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class a{constructor(e,t=i.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){let e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e&&(this._config=e),this._config}_log(e,...t){let n=this.level;a.LOG_LEVEL&&(n=a.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL);let r=s[n];if(!(s[e]>=r))return;let o=console.log.bind(console);e===i.ERROR&&console.error&&(o=console.error.bind(console)),e===i.WARN&&console.warn&&(o=console.warn.bind(console)),a.BIND_ALL_LOG_LEVELS&&(e===i.INFO&&console.info&&(o=console.info.bind(console)),e===i.DEBUG&&console.debug&&(o=console.debug.bind(console)));let c=`[${e}] ${this._ts()} ${this.name}`,u="";if(1===t.length&&"string"==typeof t[0])o(u=`${c} - ${t[0]}`);else if(1===t.length)u=`${c} ${t[0]}`,o(c,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),u=`${c} - ${t[0]} ${e}`,o(`${c} - ${t[0]}`,e)}else u=`${c} ${t}`,o(c,t);for(let e of this._pluggables){let t={message:u,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(i.INFO,...e)}info(...e){this._log(i.INFO,...e)}warn(...e){this._log(i.WARN,...e)}error(...e){this._log(i.ERROR,...e)}debug(...e){this._log(i.DEBUG,...e)}verbose(...e){this._log(i.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===o.YG&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}a.LOG_LEVEL=null,a.BIND_ALL_LOG_LEVELS=!1},7977:function(e,t,n){"use strict";let r;n.d(t,{Cj:function(){return m},QW:function(){return v}});var i=n(5),o=n(4155);let s=()=>"undefined"!=typeof global,a=()=>"undefined"!=typeof window,c=()=>"undefined"!=typeof document,u=()=>void 0!==o,l=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t));var d=n(4155),h=n(4155),p=n(4155);let f=[{platform:i.gQ.Expo,detectionMethod:function(){return s()&&void 0!==global.expo}},{platform:i.gQ.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:i.gQ.NextJs,detectionMethod:function(){return a()&&window.next&&"object"==typeof window.next}},{platform:i.gQ.Nuxt,detectionMethod:function(){return a()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:i.gQ.Angular,detectionMethod:function(){let e=!!(c()&&document.querySelector("[ng-version]")),t=!!(a()&&void 0!==window.ng);return e||t}},{platform:i.gQ.React,detectionMethod:function(){let e=e=>e.startsWith("_react")||e.startsWith("__react");return c()&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:i.gQ.VueJs,detectionMethod:function(){return a()&&l(window,"__VUE")}},{platform:i.gQ.Svelte,detectionMethod:function(){return a()&&l(window,"__SVELTE")}},{platform:i.gQ.WebUnknown,detectionMethod:function(){return a()}},{platform:i.gQ.NextJsSSR,detectionMethod:function(){return s()&&(l(global,"__next")||l(global,"__NEXT"))}},{platform:i.gQ.NuxtSSR,detectionMethod:function(){return s()&&void 0!==global.__NUXT_PATHS__}},{platform:i.gQ.ReactSSR,detectionMethod:function(){return u()&&void 0!==d.env&&!!Object.keys(d.env).find(e=>e.includes("react"))}},{platform:i.gQ.VueJsSSR,detectionMethod:function(){return s()&&l(global,"__VUE")}},{platform:i.gQ.AngularSSR,detectionMethod:function(){return u()&&"object"==typeof p.env&&p.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:i.gQ.SvelteSSR,detectionMethod:function(){return u()&&void 0!==h.env&&!!Object.keys(h.env).find(e=>e.includes("svelte"))}}],y=[],g=!1,m=()=>{if(!r){if(r=f.find(e=>e.detectionMethod())?.platform||i.gQ.ServerSideUnknown,g)for(;y.length;)y.pop()?.();else y.forEach(e=>{e()});b(i.gQ.ServerSideUnknown,10),b(i.gQ.WebUnknown,10)}return r},v=e=>{g||y.push(e)};function b(e,t){r!==e||g||setTimeout(()=>{r=void 0,g=!0,setTimeout(m,1e3)},t)}},1847:function(e,t,n){"use strict";n.d(t,{Zm:function(){return h}});var r=n(5);let i="6.14.4";var o=n(7977);let s={},a=(e,t)=>s[e]?.[t]?.additionalDetails,c="aws-amplify",u=e=>e.replace(/\+.*/,"");class l{constructor(){this.userAgent=`${c}/${u(i)}`}get framework(){return(0,o.Cj)()}get isReactNative(){return this.framework===r.gQ.ReactNative||this.framework===r.gQ.Expo}observeFrameworkChanges(e){(0,o.QW)(e)}}new l;let d=({category:e,action:t}={})=>{let n=[[c,u(i)]];if(e&&n.push([e,t]),n.push(["framework",(0,o.Cj)()]),e&&t){let r=a(e,t);r&&r.forEach(e=>{n.push(e)})}return n},h=e=>d(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" ")},5:function(e,t,n){"use strict";var r,i,o,s,a,c,u,l,d,h,p,f,y,g,m,v,b,S,E,I,w,T,A,k,N,O;n.d(t,{WD:function(){return i},g4:function(){return c},gQ:function(){return r},gq:function(){return a}}),(m=r||(r={})).WebUnknown="0",m.React="1",m.NextJs="2",m.Angular="3",m.VueJs="4",m.Nuxt="5",m.Svelte="6",m.ServerSideUnknown="100",m.ReactSSR="101",m.NextJsSSR="102",m.AngularSSR="103",m.VueJsSSR="104",m.NuxtSSR="105",m.SvelteSSR="106",m.ReactNative="201",m.Expo="202",(v=i||(i={})).AI="ai",v.API="api",v.Auth="auth",v.Analytics="analytics",v.DataStore="datastore",v.Geo="geo",v.InAppMessaging="inappmessaging",v.Interactions="interactions",v.Predictions="predictions",v.PubSub="pubsub",v.PushNotification="pushnotification",v.Storage="storage",(b=o||(o={})).CreateConversation="1",b.GetConversation="2",b.ListConversations="3",b.DeleteConversation="4",b.SendMessage="5",b.ListMessages="6",b.OnMessage="7",b.Generation="8",b.UpdateConversation="9",(S=s||(s={})).Record="1",S.IdentifyUser="2",(E=a||(a={})).GraphQl="1",E.Get="2",E.Post="3",E.Put="4",E.Patch="5",E.Del="6",E.Head="7",(I=c||(c={})).SignUp="1",I.ConfirmSignUp="2",I.ResendSignUpCode="3",I.SignIn="4",I.FetchMFAPreference="6",I.UpdateMFAPreference="7",I.SetUpTOTP="10",I.VerifyTOTPSetup="11",I.ConfirmSignIn="12",I.DeleteUserAttributes="15",I.DeleteUser="16",I.UpdateUserAttributes="17",I.FetchUserAttributes="18",I.ConfirmUserAttribute="22",I.SignOut="26",I.UpdatePassword="27",I.ResetPassword="28",I.ConfirmResetPassword="29",I.FederatedSignIn="30",I.RememberDevice="32",I.ForgetDevice="33",I.FetchDevices="34",I.SendUserAttributeVerificationCode="35",I.SignInWithRedirect="36",I.StartWebAuthnRegistration="37",I.CompleteWebAuthnRegistration="38",I.ListWebAuthnCredentials="39",I.DeleteWebAuthnCredential="40",(w=u||(u={})).Subscribe="1",w.GraphQl="2",(T=l||(l={})).SearchByText="0",T.SearchByCoordinates="1",T.SearchForSuggestions="2",T.SearchByPlaceId="3",T.SaveGeofences="4",T.GetGeofence="5",T.ListGeofences="6",T.DeleteGeofences="7",(A=d||(d={})).SyncMessages="1",A.IdentifyUser="2",A.NotifyMessageInteraction="3",(h||(h={})).None="0",(k=p||(p={})).Convert="1",k.Identify="2",k.Interpret="3",(f||(f={})).Subscribe="1",(N=y||(y={})).InitializePushNotifications="1",N.IdentifyUser="2",(O=g||(g={})).UploadData="1",O.DownloadData="2",O.List="3",O.Copy="4",O.Remove="5",O.GetProperties="6",O.GetUrl="7",O.GetDataAccess="8",O.ListCallerAccessGrants="9"},8481:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});let r={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},i={partitions:[r,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},o=e=>{let{partitions:t}=i;for(let{regions:n,outputs:r,regionRegex:i}of t){let t=new RegExp(i);if(n.includes(e)||t.test(e))return r.dnsSuffix}return r.outputs.dnsSuffix}},3484:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});var r=n(1693),i=n(8726);n(5169),n(6361);var o=n(5194),s=n(9265),a=n(182),c=n(525);let u=(0,a.V)(c.S,[s.n,()=>e=>async function(t){return t.headers[o.vt]||(t.headers[o.vt]=(0,i.r)()),e(t)},r.d,({maxAttempts:e=o.tZ})=>(t,n)=>async function(r){let i=n.attemptsCount??0;return r.headers[o.zG]=`attempt=${i+1}; max=${e}`,t(r)}])},525:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var r=n(5967),i=n(4982);let o=e=>{let t;return()=>(t||(t=e()),t)},s=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),a=async({url:e,method:t,headers:n,body:a},{abortSignal:c,cache:u,withCrossDomainCredentials:l})=>{let d;try{d=await fetch(e,{method:t,headers:n,body:s(t)?a:void 0,signal:c,cache:u,credentials:l?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new r._({name:i.Z.NetworkError,message:"A network error has occurred.",underlyingError:e});throw e}let h={};d.headers?.forEach((e,t)=>{h[t.toLowerCase()]=e});let p={statusCode:d.status,headers:h,body:null},f=Object.assign(d.body??{},{text:o(()=>d.text()),blob:o(()=>d.blob()),json:o(()=>d.json())});return{...p,body:f}}},7099:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});let r=(e,t,n,r)=>async(i,o)=>{let s={...r,...i},a=await s.endpointResolver(s,o),c=await t(o,a);return n(await e(c,{...s}))}},182:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r=(e,t)=>(n,r)=>{let i={},o=t=>e(t,r);for(let e=t.length-1;e>=0;e--)o=(0,t[e])(r)(o,i);return o(n)}},5194:function(e,t,n){"use strict";n.d(t,{tZ:function(){return r},vt:function(){return i},yx:function(){return s},zG:function(){return o}});let r=3,i="amz-sdk-invocation-id",o="amz-sdk-request",s=3e5},7836:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var r=n(4982);let i=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],o=e=>!!e&&i.includes(e),s=e=>async(t,n)=>{let r=n??await e(t)??void 0,i=r?.code||r?.name,s=t?.statusCode;return{retryable:l(n)||u(s,i)||o(i)||d(s,i)}},a=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],c=["TimeoutError","RequestTimeout","RequestTimeoutException"],u=(e,t)=>429===e||!!t&&a.includes(t),l=e=>[r.Z.NetworkError,"ERR_NETWORK"].includes(e?.name),d=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&c.includes(t)},4629:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(8161),i=n(5194);let o=e=>{let t=(0,r.k)(i.yx)(e);return!1===t?i.yx:t}},1693:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(5194);let i=({maxAttempts:e=r.tZ,retryDecider:t,computeDelay:n,abortSignal:i})=>{if(e<1)throw Error("maxAttempts must be greater than 0");return(r,a)=>async function(c){let u,l;let d=a.attemptsCount??0,h=()=>{if(l)return s(l,d),l;throw s(u,d),u};for(;!i?.aborted&&d<e;){try{l=await r(c),u=void 0}catch(e){u=e,l=void 0}d=(a.attemptsCount??0)>d?a.attemptsCount??0:d+1,a.attemptsCount=d;let{isCredentialsExpiredError:s,retryable:p}=await t(l,u,a);if(!p)return h();if(a.isCredentialsExpired=!!s,!i?.aborted&&d<e){let e=n(d);await o(e,i)}}if(!i?.aborted)return h();throw Error("Request aborted.")}},o=(e,t)=>{let n,r;if(t?.aborted)return Promise.resolve();let i=new Promise(t=>{r=t,n=setTimeout(t,e)});return t?.addEventListener("abort",function e(i){clearTimeout(n),t?.removeEventListener("abort",e),r()}),i},s=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})}},9265:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});let r=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(r){if(0===t.trim().length)return await n(r);{let i=e.toLowerCase();return r.headers[i]=r.headers[i]?`${r.headers[i]} ${t}`:t,await n(r)}}},5434:function(e,t,n){"use strict";n.d(t,{e:function(){return o},f:function(){return i}});var r=n(9300);let i=async e=>{if(!e||e.statusCode<300)return;let t=await o(e),n=(e=>{let[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError");return Object.assign(Error(t.message??t.Message??"Unknown error"),{name:n,$metadata:(0,r.B)(e)})},o=async e=>{if(!e.body)throw Error("Missing response payload");return Object.assign(await e.body.json(),{$metadata:(0,r.B)(e)})}},9300:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});let r=e=>{let{headers:t,statusCode:n}=e;return{...i(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},i=e=>"object"==typeof e?.$metadata},8159:function(e,t,n){"use strict";n.d(t,{Mt:function(){return i},YG:function(){return r},z2:function(){return o}});let r="Logging",i="x-amz-user-agent",o="NoHubcallbackProvidedException"},5967:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});class r extends Error{constructor({message:e,name:t,recoverySuggestion:n,underlyingError:i,metadata:o}){if(super(e),this.name=t,this.underlyingError=i,this.recoverySuggestion=n,o){let{extendedRequestId:e,httpStatusCode:t,requestId:n}=o;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:n}}this.constructor=r,Object.setPrototypeOf(this,r.prototype)}}},2199:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var r=n(5967);let i=(e,t=r._)=>(n,r,i)=>{let{message:o,recoverySuggestion:s}=e[r];if(!n)throw new t({name:r,message:i?`${o} ${i}`:o,recoverySuggestion:s})}},5165:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(305);let i=e=>{for(let t of Reflect.ownKeys(e)){let n=e[t];(n&&"object"==typeof n||"function"==typeof n)&&i(n)}return Object.freeze(e)},o=Symbol("oauth-listener");var s=n(2640);n(5169),n(6361);class a{configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,n;let r=await this.getTokens(e);return r?(n=r.accessToken?.payload?.sub,t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:r,authenticated:!0,forceRefresh:e.forceRefresh})):t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh}),{tokens:r,credentials:t?.credentials,identityId:t?.identityId,userSub:n}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(e){return await this.authOptions?.tokenProvider?.getTokens(e)??void 0}}class c{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new a}configure(e,t){let n=(0,s.h)(e);this.resourcesConfig=n,t&&(this.libraryOptions=t),this.resourcesConfig=i(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),r.Xb.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",r.SQ),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[o](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}}let u=new c},3461:function(e,t,n){"use strict";n.d(t,{YE:function(){return d},V0:function(){return l},FG:function(){return u},xp:function(){return h}});var r,i,o=n(905),s=n(2199);(r=i||(i={})).AuthTokenConfigException="AuthTokenConfigException",r.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",r.AuthUserPoolException="AuthUserPoolException",r.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",r.OAuthNotConfigureException="OAuthNotConfigureException";let a={[i.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[i.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[i.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[i.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[i.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},c=(0,s.$)(a);function u(e){c(!!e&&!!e.userPoolId&&!!e.userPoolClientId,i.AuthUserPoolException)}function l(e){c(!!e?.loginWith?.oauth?.domain&&!!e?.loginWith?.oauth?.redirectSignOut&&!!e?.loginWith?.oauth?.redirectSignIn&&!!e?.loginWith?.oauth?.responseType,i.OAuthNotConfigureException)}function d(e){c(!!e?.identityPoolId,i.InvalidIdentityPoolIdException)}function h(e){let t=e.split(".");if(3!==t.length)throw Error("Invalid token");try{let n=t[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(o.$.convert(n).split("").map(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),i=JSON.parse(r);return{toString:()=>e,payload:i}}catch(e){throw Error("Invalid token payload")}}},9319:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(5165),i=n(695);let o=e=>(0,i.y)(r.d,e)},695:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});let r=(e,t)=>e.Auth.fetchAuthSession(t)},4685:function(e,t,n){"use strict";n.d(t,{Fm:function(){return g},$2:function(){return m}});var r=n(4982),i=n(5967);class o extends i._{constructor(){super({name:r.Z.PlatformNotSupported,message:"Function not supported on current platform"})}}class s{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new o;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new o;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new o;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new o;this.storage.clear()}}var a=n(6344);class c{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}let u=new a.k("CoreStorageUtils"),l=()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){u.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new c},d=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw Error("sessionStorage is not defined")}catch(e){return u.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new c}};class h extends s{constructor(){super(l())}}class p extends s{constructor(){super(d())}}class f{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new o;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}class y extends f{constructor(){super(d())}}let g=new h;new p;let m=new y;new s(new c)},4982:function(e,t,n){"use strict";var r,i;n.d(t,{Z:function(){return r}}),(i=r||(r={})).NoEndpointId="NoEndpointId",i.PlatformNotSupported="PlatformNotSupported",i.Unknown="Unknown",i.NetworkError="NetworkError"},6743:function(e,t,n){"use strict";n.d(t,{a:function(){return r},z:function(){return i}});let r=URL,i=URLSearchParams},8726:function(e,t,n){"use strict";let r;n.d(t,{r:function(){return a}});var i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o=new Uint8Array(16),s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));let a=function(e,t,n){if(i.randomUUID&&!t&&!e)return i.randomUUID();let a=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}(a)}},905:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var r=n(4477);let i={convert(e,t){let n=e;return t?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),(0,r.tl)()(n)}}},1698:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var r=n(4477);let i={convert(e,t={urlSafe:!1,skipPadding:!1}){let n="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),i=(0,r.Ds)()(n);return t.urlSafe&&(i=i.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(i=i.replace(/=/g,"")),i}}},4477:function(e,t,n){"use strict";n.d(t,{Ds:function(){return o},MX:function(){return i},tl:function(){return s}});var r=n(5967);let i=()=>{if("object"==typeof window&&"object"==typeof window.crypto)return window.crypto;if("object"==typeof crypto)return crypto;throw new r._({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},o=()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new r._({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},s=()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new r._({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})}},2459:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});let r=()=>"undefined"!=typeof window&&void 0!==window.document},2640:function(e,t,n){"use strict";n.d(t,{h:function(){return p}});var r=n(6344),i=n(5967);let o=new r.k("parseAWSExports"),s={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},a=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new i._({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:a,aws_bots_config:c,aws_cognito_identity_pool_id:d,aws_cognito_sign_up_verification_method:h,aws_cognito_mfa_configuration:p,aws_cognito_mfa_types:f,aws_cognito_password_protection_settings:y,aws_cognito_verification_mechanisms:g,aws_cognito_signup_attributes:m,aws_cognito_social_providers:v,aws_cognito_username_attributes:b,aws_mandatory_sign_in:S,aws_mobile_analytics_app_id:E,aws_mobile_analytics_app_region:I,aws_user_files_s3_bucket:w,aws_user_files_s3_bucket_region:T,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:A,aws_user_pools_id:k,aws_user_pools_web_client_id:N,geo:O,oauth:C,predictions:_,aws_cloud_logic_custom:x,Notifications:D,modelIntrospection:R}=e,P={};E&&(P.Analytics={Pinpoint:{appId:E,region:I}});let{InAppMessaging:L,Push:M}=D??{};if(L?.AWSPinpoint||M?.AWSPinpoint){if(L?.AWSPinpoint){let{appId:e,region:t}=L.AWSPinpoint;P.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(M?.AWSPinpoint){let{appId:e,region:t}=M.AWSPinpoint;P.Notifications={...P.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(c)&&(P.Interactions={LexV1:Object.fromEntries(c.map(e=>[e.name,e]))}),r){let e=s[n];e||o.debug(`Invalid authentication type ${n}. Falling back to IAM.`),P.API={GraphQL:{endpoint:r,apiKey:t,region:a,defaultAuthMode:e??"iam"}},R&&(P.API.GraphQL.modelIntrospection=R)}let U=p?{status:p&&p.toLowerCase(),totpEnabled:f?.includes("TOTP")??!1,smsEnabled:f?.includes("SMS")??!1}:void 0,F=y?{minLength:y.passwordPolicyMinLength,requireLowercase:y.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:y.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:y.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:y.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,j=Array.from(new Set([...g??[],...m??[]])).reduce((e,t)=>({...e,[t.toLowerCase()]:{required:!0}}),{}),K=b?.includes("EMAIL")??!1,V=b?.includes("PHONE_NUMBER")??!1;(d||k)&&(P.Auth={Cognito:{identityPoolId:d,allowGuestAccess:"enable"!==S,signUpVerificationMethod:h,userAttributes:j,userPoolClientId:N,userPoolId:k,mfa:U,passwordFormat:F,loginWith:{username:!(K||V),email:K,phone:V}}});let $=!!C&&Object.keys(C).length>0,G=!!v&&v.length>0;if(P.Auth&&$&&(P.Auth.Cognito.loginWith={...P.Auth.Cognito.loginWith,oauth:{...u(C),...G&&{providers:l(v)}}}),w&&(P.Storage={S3:{bucket:w,region:T,dangerouslyConnectToHttpEndpointForTesting:A}}),O){let{amazon_location_service:e}=O;P.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(x&&(P.API={...P.API,REST:x.reduce((e,t)=>{let{name:n,endpoint:r,region:i,service:o}=t;return{...e,[n]:{endpoint:r,...o?{service:o}:void 0,...i?{region:i}:void 0}}},{})}),_){let{VoiceId:e}=_?.convert?.speechGenerator?.defaults??{};P.Predictions=e?{..._,convert:{..._.convert,speechGenerator:{..._.convert.speechGenerator,defaults:{voiceId:e}}}}:_}return P},c=e=>e?.split(",")??[],u=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:i})=>({domain:e,scopes:t,redirectSignIn:c(n),redirectSignOut:c(r),responseType:i}),l=e=>e.map(e=>{let t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}),d={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"},h={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"},p=e=>Object.keys(e).some(e=>e.startsWith("aws_"))?a(e):!function(e){let{version:t}=e;return!!t&&t.startsWith("1")}(e)?e:function(e){let t={};if(e.storage&&(t.Storage=function(e){if(!e)return;let{bucket_name:t,aws_region:n,buckets:r}=e;return{S3:{bucket:t,region:n,buckets:r&&function(e){let t={};return e.forEach(({name:e,bucket_name:n,aws_region:r,paths:i})=>{if(e in t)throw Error(`Duplicate friendly name found: ${e}. Name must be unique.`);let o=i?Object.entries(i).reduce((e,[t,n])=>(void 0!==n&&(e[t]=n),e),{}):void 0;t[e]={bucketName:n,region:r,paths:o}}),t}(r)}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:i,mfa_configuration:o,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:c,username_attributes:u,standard_required_attributes:l,groups:d}=e,p={Cognito:{userPoolId:t,userPoolClientId:n,groups:d}};return r&&(p.Cognito={...p.Cognito,identityPoolId:r}),i&&(p.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:i.min_length??6}),o&&(p.Cognito.mfa={status:"OPTIONAL"===o?"optional":"REQUIRED"===o?"on":"off",smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(p.Cognito.allowGuestAccess=a),c&&(p.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:"token"===c.response_type?"token":"code",scopes:c.scopes,providers:function(e=[]){return e.reduce((e,t)=>(void 0!==h[t]&&e.push(h[t]),e),[])}(c.identity_providers)}}),u&&(p.Cognito.loginWith={...p.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),l&&(p.Cognito.userAttributes=l.reduce((e,t)=>({...e,[t]:{required:!0}}),{})),p}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;let{aws_region:t,geofence_collections:n,maps:r,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:r}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;let{aws_region:t,default_authorization_type:n,url:r,api_key:i,model_introspection:o}=e;return{GraphQL:{endpoint:r,defaultAuthMode:d[n],region:t,apiKey:i,modelIntrospection:o}}}(e.data)),e.custom){let n=function(e){if(!e?.events)return;let{url:t,aws_region:n,api_key:r,default_authorization_type:i}=e.events;return{Events:{endpoint:t,defaultAuthMode:d[i],region:n,apiKey:r}}}(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=function(e){if(!e)return;let{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,i=n.includes("IN_APP_MESSAGING"),o=n.includes("APNS")||n.includes("FCM");if(!(i||o))return;let s={};return i&&(s.InAppMessaging={Pinpoint:{appId:r,region:t}}),o&&(s.PushNotification={Pinpoint:{appId:r,region:t}}),s}(e.notifications)),t}(e)},7961:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});let r=3e5},8161:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(7961);function i(e=r.t){return t=>{let n=2**t*100+100*Math.random();return!(n>e)&&n}}},9556:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{V:function(){return Q}});var i=function e(t,n){function i(e,i,o){if("undefined"!=typeof document){"number"==typeof(o=r({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in o)o[a]&&(s+="; "+a,!0!==o[a]&&(s+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+s}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=t.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){i(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class o{constructor(e={}){let{path:t,domain:n,expires:r,sameSite:i,secure:o}=e;if(this.domain=n,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?r:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||o,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!i||!["strict","lax","none"].includes(i))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,t){i.set(e,t,this.getData())}async getItem(e){return i.get(e)??null}async removeItem(e){i.remove(e,this.getData())}async clear(){let e=Object.keys(i.get()).map(e=>this.removeItem(e));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}var s=n(4685),a=n(5165),c=n(2640),u=n(6344);n(5169),n(6361);var l=n(9300),d=n(5434),h=n(7099),p=n(8481),f=n(3484),y=n(4629),g=n(7836),m=n(6743),v=n(1847),b=n(182),S=n(7977);let E=(0,b.V)(f.y,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),I={service:"cognito-identity",endpointResolver:({region:e})=>({url:new m.a(`https://cognito-identity.${e}.${(0,p.b)(e)}`)}),retryDecider:(0,g.j)(d.f),computeDelay:y.k,userAgentValue:(0,v.Zm)(),cache:"no-store"};(0,S.QW)(()=>{I.userAgentValue=(0,v.Zm)()});let w=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),T=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),A=async e=>{if(e.statusCode>=300)throw await (0,d.f)(e);{let t=await (0,d.e)(e);return{IdentityId:t.IdentityId,Credentials:k(t.Credentials),$metadata:(0,l.B)(e)}}},k=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r&&new Date(1e3*r)}),N=(0,h.z)(E,(e,t)=>T(t,w("GetCredentialsForIdentity"),JSON.stringify(e)),A,I);var O=n(3461),C=n(4686),_=n(9559),x=n(6605),D=n(6566);let R=async e=>{if(!(e.statusCode>=300))return{IdentityId:(await (0,d.e)(e)).IdentityId,$metadata:(0,l.B)(e)};throw await (0,d.f)(e)},P=(0,h.z)(E,(e,t)=>T(t,w("GetId"),JSON.stringify(e)),R,I);function L(e){let t=(0,O.xp)(e).payload.iss,n={};if(!t)throw new C.l({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}async function M({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let r=await n.loadIdentityId();if(r)return r.id;let i=e?.idToken?L(e.idToken.toString()):{},o=await U(i,t);return n.storeIdentityId({id:o,type:e?"primary":"guest"}),o}async function U(e,t){let n;let r=t?.identityPoolId,i=(0,x.N)(r);try{n=(await P({region:i},{IdentityPoolId:r,Logins:e})).IdentityId}catch(e){throw(0,_.R)(e),new C.l(e)}if(!n)throw new C.l({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return n}let F=new u.k("CognitoCredentialsProvider");class j{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){F.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){F.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){let t=e.authenticated,{tokens:n}=e,{authConfig:r}=e;try{(0,O.YE)(r?.Cognito)}catch{return}if(!t&&!r.Cognito.allowGuestAccess)return;let{forceRefresh:i}=e,o=this.hasTokenChanged(n),s=await M({tokens:n,authConfig:r.Cognito,identityIdStore:this._identityIdStore});return((i||o)&&this.clearCredentials(),t)?((0,D.Cg)(n),this.credsForOIDCTokens(r.Cognito,n,s)):this.getGuestCredentials(s,r.Cognito)}async getGuestCredentials(e,t){let n;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return F.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let r=(0,x.N)(t.identityPoolId);try{n=await N({region:r},{IdentityId:e})}catch(e){throw(0,_.R)(e),new C.l(e)}if(n?.Credentials?.AccessKeyId&&n?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let t={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:e};return n.IdentityId&&(t.identityId=n.IdentityId,this._identityIdStore.storeIdentityId({id:n.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new C.l({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,n){let r;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return F.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let i=t.idToken?L(t.idToken.toString()):{},o=(0,x.N)(e.identityPoolId);try{r=await N({region:o},{IdentityId:n,Logins:i})}catch(e){throw(0,_.R)(e),new C.l(e)}if(r?.Credentials?.AccessKeyId&&r?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let e={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:n};return r.IdentityId&&(e.identityId=r.IdentityId,this._identityIdStore.storeIdentityId({id:r.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new C.l({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}var K=n(2684);let V={identityId:"identityId"},$=new u.k("DefaultIdentityIdStore");class G{setAuthConfig(e){(0,O.YE)(e.Cognito),this.authConfig=e,this._authKeys=B("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){(0,O.YE)(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let e=await this.keyValueStorage.getItem(this._authKeys.identityId);if(e)return this._hasGuestIdentityId=!0,{id:e,type:"guest"};return null}}catch(e){return $.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){(0,O.YE)(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let B=(e,t)=>(0,K._X)(V)(`com.amplify.${e}`,t),q=new j(new G(s.Fm));var W=n(8714);let Q={configure(e,t){let n=(0,c.h)(e),r=new o({sameSite:"lax"}),i=t?.ssr?r:s.Fm,u=t?.ssr?new j(new G(r)):q;if(!n.Auth||t?.Auth){a.d.configure(n,t);return}if(!a.d.libraryOptions.Auth){W.D.setAuthConfig(n.Auth),W.D.setKeyValueStorage(i),a.d.configure(n,{...t,Auth:{tokenProvider:W.D,credentialsProvider:u}});return}if(t){let e=a.d.libraryOptions.Auth;void 0!==t.ssr&&(W.D.setKeyValueStorage(i),e.credentialsProvider=u),a.d.configure(n,{Auth:e,...t});return}a.d.configure(n)},getConfig:()=>a.d.getConfig()}},7582:function(e,t,n){"use strict";n.d(t,{CR:function(){return c},FC:function(){return d},Jh:function(){return s},KL:function(){return h},XA:function(){return a},ZT:function(){return i},ev:function(){return u},mG:function(){return o},qq:function(){return l}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function u(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function l(e){return this instanceof l?(this.v=e,this):new l(e)}function d(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{var n;(n=i[e](t)).value instanceof l?Promise.resolve(n.value.v).then(c,u):d(o[0][2],n)}catch(e){d(o[0][3],e)}}function c(e){a("next",e)}function u(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function h(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}"function"==typeof SuppressedError&&SuppressedError}}]);