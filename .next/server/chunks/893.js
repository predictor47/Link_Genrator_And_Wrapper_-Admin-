exports.id=893,exports.ids=[893],exports.modules={2956:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(t,{A:()=>u,n:()=>a});var r=s(5838),n=e([r]);r=(n.then?(await n)():n)[0];let o=!1,c=null,u={Auth:{Cognito:{userPoolId:"us-east-1_Gh00T12dW",userPoolClientId:"5e5a5drp00jd43tr7ph1ceg412",identityPoolId:"us-east-1:a0b02f73-93a3-4b52-b1cb-eaa306375a33",region:"us-east-1"}},API:{GraphQL:{endpoint:"https://vth6pntotrhvfpxo2gwn3kzqry.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1",apiKey:"da2-ee26yqskvzfpjpquwbi53shbvu"}}};async function a(){if(!o)try{try{let e=s(2048),t=s(5315);for(let s of[t.join(process.cwd(),"amplify_outputs.json"),t.join(process.cwd(),".amplify","amplify_outputs.json")])if(e.existsSync(s)){let t=e.readFileSync(s,"utf8");c=JSON.parse(t);break}}catch(e){console.warn("Failed to load amplify_outputs.json on server")}let e=c?.auth?.aws_region||"us-east-1",t={Auth:{Cognito:{userPoolId:c?.auth?.user_pool_id||"us-east-1_Gh00T12dW",userPoolClientId:c?.auth?.user_pool_client_id||"5e5a5drp00jd43tr7ph1ceg412",region:e}}};r.Amplify.configure(t),o=!0}catch(e){console.error("Error configuring Amplify")}}i()}catch(e){i(e)}})},4685:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(t,{H:()=>l,a:()=>h});var r=s(997),n=s(6689),a=s(7200),o=s(2956),c=s(6839),u=e([a,o]);[a,o]=u.then?(await u)():u,(0,o.n)();let d=(0,n.createContext)(void 0);function l({children:e}){let[t,s]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!0),[u,l]=(0,n.useState)(null),h=async()=>{try{o(!0);let e=await a.e.isAuthenticated();if(s(e),e){let e=await a.e.getCurrentUser(),t=await a.e.getUserAttributes();l({...e,attributes:t})}else l(null)}catch(e){console.error("Error checking authentication:",e),s(!1),l(null),(0,c.nT)()}finally{o(!1)}},f=async(e,t)=>{let s=await a.e.signIn({username:e,password:t});return s.isSuccess&&await h(),s},m=async()=>{await a.e.signOut(),await h()},p=async e=>await a.e.signUp(e),y=async e=>{let t=await a.e.completeNewPassword(e);return t.isSuccess&&await h(),t},g=async()=>{try{await a.e.refreshAuthState(),await h()}catch(e){console.error("Error refreshing auth state:",e)}},w={isAuthenticated:t,isLoading:i,user:u,login:f,logout:m,signUp:p,confirmSignUp:a.e.confirmSignUp,completeNewPassword:y,refreshAuthState:g};return r.jsx(d.Provider,{value:w,children:e})}function h(){let e=(0,n.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}i()}catch(e){i(e)}})},7200:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(t,{e:()=>o});var r=s(9779),n=s(2956),a=e([r,n]);[r,n]=a.then?(await a)():a,(0,n.n)();class o{static{this.sessionCheckPromise=null}static{this.lastSessionCheck=0}static{this.sessionCheckInterval=3e4}static{this.forceRefresh=!1}static async signUp(e){try{let{username:t,password:s,email:i,firstName:n,lastName:a}=e,o={email:i,...n&&{name:n},...a&&{family_name:a}},c=await (0,r.signUp)({username:t,password:s,options:{userAttributes:o}});return{isSuccess:!0,message:"Sign up successful! Please check your email for a verification code.",data:c}}catch(e){if(console.error("Sign up error:",e),"UsernameExistsException"===e.name)return{isSuccess:!1,message:"This username is already taken. Please try another one."};return{isSuccess:!1,message:e.message||"Failed to sign up. Please try again."}}}static async signIn(e){try{let{username:t,password:s}=e,i=await (0,r.signIn)({username:t,password:s});return await new Promise(e=>setTimeout(e,500)),await this.waitForSession(),{isSuccess:!0,message:"Successfully signed in",data:i,nextStep:i.nextStep}}catch(e){if(console.error("Sign in error:",e),"UserNotConfirmedException"===e.name)return{isSuccess:!1,message:"Please confirm your account by entering the verification code sent to your email."};if("NotAuthorizedException"===e.name)return{isSuccess:!1,message:"Incorrect username or password."};if("UserNotFoundException"===e.name)return{isSuccess:!1,message:"User does not exist."};return{isSuccess:!1,message:e.message||"Failed to sign in. Please try again."}}}static async confirmSignUp(e,t){try{await (0,r.confirmSignUp)({username:e,confirmationCode:t})}catch(e){throw console.error("Confirm sign up error:",e),e}}static async signOut(){try{await (0,r.signOut)({global:!0}),this.lastSessionCheck=0,this.sessionCheckPromise=null}catch(e){throw console.error("Sign out error:",e),e}}static async getCurrentUser(){try{return await (0,r.getCurrentUser)()}catch(e){return null}}static async waitForSession(e=5){for(let t=0;t<e;t++)try{return await (0,r.fetchAuthSession)(),!0}catch(s){if(t===e-1)return!1;await new Promise(e=>setTimeout(e,1e3))}return!1}static async isAuthenticated(){let e=Date.now();return this.forceRefresh&&(this.forceRefresh=!1,this.lastSessionCheck=0,this.sessionCheckPromise=null),this.sessionCheckPromise&&e-this.lastSessionCheck<this.sessionCheckInterval||(this.sessionCheckPromise=(async()=>{try{let e=await (0,r.fetchAuthSession)();return!!e.tokens?.accessToken}catch(e){return console.error("Error checking authentication:",e),!1}})(),this.lastSessionCheck=e),this.sessionCheckPromise}static async getUserAttributes(){try{return await (0,r.fetchUserAttributes)()}catch(e){return null}}static async updateUserAttributes(e){try{return await (0,r.updateUserAttributes)({userAttributes:e}),{isSuccess:!0,message:"User attributes updated successfully."}}catch(e){return console.error("Update user attributes error:",e),{isSuccess:!1,message:e.message||"Failed to update user attributes."}}}static async completeNewPassword(e){try{let t=await (0,r.confirmSignIn)({challengeResponse:e});return await this.waitForSession(),{isSuccess:t.isSignedIn,message:"Password set successfully."}}catch(e){return console.error("Complete new password error:",e),{isSuccess:!1,message:e.message||"Failed to set new password."}}}static async getIdToken(){try{let e=await (0,r.fetchAuthSession)();return e.tokens?.idToken?.toString()||null}catch(e){return console.error("Error getting ID token:",e),null}}static async refreshAuthState(){this.forceRefresh=!0,this.lastSessionCheck=0,this.sessionCheckPromise=null;try{await (0,r.fetchAuthSession)()}catch(e){console.error("Error refreshing auth session:",e)}}}i()}catch(e){i(e)}})},6839:(e,t,s)=>{"use strict";function i(e){if("undefined"==typeof document)return null;let t=document.cookie.split("; ").find(t=>t.startsWith(`${e}=`))?.split("=")[1];return t?decodeURIComponent(t):null}function r(e,t,s={}){if("undefined"==typeof document)return;let{days:i=7,path:r="/",domain:n,secure:a=!0,sameSite:o="lax"}=s,c=new Date;c.setTime(c.getTime()+864e5*i);let u=`${e}=${encodeURIComponent(t)}; expires=${c.toUTCString()}; path=${r}`;n&&(u+=`; domain=${n}`),a&&(u+="; secure"),u+=`; samesite=${o}`,document.cookie=u}function n(e,t={}){if("undefined"==typeof document)return;let{path:s="/",domain:i}=t,r=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${s}`;i&&(r+=`; domain=${i}`),document.cookie=r}function a(){if("undefined"==typeof document)return;let e=void 0;["amplify-signin-with-hostedUI","amplify-redirected-from-hosted-ui","amplify.auth.tokens","CognitoIdentityServiceProvider.*","amazon-cognito-advanced-security-data","aws.cognito.*","idToken","accessToken","refreshToken","auth_tokens","CognitoIdentityServiceProvider.*","Authorization"].forEach(t=>{t.includes("*")?document.cookie.split(";").forEach(s=>{let i=s.split("=")[0].trim();i.includes(t.replace("*",""))&&(n(i,{domain:e}),n(i))}):(n(t,{domain:e}),n(t))}),r("redirect_count","0",{days:1}),console.log("All authentication cookies cleared")}function o(){if("undefined"==typeof document)return;r("redirect_count","0",{days:1}),i("Authorization")&&n("Authorization");let e=window.location.hostname;console.log("Checking cookies state...");let t=!1;["amplify-signin-with-hostedUI","amplify-redirected-from-hosted-ui","idToken","accessToken","refreshToken"].forEach(s=>{i(s)&&(console.log(`Found potentially problematic cookie: ${s}`),t=!0,n(s),n(s,{domain:e}))}),t&&(console.log("Performing thorough cookie cleanup"),a())}s.d(t,{Wx:()=>a,nT:()=>o})},3893:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.r(t),s.d(t,{default:()=>l});var r=s(997),n=s(968),a=s.n(n);s(108);var o=s(4685),c=s(2956),u=e([o,c]);function l({Component:e,pageProps:t}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[r.jsx("title",{children:"Survey Link Wrapper"}),r.jsx("meta",{name:"description",content:"Wrapping third-party survey links with a validation layer"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),r.jsx(o.H,{children:r.jsx(e,{...t})})]})}[o,c]=u.then?(await u)():u,(0,c.n)(),i()}catch(e){i(e)}})},108:()=>{}};