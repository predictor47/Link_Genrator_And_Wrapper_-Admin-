exports.id=893,exports.ids=[893],exports.modules={2956:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(t,{A:()=>u,n:()=>a});var n=s(5838),r=e([n]);n=(r.then?(await r)():r)[0];let o=!1,c=null,u={Auth:{Cognito:{userPoolId:"us-east-1_Gh00T12dW",userPoolClientId:"5e5a5drp00jd43tr7ph1ceg412",identityPoolId:"us-east-1:a0b02f73-93a3-4b52-b1cb-eaa306375a33",region:"us-east-1"}},API:{GraphQL:{endpoint:"https://vth6pntotrhvfpxo2gwn3kzqry.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1",apiKey:"da2-ee26yqskvzfpjpquwbi53shbvu"}}};async function a(){if(!o)try{try{let e=s(2048),t=s(5315);for(let s of[t.join(process.cwd(),"amplify_outputs.json"),t.join(process.cwd(),".amplify","amplify_outputs.json")])if(e.existsSync(s)){let t=e.readFileSync(s,"utf8");c=JSON.parse(t);break}}catch(e){console.warn("Failed to load amplify_outputs.json on server")}let e=c?.auth?.aws_region||"us-east-1",t={Auth:{Cognito:{userPoolId:c?.auth?.user_pool_id||"us-east-1_Gh00T12dW",userPoolClientId:c?.auth?.user_pool_client_id||"5e5a5drp00jd43tr7ph1ceg412",region:e}}};n.Amplify.configure(t),o=!0}catch(e){console.error("Error configuring Amplify")}}i()}catch(e){i(e)}})},4685:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(t,{H:()=>l,a:()=>d});var n=s(997),r=s(6689),a=s(7200),o=s(2956),c=s(6839),u=e([a,o]);[a,o]=u.then?(await u)():u,(0,o.n)();let h=(0,r.createContext)(void 0);function l({children:e}){let[t,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!0),[u,l]=(0,r.useState)(null),d=async()=>{try{o(!0);let e=await a.e.isAuthenticated();if(s(e),e){let e=await a.e.getCurrentUser(),t=await a.e.getUserAttributes();l({...e,attributes:t})}else l(null)}catch(e){console.error("Error checking authentication:",e),s(!1),l(null),(0,c.nT)()}finally{o(!1)}},p=async(e,t)=>{let s=await a.e.signIn({username:e,password:t});return s.isSuccess&&await d(),s},m=async()=>{await a.e.signOut(),await d()},f=async e=>await a.e.signUp(e),y=async e=>{let t=await a.e.completeNewPassword(e);return t.isSuccess&&await d(),t},g=async()=>{console.log("Manually refreshing auth state"),a.e.resetSessionCache(),await d(),console.log("Auth state after refresh:",{isAuthenticated:t})},w={isAuthenticated:t,isLoading:i,user:u,login:p,logout:m,signUp:f,confirmSignUp:a.e.confirmSignUp,completeNewPassword:y,refreshAuthState:g};return n.jsx(h.Provider,{value:w,children:e})}function d(){let e=(0,r.useContext)(h);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}i()}catch(e){i(e)}})},7200:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.d(t,{e:()=>o});var n=s(9779),r=s(2956),a=e([n,r]);[n,r]=a.then?(await a)():a,(0,r.n)();class o{static{this.sessionCheckPromise=null}static{this.lastSessionCheck=0}static{this.sessionCheckInterval=3e4}static async signUp(e){try{let{username:t,password:s,email:i,firstName:r,lastName:a}=e,o={email:i,...r&&{name:r},...a&&{family_name:a}},c=await (0,n.signUp)({username:t,password:s,options:{userAttributes:o}});return{isSuccess:!0,message:"Sign up successful! Please check your email for a verification code.",data:c}}catch(e){if(console.error("Sign up error:",e),"UsernameExistsException"===e.name)return{isSuccess:!1,message:"This username is already taken. Please try another one."};return{isSuccess:!1,message:e.message||"Failed to sign up. Please try again."}}}static async signIn(e){try{let{username:t,password:s}=e,i=await (0,n.signIn)({username:t,password:s});return await new Promise(e=>setTimeout(e,500)),await this.waitForSession(),{isSuccess:!0,message:"Successfully signed in",data:i,nextStep:i.nextStep}}catch(e){if(console.error("Sign in error:",e),e.message?.includes("already a signed in user"))return{isSuccess:!0,message:"User is already signed in",data:{isSignedIn:!0}};if("UserNotConfirmedException"===e.name)return{isSuccess:!1,message:"Please confirm your account by entering the verification code sent to your email."};if("NotAuthorizedException"===e.name)return{isSuccess:!1,message:"Incorrect username or password."};if("UserNotFoundException"===e.name)return{isSuccess:!1,message:"User does not exist."};return{isSuccess:!1,message:e.message||"Failed to sign in. Please try again."}}}static async confirmSignUp(e,t){try{await (0,n.confirmSignUp)({username:e,confirmationCode:t})}catch(e){throw console.error("Confirm sign up error:",e),e}}static async signOut(){try{await (0,n.signOut)({global:!0}),this.lastSessionCheck=0,this.sessionCheckPromise=null}catch(e){throw console.error("Sign out error:",e),e}}static async getCurrentUser(){try{return await (0,n.getCurrentUser)()}catch(e){return null}}static async waitForSession(e=5){for(let t=0;t<e;t++)try{return await (0,n.fetchAuthSession)(),!0}catch(s){if(t===e-1)return!1;await new Promise(e=>setTimeout(e,1e3))}return!1}static async isAuthenticated(){let e=Date.now();return this.sessionCheckPromise&&e-this.lastSessionCheck<this.sessionCheckInterval||(this.sessionCheckPromise=(async()=>{try{let e=await (0,n.fetchAuthSession)(),t=!!e.tokens?.accessToken;return console.log("Auth check result:",t),t}catch(e){return console.error("Auth check failed:",e),!1}})(),this.lastSessionCheck=e),this.sessionCheckPromise}static resetSessionCache(){this.lastSessionCheck=0,this.sessionCheckPromise=null}static async getUserAttributes(){try{return await (0,n.fetchUserAttributes)()}catch(e){return null}}static async updateUserAttributes(e){try{return await (0,n.updateUserAttributes)({userAttributes:e}),{isSuccess:!0,message:"User attributes updated successfully."}}catch(e){return console.error("Update user attributes error:",e),{isSuccess:!1,message:e.message||"Failed to update user attributes."}}}static async completeNewPassword(e){try{let t=await (0,n.confirmSignIn)({challengeResponse:e});return await this.waitForSession(),{isSuccess:t.isSignedIn,message:"Password set successfully."}}catch(e){return console.error("Complete new password error:",e),{isSuccess:!1,message:e.message||"Failed to set new password."}}}static async getIdToken(){try{let e=await (0,n.fetchAuthSession)();return e.tokens?.idToken?.toString()||null}catch(e){return console.error("Error getting ID token:",e),null}}}i()}catch(e){i(e)}})},6839:(e,t,s)=>{"use strict";function i(e){if("undefined"==typeof document)return null;let t=document.cookie.split("; ").find(t=>t.startsWith(`${e}=`))?.split("=")[1];return t?decodeURIComponent(t):null}function n(e,t,s={}){if("undefined"==typeof document)return;let{days:i=7,path:n="/",domain:r,secure:a=!0,sameSite:o="lax"}=s,c=new Date;c.setTime(c.getTime()+864e5*i);let u=`${e}=${encodeURIComponent(t)}; expires=${c.toUTCString()}; path=${n}`;r&&(u+=`; domain=${r}`),a&&(u+="; secure"),u+=`; samesite=${o}`,document.cookie=u}function r(e,t={}){if("undefined"==typeof document)return;let{path:s="/",domain:i}=t,n=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${s}`;i&&(n+=`; domain=${i}`),document.cookie=n}function a(){}function o(){if("undefined"==typeof document)return;let e=a();["amplify-signin-with-hostedUI","amplify-redirected-from-hosted-ui","amplify.auth.tokens","CognitoIdentityServiceProvider.*","amazon-cognito-advanced-security-data","aws.cognito.*","idToken","accessToken","refreshToken","auth_tokens","CognitoIdentityServiceProvider.*","Authorization"].forEach(t=>{t.includes("*")?document.cookie.split(";").forEach(s=>{let i=s.split("=")[0].trim();i.includes(t.replace("*",""))&&(r(i,{domain:e}),r(i))}):(r(t,{domain:e}),r(t))}),n("redirect_count","0",{days:1}),console.log("All authentication cookies cleared")}function c(){"undefined"!=typeof document&&(n("redirect_count","0",{days:1}),i("Authorization")&&r("Authorization"),document.cookie.split(";").forEach(e=>{let t=e.split("=")[0].trim();if(t.includes("CognitoIdentityServiceProvider")||t.includes("amplify.auth")||t.includes("aws.cognito")){let e=i(t);e&&(r(t),n(t,e,{domain:a(),path:"/",days:365,secure:!0,sameSite:"lax"}))}}),console.log("Cookie fixes applied"))}s.d(t,{Wx:()=>o,nT:()=>c})},3893:(e,t,s)=>{"use strict";s.a(e,async(e,i)=>{try{s.r(t),s.d(t,{default:()=>l});var n=s(997),r=s(968),a=s.n(r);s(108);var o=s(4685),c=s(2956);s(6689);var u=e([o,c]);function l({Component:e,pageProps:t}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[n.jsx("title",{children:"Survey Link Wrapper"}),n.jsx("meta",{name:"description",content:"Wrapping third-party survey links with a validation layer"}),n.jsx("link",{rel:"icon",href:"/favicon.ico"}),n.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),n.jsx(o.H,{children:n.jsx(e,{...t})})]})}[o,c]=u.then?(await u)():u,(0,c.n)(),i()}catch(e){i(e)}})},108:()=>{}};