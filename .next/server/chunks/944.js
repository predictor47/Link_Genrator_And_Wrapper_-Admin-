exports.id=944,exports.ids=[944],exports.modules={2956:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Ao:()=>d,nq:()=>n});var a=s(5838),o=s(376),i=e([a,o]);[a,o]=i.then?(await i)():i;let c=!1,u=null;function n(){if(!c){try{let e=s(2048),t=s(5315);for(let s of[t.join(process.cwd(),"amplify_outputs.json"),t.join(process.cwd(),".amplify","amplify_outputs.json"),t.join(process.cwd(),"src","amplify_outputs.json")])if(e.existsSync(s)){let t=e.readFileSync(s,"utf8");u=JSON.parse(t),console.log(`Loaded amplify_outputs.json from ${s}`);break}}catch(e){console.warn("Failed to load amplify_outputs.json on server:",e)}(function(){u||(console.log("Using environment variables for Amplify configuration"),u={auth:{user_pool_id:"us-east-1_Gh00T12dW",user_pool_client_id:"5e5a5drp00jd43tr7ph1ceg412",identity_pool_id:"us-east-1:a0b02f73-93a3-4b52-b1cb-eaa306375a33",aws_region:"us-east-1"},data:{url:"https://vth6pntotrhvfpxo2gwn3kzqry.appsync-api.us-east-1.amazonaws.com/graphql",aws_region:"us-east-1",api_key:"da2-ee26yqskvzfpjpquwbi53shbvu"}});let e=u.auth?.aws_region||u.data?.aws_region||"us-east-1",t=void 0;try{let s={Auth:{Cognito:{userPoolId:u.auth?.user_pool_id||"",userPoolClientId:u.auth?.user_pool_client_id||"",identityPoolId:u.auth?.identity_pool_id||"",region:u.auth?.aws_region||e,loginWith:{oauth:!1,email:!0,phone:!1,username:!0},tokenProvider:{storage:void 0,cookieStorage:{domain:t,path:"/",expires:365,secure:!1,sameSite:"strict"},disableCookieStorage:!1,enableCookieStorage:!0}}},API:{GraphQL:{endpoint:u.data?.url||"",region:u.data?.aws_region||e,defaultAuthMode:"apiKey",apiKey:u.data?.api_key||""}}};s.region=e,a.Amplify.configure(s),c=!0,console.log("Amplify configured in PRODUCTION environment"),console.log("Using User Pool ID:",u.auth?.user_pool_id),console.log("API Key configured:",u.data?.api_key?"Yes (masked)":"No"),console.log("Cookie domain:",t||"default")}catch(e){console.error("Error configuring Amplify:",e)}})()}}(0,o.generateClient)();let d={Auth:{Cognito:{userPoolId:u?.auth?.user_pool_id||"us-east-1_Gh00T12dW",userPoolClientId:u?.auth?.user_pool_client_id||"5e5a5drp00jd43tr7ph1ceg412",identityPoolId:u?.auth?.identity_pool_id||"us-east-1:a0b02f73-93a3-4b52-b1cb-eaa306375a33",region:u?.auth?.aws_region||"us-east-1"}},API:{GraphQL:{endpoint:u?.data?.url||"https://vth6pntotrhvfpxo2gwn3kzqry.appsync-api.us-east-1.amazonaws.com/graphql",region:u?.data?.aws_region||"us-east-1",defaultAuthMode:"apiKey",apiKey:u?.data?.api_key||"da2-ee26yqskvzfpjpquwbi53shbvu"}},domains:{main:"protegeresearchsurvey.com",admin:"admin.protegeresearchsurvey.com"},environment:"production"};r()}catch(e){r(e)}})},7200:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{e:()=>n});var a=s(9779),o=s(2956),i=e([a,o]);[a,o]=i.then?(await i)():i,(0,o.nq)();class n{static async signUp(e){try{let{username:t,password:s,email:r,firstName:o,lastName:i}=e,n={email:r,...o&&{name:o},...i&&{family_name:i}},c=await (0,a.signUp)({username:t,password:s,options:{userAttributes:n}});return{isSuccess:!0,message:"Sign up successful! Please check your email for a verification code.",data:c}}catch(e){if(console.error("Sign up error:",e),"UsernameExistsException"===e.name)return{isSuccess:!1,message:"This username is already taken. Please try another one."};if("InvalidPasswordException"===e.name)return{isSuccess:!1,message:e.message||"Password does not meet requirements."};return{isSuccess:!1,message:e.message||"Failed to sign up. Please try again later."}}}static async confirmSignUp(e,t){try{await (0,a.confirmSignUp)({username:e,confirmationCode:t})}catch(e){throw console.error("Confirm sign up error:",e),e}}static async signIn(e){try{let{username:t,password:s}=e;return await (0,a.signIn)({username:t,password:s})}catch(e){if(console.error("Sign in error:",e),"UserNotConfirmedException"===e.name)throw Error("Please confirm your account by entering the verification code sent to your email.");if("NotAuthorizedException"===e.name)throw Error("Incorrect username or password.");if("UserNotFoundException"===e.name)throw Error("User does not exist.");throw e}}static async signOut(){try{await (0,a.signOut)()}catch(e){throw console.error("Sign out error:",e),e}}static async getCurrentUser(){try{return await (0,a.getCurrentUser)()}catch(e){return null}}static async getCurrentSession(){try{return await (0,a.getCurrentUser)()}catch(e){return null}}static async isAuthenticated(){try{return await (0,a.getCurrentUser)(),!0}catch(e){return!1}}static async getUserAttributes(){try{return await (0,a.fetchUserAttributes)()}catch(e){return null}}static async updateUserAttributes(e){try{return await (0,a.updateUserAttributes)({userAttributes:e}),{isSuccess:!0,message:"User attributes updated successfully."}}catch(e){return console.error("Update user attributes error:",e),{isSuccess:!1,message:e.message||"Failed to update user attributes."}}}static async changePassword(e,t){try{if(!await (0,a.getCurrentUser)())throw Error("User is not authenticated");if(!(await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldPassword:e,newPassword:t})})).ok)throw Error("Failed to change password");return{isSuccess:!0,message:"Password changed successfully."}}catch(e){return console.error("Change password error:",e),{isSuccess:!1,message:e.message||"Failed to change password."}}}static async forgotPassword(e){try{return await (0,a.resetPassword)({username:e}),{isSuccess:!0,message:"Password reset code sent to your email."}}catch(e){return console.error("Forgot password error:",e),{isSuccess:!1,message:e.message||"Failed to send password reset code."}}}static async forgotPasswordSubmit(e,t,s){try{return await (0,a.confirmResetPassword)({username:e,confirmationCode:t,newPassword:s}),{isSuccess:!0,message:"Password has been reset successfully."}}catch(e){return console.error("Forgot password submit error:",e),{isSuccess:!1,message:e.message||"Failed to reset password."}}}static async resendConfirmationCode(e){try{return await (0,a.resendSignUpCode)({username:e}),{isSuccess:!0,message:"Confirmation code resent successfully."}}catch(e){return console.error("Resend confirmation code error:",e),{isSuccess:!1,message:e.message||"Failed to resend confirmation code."}}}static async getIdToken(){try{let e=await (0,a.getCurrentUser)();if(e&&e.signInDetails)return await fetch("/api/auth/get-id-token").then(e=>e.text()).catch(()=>null);return null}catch(e){return null}}}r()}catch(e){r(e)}})},3893:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(997),a=s(968),o=s.n(a);function i({Component:e,pageProps:t}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[r.jsx("title",{children:"Survey Link Wrapper"}),r.jsx("meta",{name:"description",content:"Wrapping third-party survey links with a validation layer"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"}),r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),r.jsx(e,{...t})]})}s(108)},108:()=>{}};