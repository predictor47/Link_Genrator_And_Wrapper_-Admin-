"use strict";(()=>{var e={};e.id=487,e.ids=[487,660],e.modules={4827:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{config:()=>g,default:()=>p,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>w,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>y});var a=t(7093),n=t(5244),o=t(1323),i=t(2899),l=t.n(i),d=t(3893),c=t(8652),u=e([c]);c=(u.then?(await u)():u)[0];let p=(0,o.l)(c,"default"),m=(0,o.l)(c,"getStaticProps"),x=(0,o.l)(c,"getStaticPaths"),h=(0,o.l)(c,"getServerSideProps"),g=(0,o.l)(c,"config"),f=(0,o.l)(c,"reportWebVitals"),y=(0,o.l)(c,"unstable_getStaticProps"),j=(0,o.l)(c,"unstable_getStaticPaths"),v=(0,o.l)(c,"unstable_getStaticParams"),b=(0,o.l)(c,"unstable_getServerProps"),S=(0,o.l)(c,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/completion/[projectId]/[uid]",pathname:"/completion/[projectId]/[uid]",bundlePath:"",filename:""},components:{App:d.default,Document:l()},userland:c});s()}catch(e){s(e)}})},8652:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{default:()=>p,getServerSideProps:()=>m});var a=t(997),n=t(6689),o=t(1163),i=t(968),l=t.n(i),d=t(9648),c=t(5153),u=e([d,c]);function p({project:e,surveyLink:r,error:t}){(0,o.useRouter)();let[s,i]=(0,n.useState)(!t&&!!r),[d,c]=(0,n.useState)(t||null),[u,p]=(0,n.useState)(!1);if(!e||!r)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-8 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Survey Not Found"}),a.jsx("p",{className:"text-gray-700 mb-6",children:"Sorry, the survey you are looking for does not exist or has expired."})]})});let m=r.vendorCode?`Thank you for completing the survey via ${r.vendorCode}.`:"Thank you for completing the survey.";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsxs)("title",{children:["Survey Completed | ",e.name]}),a.jsx("meta",{name:"description",content:"Thank you for completing the survey"})]}),a.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:a.jsx("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-8 text-center",children:s?(0,a.jsxs)(a.Fragment,{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Recording Completion"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Please wait while we record your survey completion..."}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})})]}):d?(0,a.jsxs)(a.Fragment,{children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),a.jsx("p",{className:"text-gray-700 mb-6",children:d}),a.jsx("p",{className:"text-sm text-gray-500",children:"If this error persists, please contact the survey administrator."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"mb-6 flex justify-center",children:a.jsx("div",{className:"rounded-full bg-green-100 p-3",children:a.jsx("svg",{className:"h-12 w-12 text-green-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Thank You!"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:[m," Your response has been successfully recorded."]}),a.jsx("p",{className:"text-sm text-gray-500",children:"You may now close this window."})]})})})]})}async function m(e){let{projectId:r,uid:t}=e.params;try{let e=await c.K.projects.get(r);if(!e||!e.data)return{props:{project:null,surveyLink:null,error:"Project not found"}};let s=e.data,a=await c.K.surveyLinks.getByUid(t),n=a?.data;if(!n||n.projectId!==r)return{props:{project:{id:s.id,name:s.name},surveyLink:null,error:"Survey link not found"}};let o=null;if(n.vendorId){let e=await c.K.vendors.get(n.vendorId);if(e?.data?.settings)try{o=JSON.parse(e.data.settings).code||null}catch(e){console.error("Error parsing vendor settings:",e)}}let i="";if(n.metadata)try{i=JSON.parse(n.metadata).originalUrl||""}catch(e){console.error("Error parsing link metadata:",e)}return{props:{project:{id:s.id,name:s.name},surveyLink:{uid:n.uid,status:n.status||"PENDING",originalUrl:i,vendorCode:o},error:null}}}catch(e){return console.error("Error fetching data:",e),{props:{project:null,surveyLink:null,error:"Error fetching data"}}}}[d,c]=u.then?(await u)():u,s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},376:e=>{e.exports=import("aws-amplify/data")},9648:e=>{e.exports=import("axios")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[899,132,163,193],()=>t(4827));module.exports=s})();