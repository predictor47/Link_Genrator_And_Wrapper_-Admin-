"use strict";(()=>{var e={};e.id=623,e.ids=[623,888,660],e.modules={94:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>h,default:()=>m,getServerSideProps:()=>y,getStaticPaths:()=>x,getStaticProps:()=>p,reportWebVitals:()=>g,routeModule:()=>P,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>j});var s=a(7093),l=a(5244),n=a(1323),o=a(2899),i=a.n(o),d=a(3893),c=a(9663),u=e([d,c]);[d,c]=u.then?(await u)():u;let m=(0,n.l)(c,"default"),p=(0,n.l)(c,"getStaticProps"),x=(0,n.l)(c,"getStaticPaths"),y=(0,n.l)(c,"getServerSideProps"),h=(0,n.l)(c,"config"),g=(0,n.l)(c,"reportWebVitals"),j=(0,n.l)(c,"unstable_getStaticProps"),w=(0,n.l)(c,"unstable_getStaticPaths"),f=(0,n.l)(c,"unstable_getStaticParams"),v=(0,n.l)(c,"unstable_getServerProps"),b=(0,n.l)(c,"unstable_getServerSideProps"),P=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/completion/[projectId]",pathname:"/completion/[projectId]",bundlePath:"",filename:""},components:{App:d.default,Document:i()},userland:c});r()}catch(e){r(e)}})},5153:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{K:()=>u});var s=a(1534),l=a(5838),n=a(2956),o=e([s,l,n]);[s,l,n]=o.then?(await o)():o,l.Amplify.configure(n.A);let i=(0,s.generateClient)({authMode:"apiKey"}),d=e=>e.data,c=(e,t)=>{let a=e.message||"Unknown error",r=e.name||"Error";throw console.error(`Amplify Error (${t}):`,{name:r,message:a}),e},u={client:i,projects:{create:async e=>{try{let t=await i.models.Project.create(e);return{data:d(t)}}catch(e){c(e,"projects.create")}},get:async e=>{let t=await i.models.Project.get({id:e});return{data:d(t)}},list:async e=>({data:(await i.models.Project.list(e)).data||[]}),update:async(e,t)=>{let a=await i.models.Project.update({id:e,...t});return{data:d(a)}},delete:async e=>{let t=await i.models.Project.delete({id:e});return{data:d(t)}},getWithRelations:async e=>{let t=await i.models.Project.get({id:e});if(t.data){let a=await i.models.SurveyLink.list({filter:{projectId:{eq:e}}}),r=(await i.models.ProjectVendor.list({filter:{projectId:{eq:e}}})).data.map(e=>e.vendorId).filter(e=>null!=e),s=[];r.length>0&&(s=(await Promise.all(r.map(e=>i.models.Vendor.get({id:e})))).filter(e=>null!==e.data).map(e=>e.data));let l=await i.models.Question.list({filter:{projectId:{eq:e}}});return{data:{...t.data,surveyLinks:a.data||[],vendors:s,questions:l.data||[]}}}return{data:null}}},surveyLinks:{create:async e=>{let t=await i.models.SurveyLink.create(e);return{data:d(t)}},get:async e=>{let t=await i.models.SurveyLink.get({id:e});return{data:d(t)}},getByUid:async e=>{let t=await i.models.SurveyLink.list({filter:{uid:{eq:e}}});return{data:t.data&&t.data.length>0?t.data[0]:null}},update:async(e,t)=>{let a=await i.models.SurveyLink.update({id:e,...t});return{data:d(a)}},list:async e=>({data:(await i.models.SurveyLink.list(e)).data||[]}),listByProject:async e=>({data:(await i.models.SurveyLink.list({filter:{projectId:{eq:e}}})).data||[]}),delete:async e=>{let t=await i.models.SurveyLink.delete({id:e});return{data:d(t)}}},vendors:{create:async e=>{let t=await i.models.Vendor.create(e);return{data:d(t)}},get:async e=>{let t=await i.models.Vendor.get({id:e});return{data:d(t)}},list:async e=>({data:(await i.models.Vendor.list(e)).data||[]}),listByProject:async e=>{let t=(await i.models.ProjectVendor.list({filter:{projectId:{eq:e}}})).data.map(e=>e.vendorId).filter(e=>null!=e);return t.length>0?{data:(await Promise.all(t.map(e=>i.models.Vendor.get({id:e})))).filter(e=>null!==e.data).map(e=>e.data)}:{data:[]}},update:async(e,t)=>{let a=await i.models.Vendor.update({id:e,...t});return{data:d(a)}},delete:async e=>{let t=await i.models.Vendor.delete({id:e});return{data:d(t)}}},questions:{create:async e=>{let t=await i.models.Question.create(e);return{data:d(t)}},get:async e=>{let t=await i.models.Question.get({id:e});return{data:d(t)}},list:async e=>({data:(await i.models.Question.list(e)).data||[]}),listByProject:async e=>({data:(await i.models.Question.list({filter:{projectId:{eq:e}}})).data||[]}),update:async(e,t)=>{let a=await i.models.Question.update({id:e,...t});return{data:d(a)}},delete:async e=>{let t=await i.models.Question.delete({id:e});return{data:d(t)}}},transaction:{execute:async e=>{let t=[];for(let a of e){let e=await a;t.push(e)}return t}}};r()}catch(e){r(e)}})},9663:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>m,getServerSideProps:()=>p});var s=a(997),l=a(6689),n=a(1163),o=a(968),i=a.n(o),d=a(9648),c=a(5153),u=e([d,c]);function m({project:e,error:t}){let{uid:a}=(0,n.useRouter)().query,[r,o]=(0,l.useState)(!0),[d,c]=(0,l.useState)(t||null),[u,m]=(0,l.useState)(!1);return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsxs)("title",{children:["Survey Completed | ",e.name]}),s.jsx("meta",{name:"description",content:"Thank you for completing the survey"})]}),s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-8 text-center",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Recording Completion"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please wait while we record your survey completion..."}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})})]}):d?(0,s.jsxs)(s.Fragment,{children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),s.jsx("p",{className:"text-gray-700 mb-6",children:d}),s.jsx("p",{className:"text-sm text-gray-500",children:"If this error persists, please contact the survey administrator."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"mb-6 flex justify-center",children:s.jsx("div",{className:"rounded-full bg-green-100 p-3",children:s.jsx("svg",{className:"h-12 w-12 text-green-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{d:"M5 13l4 4L19 7"})})})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Thank You!"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Your survey has been successfully completed and recorded."}),s.jsx("p",{className:"text-sm text-gray-500",children:"You may now close this window."})]})})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Project Not Found"}),s.jsx("p",{className:"text-gray-700 mb-6",children:"Sorry, the project you are looking for does not exist."})]})})}async function p(e){let{projectId:t}=e.params;try{let e=(await c.K.projects.get(t)).data;if(!e)return{props:{project:null,error:"Project not found"}};return{props:{project:{id:e.id,name:e.name}}}}catch(e){return console.error("Error fetching project:",e),{props:{project:null,error:"Error fetching project data"}}}}[d,c]=u.then?(await u)():u,r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},9779:e=>{e.exports=import("aws-amplify/auth")},9648:e=>{e.exports=import("axios")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[899,132,163,893],()=>a(94));module.exports=r})();