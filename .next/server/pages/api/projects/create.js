"use strict";(()=>{var e={};e.id=387,e.ids=[387],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},376:e=>{e.exports=import("aws-amplify/data")},146:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>l,default:()=>u,routeModule:()=>d});var a=r(1802),o=r(7153),i=r(6249),n=r(171),c=e([n]);n=(c.then?(await c)():c)[0];let u=(0,i.l)(n,"default"),l=(0,i.l)(n,"config"),d=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/projects/create",pathname:"/api/projects/create",bundlePath:"",filename:""},userland:n});s()}catch(e){s(e)}})},171:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>i});var a=r(5746),o=e([a]);async function i(e,t){if("POST"!==e.method)return t.status(405).json({message:"Method not allowed"});try{let{name:r,description:s,questions:o}=e.body;if(!r)return t.status(400).json({success:!1,message:"Project name is required"});console.log("Creating project with name:",r);let i=await a.K.projects.create({name:r,description:s||""});if(!i||null===i.data)return t.status(500).json({success:!1,message:"Failed to create project. Project creation returned null."});if(o&&Array.isArray(o)&&o.length>0){let e=i.data.id,t=o.map(t=>a.K.questions.create({projectId:e,text:t.text,options:JSON.stringify(t.options||[])}));await Promise.all(t)}return t.status(201).json({success:!0,message:"Project created successfully",project:i.data})}catch(s){console.error("Error creating project:",s);let e=s.message||"Unknown error",r=s.name||"Error";if(console.error(`Project creation failed: ${r} - ${e}`),r.includes("Auth")||e.includes("auth")||e.includes("token"))return t.status(401).json({success:!1,message:"Authentication error. Please sign in again.",error:`${r}: ${e}`});return t.status(500).json({success:!1,message:"Failed to create project. Please ensure you are authenticated and have correct permissions.",error:`${r}: ${e}`})}}a=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[463],()=>r(146));module.exports=s})();