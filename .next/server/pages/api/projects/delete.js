"use strict";(()=>{var e={};e.id=43,e.ids=[43],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},2569:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>n,routeModule:()=>c});var r=a(1802),i=a(7153),o=a(6249),l=a(7741),d=e([l]);l=(d.then?(await d)():d)[0];let n=(0,o.l)(l,"default"),u=(0,o.l)(l,"config"),c=new r.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/projects/delete",pathname:"/api/projects/delete",bundlePath:"",filename:""},userland:l});s()}catch(e){s(e)}})},7741:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>o});var r=a(5746),i=e([r]);async function o(e,t){if("DELETE"!==e.method)return t.status(405).json({message:"Method not allowed"});try{let{id:a}=e.query;if(!a||"string"!=typeof a)return t.status(400).json({success:!1,message:"Project ID is required"});let s=await r.K.projects.get(a);if(!s||!s.data)return t.status(404).json({success:!1,message:"Project not found"});let i=await r.K.questions.list({filter:{projectId:{eq:a}}});if(i.data&&i.data.length>0){let e=i.data.map(e=>e&&e.id?r.K.questions.delete(e.id):Promise.resolve()).filter(Boolean);await Promise.all(e)}let o=await r.K.surveyLinks.list({filter:{projectId:{eq:a}}});if(o.data&&o.data.length>0){let e=o.data.map(e=>e&&e.id?r.K.surveyLinks.delete(e.id):Promise.resolve()).filter(Boolean);await Promise.all(e)}return await r.K.projects.delete(a),t.status(200).json({success:!0,message:"Project and all associated data deleted successfully"})}catch(e){return console.error("Error deleting project:",e),t.status(500).json({success:!1,message:"Failed to delete project"})}}r=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[463],()=>a(2569));module.exports=s})();