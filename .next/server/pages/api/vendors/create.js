"use strict";(()=>{var e={};e.id=452,e.ids=[452],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},8909:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>c,routeModule:()=>l});var r=a(1802),o=a(7153),n=a(6249),i=a(8118),d=e([i]);i=(d.then?(await d)():d)[0];let c=(0,n.l)(i,"default"),u=(0,n.l)(i,"config"),l=new r.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/vendors/create",pathname:"/api/vendors/create",bundlePath:"",filename:""},userland:i});s()}catch(e){s(e)}})},8118:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>n});var r=a(5746),o=e([r]);async function n(e,t){if("POST"!==e.method)return t.status(405).json({message:"Method not allowed"});try{let{projectId:a,name:s,code:o}=e.body;if(!a||!s||!o)return t.status(400).json({success:!1,message:"Project ID, name, and code are required"});let n=await r.K.projects.get(a);if(!n||!n.data)return t.status(404).json({success:!1,message:"Project not found"});let i=await r.K.vendors.list({filter:{and:[{projectId:{eq:a}},{code:{eq:o}}]}});if(i.data&&i.data.length>0)return t.status(400).json({success:!1,message:"Vendor code already exists in this project"});let d=await r.K.vendors.create({name:s,code:o,projectId:a});return t.status(201).json({success:!0,vendor:d.data})}catch(e){return console.error("Error creating vendor:",e),t.status(500).json({success:!1,message:"Failed to create vendor"})}}r=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[463],()=>a(8909));module.exports=s})();