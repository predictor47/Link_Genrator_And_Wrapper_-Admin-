"use strict";(()=>{var e={};e.id=553,e.ids=[553],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},376:e=>{e.exports=import("aws-amplify/data")},3592:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>l,default:()=>u,routeModule:()=>c});var r=t(1802),n=t(7153),o=t(6249),i=t(6240),d=e([i]);i=(d.then?(await d)():d)[0];let u=(0,o.l)(i,"default"),l=(0,o.l)(i,"config"),c=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/vendors/delete",pathname:"/api/vendors/delete",bundlePath:"",filename:""},userland:i});a()}catch(e){a(e)}})},6240:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>o});var r=t(5746),n=e([r]);async function o(e,s){if("DELETE"!==e.method)return s.status(405).json({message:"Method not allowed"});let{id:t}=e.query;if(!t||"string"!=typeof t)return s.status(400).json({success:!1,message:"Vendor ID is required"});try{if(!(await r.K.vendors.get(t)).data)return s.status(404).json({success:!1,message:"Vendor not found"});let e=await r.K.surveyLinks.list({filter:{vendorId:{eq:t}}});if(e.data&&e.data.length>0)return s.status(409).json({success:!1,message:"Cannot delete vendor with associated survey links"});return await r.K.vendors.delete(t),s.status(200).json({success:!0,message:"Vendor deleted successfully"})}catch(e){return console.error("Error deleting vendor:",e),s.status(500).json({success:!1,message:"Failed to delete vendor"})}}r=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})}};var s=require("../../../webpack-api-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[463],()=>t(3592));module.exports=a})();