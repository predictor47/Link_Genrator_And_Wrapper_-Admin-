"use strict";(()=>{var e={};e.id=639,e.ids=[639,888,660],e.modules={9159:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>x,reportWebVitals:()=>y,routeModule:()=>w,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>b});var r=a(7093),l=a(5244),n=a(1323),i=a(2899),o=a.n(i),d=a(3893),c=a(986),u=e([d,c]);[d,c]=u.then?(await u)():u;let m=(0,n.l)(c,"default"),x=(0,n.l)(c,"getStaticProps"),p=(0,n.l)(c,"getStaticPaths"),h=(0,n.l)(c,"getServerSideProps"),g=(0,n.l)(c,"config"),y=(0,n.l)(c,"reportWebVitals"),b=(0,n.l)(c,"unstable_getStaticProps"),j=(0,n.l)(c,"unstable_getStaticPaths"),v=(0,n.l)(c,"unstable_getStaticParams"),f=(0,n.l)(c,"unstable_getServerProps"),N=(0,n.l)(c,"unstable_getServerSideProps"),w=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/projects/[id]/generate",pathname:"/admin/projects/[id]/generate",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});s()}catch(e){s(e)}})},7290:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(997),r=a(6689);let l=require("papaparse");var n=a.n(l);let i=({onCSVProcessed:e,templateFields:t=["originalUrl","vendorCode","count","testCount","liveCount"],className:a=""})=>{let[l,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(null);return s.jsx("div",{className:`${a}`,children:(0,s.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{htmlFor:"csvFile",className:"block text-gray-700 text-sm font-bold",children:"Upload CSV File:"}),s.jsx("button",{type:"button",onClick:()=>{let e=new Blob([t.join(",")+"\nhttps://example.com/survey,VENDOR1,10,5,5\nhttps://example.com/survey2,VENDOR2,5,0,5"],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(e);a.setAttribute("href",s),a.setAttribute("download","link_generation_template.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Download Template"})]}),(0,s.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-md p-6 hover:border-gray-400 transition-colors",children:[s.jsx("input",{id:"csvFile",name:"csvFile",type:"file",accept:".csv",onChange:t=>{d(null);let a=t.target.files?.[0];a&&(u(a.name),i(!0),n().parse(a,{header:!0,skipEmptyLines:!0,complete:t=>{if(t.errors.length>0){d(`CSV parsing error: ${t.errors[0].message}`),i(!1);return}let a=t.data,s=[];a.length>0&&!a[0].hasOwnProperty("originalUrl")&&s.push("CSV must have 'originalUrl' column"),s.length>0?d(s.join(", ")):e(a),i(!1)},error:e=>{d(`Error parsing CSV: ${e.message}`),i(!1)}}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:l}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsx("p",{className:"mt-1 text-sm text-gray-600",children:c||"Drag and drop CSV file here, or click to select"}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"CSV file with survey URLs and parameters"})]})]}),l&&(0,s.jsxs)("div",{className:"flex justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-3 text-sm text-gray-600",children:"Processing file..."})]}),o&&s.jsx("div",{className:"text-red-500 text-sm",children:o})]})})}},5153:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{K:()=>d});var r=a(1534),l=e([r]);r=(l.then?(await l)():l)[0];let n=(0,r.generateClient)({authMode:"apiKey"}),i=e=>e.data,o=(e,t)=>{let a={operation:t,name:e instanceof Error?e.name:"UnknownError",message:e instanceof Error?e.message:"Unknown error occurred",details:e};throw"object"==typeof e&&null!==e&&"code"in e&&(a.code=String(e.code)),console.error(`Amplify Error (${t}):`,a),e},d={client:n,projects:{create:async e=>{try{let t=await n.models.Project.create(e);return{data:i(t)}}catch(e){o(e,"projects.create")}},get:async e=>{let t=await n.models.Project.get({id:e});return{data:i(t)}},list:async e=>({data:(await n.models.Project.list(e)).data||[]}),update:async(e,t)=>{let a=await n.models.Project.update({id:e,...t});return{data:i(a)}},delete:async e=>{let t=await n.models.Project.delete({id:e});return{data:i(t)}},getWithRelations:async e=>{let t=await n.models.Project.get({id:e});if(t.data){let a=await n.models.SurveyLink.list({filter:{projectId:{eq:e}}}),s=(await n.models.ProjectVendor.list({filter:{projectId:{eq:e}}})).data.map(e=>e.vendorId).filter(e=>null!=e),r=[];s.length>0&&(r=(await Promise.all(s.map(e=>n.models.Vendor.get({id:e})))).filter(e=>null!==e.data).map(e=>e.data));let l=await n.models.Question.list({filter:{projectId:{eq:e}}});return{data:{...t.data,surveyLinks:a.data||[],vendors:r,questions:l.data||[]}}}return{data:null}}},surveyLinks:{create:async e=>{let t=await n.models.SurveyLink.create(e);return{data:i(t)}},get:async e=>{let t=await n.models.SurveyLink.get({id:e});return{data:i(t)}},getByUid:async e=>{let t=await n.models.SurveyLink.list({filter:{uid:{eq:e}}});return{data:t.data&&t.data.length>0?t.data[0]:null}},update:async(e,t)=>{let a=await n.models.SurveyLink.update({id:e,...t});return{data:i(a)}},list:async e=>({data:(await n.models.SurveyLink.list(e)).data||[]}),listByProject:async e=>({data:(await n.models.SurveyLink.list({filter:{projectId:{eq:e}}})).data||[]}),delete:async e=>{let t=await n.models.SurveyLink.delete({id:e});return{data:i(t)}}},vendors:{create:async e=>{let t=await n.models.Vendor.create(e);return{data:i(t)}},get:async e=>{let t=await n.models.Vendor.get({id:e});return{data:i(t)}},list:async e=>({data:(await n.models.Vendor.list(e)).data||[]}),listByProject:async e=>{let t=(await n.models.ProjectVendor.list({filter:{projectId:{eq:e}}})).data.map(e=>e.vendorId).filter(e=>null!=e);return t.length>0?{data:(await Promise.all(t.map(e=>n.models.Vendor.get({id:e})))).filter(e=>null!==e.data).map(e=>e.data)}:{data:[]}},update:async(e,t)=>{let a=await n.models.Vendor.update({id:e,...t});return{data:i(a)}},delete:async e=>{let t=await n.models.Vendor.delete({id:e});return{data:i(t)}}},questions:{create:async e=>{let t=await n.models.Question.create(e);return{data:i(t)}},get:async e=>{let t=await n.models.Question.get({id:e});return{data:i(t)}},list:async e=>({data:(await n.models.Question.list(e)).data||[]}),listByProject:async e=>({data:(await n.models.Question.list({filter:{projectId:{eq:e}}})).data||[]}),update:async(e,t)=>{let a=await n.models.Question.update({id:e,...t});return{data:i(a)}},delete:async e=>{let t=await n.models.Question.delete({id:e});return{data:i(t)}}},transaction:{execute:async e=>{let t=[];for(let a of e){let e=await a;t.push(e)}return t}}};s()}catch(e){s(e)}})},2068:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{a:()=>r.a});var r=a(4685),l=e([r]);r=(l.then?(await l)():l)[0],s()}catch(e){s(e)}})},2924:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>o});var r=a(997);a(6689);var l=a(1163),n=a(2068),i=e([n]);function o({children:e,redirectTo:t="/admin/login"}){let{isAuthenticated:a,isLoading:s}=(0,n.a)();return((0,l.useRouter)(),s)?r.jsx("div",{className:"flex min-h-screen items-center justify-center",children:r.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):a?r.jsx(r.Fragment,{children:e}):null}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},986:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>h,getServerSideProps:()=>g});var r=a(997),l=a(6689),n=a(1163),i=a(1664),o=a.n(i),d=a(9648),c=a(5641),u=a(5153),m=a(7290),x=a(2924),p=e([d,c,u,x]);function h({project:e}){(0,n.useRouter)();let[t,a]=(0,l.useState)(!1),[s,i]=(0,l.useState)(null),[u,p]=(0,l.useState)(null),[h,g]=(0,l.useState)([]),[y,b]=(0,l.useState)([]),[j,v]=(0,l.useState)(!1),[f,N]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[C,S]=(0,l.useState)([]),[L,P]=(0,l.useState)({current:0,total:0}),{register:V,handleSubmit:U,watch:I,formState:{errors:T},setValue:E}=(0,c.useForm)(),F=I("linkType","LIVE"),A=I("restrictGeo",!1);I("vendorId","");let R=I("testCount",0),q=I("liveCount",0),$=async()=>{if(0===C.length)return;a(!0),i(null),p(null),P({current:0,total:C.length});let t=[];for(let a=0;a<C.length;a++){let s=C[a];P({current:a+1,total:C.length});try{let a=null;if(s.vendorCode){let e=y.find(e=>e.code===s.vendorCode);e?a=e.id:console.warn(`Vendor with code ${s.vendorCode} not found, skipping vendor assignment`)}let r=null;if(s.geoRestriction)try{let e=JSON.parse(s.geoRestriction);Array.isArray(e)?r=e:"string"==typeof e&&(r=[e])}catch(e){r=s.geoRestriction.split(",").map(e=>e.trim())}let l={projectId:e.id,originalUrl:s.originalUrl,vendorId:a,geoRestriction:r};void 0!==s.testCount&&void 0!==s.liveCount?(l.testCount=parseInt(String(s.testCount))||0,l.liveCount=parseInt(String(s.liveCount))||0,l.count=l.testCount+l.liveCount):(l.count=parseInt(String(s.count))||1,l.linkType="LIVE");let n=await d.default.post("/api/links/generate",l);n.data.success&&n.data.links&&t.push(...n.data.links)}catch(e){console.error(`Error processing row ${a+1}:`,e)}}g(t),a(!1),p(`Successfully generated ${t.length} links from CSV data.`)},B=async t=>{if(w&&C.length>0){await $();return}a(!0),i(null),p(null);try{let a=null;t.restrictGeo&&t.countries?.length&&(a=Array.isArray(t.countries)?t.countries:[t.countries]);let s={projectId:e.id,originalUrl:t.originalUrl,vendorId:t.vendorId||null,geoRestriction:a};f?(s.testCount=parseInt(t.testCount)||0,s.liveCount=parseInt(t.liveCount)||0,s.count=s.testCount+s.liveCount):(s.count=parseInt(t.count)||1,s.linkType=t.linkType||"LIVE");let r=await d.default.post("/api/links/generate",s);r.data.success?(p(`Successfully generated ${r.data.count} links.`),g(r.data.links)):i(r.data.message||"Failed to generate links")}catch(e){i(e.response?.data?.message||"Error generating links"),console.error("Error:",e)}finally{a(!1)}},[G,_]=(0,l.useState)(!1),[D,O]=(0,l.useState)(""),[M,Q]=(0,l.useState)(""),[W,Z]=(0,l.useState)(!1),H=async t=>{t.preventDefault(),Z(!0);try{let t=await d.default.post("/api/vendors/create",{projectId:e.id,name:D,code:M});t.data.success&&(b([...y,t.data.vendor]),O(""),Q(""),_(!1))}catch(e){i(e.response?.data?.message||"Failed to add vendor")}finally{Z(!1)}},K=e=>{navigator.clipboard.writeText(e),p("Link copied to clipboard!"),setTimeout(()=>p(null),2e3)};return r.jsx(x.Z,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx(o(),{href:`/admin/projects/${e.id}`,className:"text-blue-600 hover:text-blue-800",children:"← Back to project"}),r.jsx("h1",{className:"text-3xl font-bold mt-2",children:e.name}),r.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Generate Survey Links"})]}),s&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:s}),u&&r.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:u}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("div",{className:"flex justify-between items-center mb-4",children:r.jsx("h3",{className:"text-lg font-medium",children:"Link Generation Method"})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>k(!1),className:`p-4 rounded-lg border-2 flex flex-col items-center ${w?"border-gray-200 hover:border-gray-300":"border-blue-500 bg-blue-50"}`,children:[r.jsx("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),r.jsx("span",{className:"font-medium",children:"Manual Entry"}),r.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Create links one by one with form"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>k(!0),className:`p-4 rounded-lg border-2 flex flex-col items-center ${w?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),r.jsx("span",{className:"font-medium",children:"Batch Upload"}),r.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Upload CSV with multiple links"})]})]})]}),(0,r.jsxs)("form",{onSubmit:U(B),children:[w?(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(m.Z,{onCSVProcessed:e=>{S(e),k(!0)},templateFields:["originalUrl","vendorCode","count","testCount","liveCount","geoRestriction"],className:"mb-4"}),C.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["Loaded ",C.length," entries from CSV"]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test/Live"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.slice(0,5).map((e,t)=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-2 text-sm text-gray-900",children:e.originalUrl}),r.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:e.vendorCode||"-"}),r.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?Number(e.testCount)+Number(e.liveCount):e.count||1}),r.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?`${e.testCount} / ${e.liveCount}`:"-"})]},t))})]})}),C.length>5&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Showing 5 of ",C.length," rows..."]})]}),t&&L.total>0&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Processing Batch"}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${L.current/L.total*100}%`}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Processing ",L.current," of ",L.total," rows..."]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalUrl",children:"Original Survey URL"}),r.jsx("input",{id:"originalUrl",type:"url",placeholder:"https://example.com/survey",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("originalUrl",{required:!0})}),T.originalUrl&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Original URL is required"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"vendorId",children:"Vendor"}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("select",{id:"vendorId",className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline w-full",...V("vendorId"),children:[r.jsx("option",{value:"",children:"-- No Vendor --"}),y.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),r.jsx("button",{type:"button",className:"ml-2 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded",onClick:()=>_(!G),children:G?"Cancel":"Add Vendor"})]}),G&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:[r.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Add New Vendor"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorName",children:"Vendor Name"}),r.jsx("input",{id:"vendorName",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:D,onChange:e=>O(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorCode",children:"Vendor Code"}),r.jsx("input",{id:"vendorCode",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:M,onChange:e=>Q(e.target.value),required:!0}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:'A short code to identify this vendor (e.g., "ABC_CORP")'})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded disabled:opacity-50",onClick:H,disabled:W||!D||!M,children:W?"Adding...":"Add Vendor"})})]})]})]}),r.jsx("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"splitLinkTypes",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:f,onChange:e=>N(e.target.checked)}),r.jsx("label",{htmlFor:"splitLinkTypes",className:"ml-2 block text-sm text-gray-700",children:"Generate both Test and Live links"})]})}),f?(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Distribution"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"testCount",children:"Test Links"}),r.jsx("input",{id:"testCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("testCount",{min:0,max:1e3})}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Test links have relaxed security for development purposes"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"liveCount",children:"Live Links"}),r.jsx("input",{id:"liveCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("liveCount",{min:0,max:1e3})}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Live links enforce all security checks for production use"})]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Total links to generate: ",r.jsx("span",{className:"font-medium",children:Number(R||0)+Number(q||0)})]}),Number(R||0)+Number(q||0)>1e3&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Total links must not exceed 1000"}),Number(R||0)+Number(q||0)===0&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"You must generate at least 1 link"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"count",children:"Number of Links to Generate"}),r.jsx("input",{id:"count",type:"number",min:"1",max:"1000",defaultValue:"1",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("count",{min:1,max:1e3})}),T.count&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Please enter a number between 1 and 1000"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Type"}),(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"linkTypeLIVE",type:"radio",value:"LIVE",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",defaultChecked:!0,...V("linkType")}),r.jsx("label",{htmlFor:"linkTypeLIVE",className:"ml-2 block text-sm text-gray-700",children:"Live (Production)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"linkTypeTEST",type:"radio",value:"TEST",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",...V("linkType")}),r.jsx("label",{htmlFor:"linkTypeTEST",className:"ml-2 block text-sm text-gray-700",children:"Test (Relaxed Security)"})]})]}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"LIVE"===F?"Live mode enforces all security checks and is meant for production use.":"Test mode relaxes security checks for development and testing purposes."})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"restrictGeo",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",...V("restrictGeo"),onChange:e=>v(e.target.checked)}),r.jsx("label",{htmlFor:"restrictGeo",className:"ml-2 block text-sm text-gray-700",children:"Restrict by Geography"})]}),A&&j&&(0,r.jsxs)("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"countries",children:"Allowed Countries"}),r.jsx("select",{id:"countries",multiple:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...V("countries",{required:A}),size:5,children:[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"IN",name:"India"},{code:"BR",name:"Brazil"},{code:"ZA",name:"South Africa"}].map(e=>(0,r.jsxs)("option",{value:e.code,children:[e.name," (",e.code,")"]},e.code))}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Hold Ctrl/Cmd to select multiple countries"}),T.countries&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Please select at least one country"})]})]})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",disabled:t||f&&Number(R||0)+Number(q||0)===0,children:t?"Generating...":w?"Generate Batch Links":"Generate Links"})})]})]}),h.length>0&&(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Generated Links"}),(0,r.jsxs)("div",{className:"space-x-2",children:[r.jsx("button",{onClick:()=>{if(!h.length)return;let t=["URL,UID,Type,Status",...h.map(e=>[e.fullUrl,e.uid,e.linkType,e.status].join(","))].join("\n"),a=new Blob([t],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),r=URL.createObjectURL(a);s.setAttribute("href",r),s.setAttribute("download",`${e.name.replace(/\s+/g,"_")}_links_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded text-sm",children:"Export CSV"}),r.jsx("button",{onClick:()=>{let e=h.map(e=>e.fullUrl).join("\n");navigator.clipboard.writeText(e),p("All links copied to clipboard!"),setTimeout(()=>p(null),2e3)},className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded text-sm",children:"Copy All URLs"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UID"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.slice(0,50).map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.uid}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium ${"LIVE"===e.linkType?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:e.linkType})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("a",{href:e.fullUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.fullUrl.length>50?`${e.fullUrl.substring(0,50)}...`:e.fullUrl})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("button",{onClick:()=>K(e.fullUrl),className:"text-indigo-600 hover:text-indigo-900",children:"Copy"})})]},e.id))})]})}),h.length>50&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-4",children:["Showing 50 of ",h.length," links. Please use the export button to access all links."]})]})]})})}async function g(e){let{id:t}=e.params;try{let e=(await u.K.projects.get(t)).data;if(!e)return{notFound:!0};return{props:{project:{id:e.id,name:e.name}}}}catch(e){return console.error("Error fetching project:",e),{notFound:!0}}}[d,c,u,x]=p.then?(await p)():p,s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},9779:e=>{e.exports=import("aws-amplify/auth")},9648:e=>{e.exports=import("axios")},5641:e=>{e.exports=import("react-hook-form")}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[899,132,163,664,893],()=>a(9159));module.exports=s})();