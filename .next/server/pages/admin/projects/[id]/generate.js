"use strict";(()=>{var e={};e.id=639,e.ids=[639,660],e.modules={9159:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>x,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>u,reportWebVitals:()=>b,routeModule:()=>k,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>y});var a=s(7093),l=s(5244),n=s(1323),i=s(2899),o=s.n(i),d=s(3893),c=s(986),m=e([c]);c=(m.then?(await m)():m)[0];let x=(0,n.l)(c,"default"),u=(0,n.l)(c,"getStaticProps"),p=(0,n.l)(c,"getStaticPaths"),h=(0,n.l)(c,"getServerSideProps"),g=(0,n.l)(c,"config"),b=(0,n.l)(c,"reportWebVitals"),y=(0,n.l)(c,"unstable_getStaticProps"),v=(0,n.l)(c,"unstable_getStaticPaths"),j=(0,n.l)(c,"unstable_getStaticParams"),f=(0,n.l)(c,"unstable_getServerProps"),N=(0,n.l)(c,"unstable_getServerSideProps"),k=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/projects/[id]/generate",pathname:"/admin/projects/[id]/generate",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});r()}catch(e){r(e)}})},7290:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(997),a=s(6689);let l=require("papaparse");var n=s.n(l);let i=({onCSVProcessed:e,templateFields:t=["originalUrl","vendorCode","count","testCount","liveCount"],className:s=""})=>{let[l,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null),[c,m]=(0,a.useState)(null);return r.jsx("div",{className:`${s}`,children:(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{htmlFor:"csvFile",className:"block text-gray-700 text-sm font-bold",children:"Upload CSV File:"}),r.jsx("button",{type:"button",onClick:()=>{let e=new Blob([t.join(",")+"\nhttps://example.com/survey,VENDOR1,10,5,5\nhttps://example.com/survey2,VENDOR2,5,0,5"],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),r=URL.createObjectURL(e);s.setAttribute("href",r),s.setAttribute("download","link_generation_template.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Download Template"})]}),(0,r.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-md p-6 hover:border-gray-400 transition-colors",children:[r.jsx("input",{id:"csvFile",name:"csvFile",type:"file",accept:".csv",onChange:t=>{d(null);let s=t.target.files?.[0];s&&(m(s.name),i(!0),n().parse(s,{header:!0,skipEmptyLines:!0,complete:t=>{if(t.errors.length>0){d(`CSV parsing error: ${t.errors[0].message}`),i(!1);return}let s=t.data,r=[];s.length>0&&!s[0].hasOwnProperty("originalUrl")&&r.push("CSV must have 'originalUrl' column"),r.length>0?d(r.join(", ")):e(s),i(!1)},error:e=>{d(`Error parsing CSV: ${e.message}`),i(!1)}}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:l}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:r.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:c||"Drag and drop CSV file here, or click to select"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"CSV file with survey URLs and parameters"})]})]}),l&&(0,r.jsxs)("div",{className:"flex justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-3 text-sm text-gray-600",children:"Processing file..."})]}),o&&r.jsx("div",{className:"text-red-500 text-sm",children:o})]})})}},986:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>p,getServerSideProps:()=>h});var a=s(997),l=s(6689),n=s(1163),i=s(1664),o=s.n(i),d=s(9648),c=s(5641),m=s(5153),x=s(7290),u=e([d,c,m]);function p({project:e}){(0,n.useRouter)();let[t,s]=(0,l.useState)(!1),[r,i]=(0,l.useState)(null),[m,u]=(0,l.useState)(null),[p,h]=(0,l.useState)([]),[g,b]=(0,l.useState)([]),[y,v]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[N,k]=(0,l.useState)(!1),[w,C]=(0,l.useState)([]),[S,L]=(0,l.useState)({current:0,total:0}),{register:U,handleSubmit:T,watch:V,formState:{errors:P},setValue:I}=(0,c.useForm)(),F=V("linkType","LIVE"),A=V("restrictGeo",!1);V("vendorId","");let E=V("testCount",0),R=V("liveCount",0),G=async()=>{if(0===w.length)return;s(!0),i(null),u(null),L({current:0,total:w.length});let t=[];for(let s=0;s<w.length;s++){let r=w[s];L({current:s+1,total:w.length});try{let s=null;if(r.vendorCode){let e=g.find(e=>e.code===r.vendorCode);e?s=e.id:console.warn(`Vendor with code ${r.vendorCode} not found, skipping vendor assignment`)}let a=null;if(r.geoRestriction)try{let e=JSON.parse(r.geoRestriction);Array.isArray(e)?a=e:"string"==typeof e&&(a=[e])}catch(e){a=r.geoRestriction.split(",").map(e=>e.trim())}let l={projectId:e.id,originalUrl:r.originalUrl,vendorId:s,geoRestriction:a};void 0!==r.testCount&&void 0!==r.liveCount?(l.testCount=parseInt(String(r.testCount))||0,l.liveCount=parseInt(String(r.liveCount))||0,l.count=l.testCount+l.liveCount):(l.count=parseInt(String(r.count))||1,l.linkType="LIVE");let n=await d.default.post("/api/links/generate",l);n.data.success&&n.data.links&&t.push(...n.data.links)}catch(e){console.error(`Error processing row ${s+1}:`,e)}}h(t),s(!1),u(`Successfully generated ${t.length} links from CSV data.`)},$=async t=>{if(N&&w.length>0){await G();return}s(!0),i(null),u(null);try{let s=null;t.restrictGeo&&t.countries?.length&&(s=Array.isArray(t.countries)?t.countries:[t.countries]);let r={projectId:e.id,originalUrl:t.originalUrl,vendorId:t.vendorId||null,geoRestriction:s};j?(r.testCount=parseInt(t.testCount)||0,r.liveCount=parseInt(t.liveCount)||0,r.count=r.testCount+r.liveCount):(r.count=parseInt(t.count)||1,r.linkType=t.linkType||"LIVE");let a=await d.default.post("/api/links/generate",r);a.data.success?(u(`Successfully generated ${a.data.count} links.`),h(a.data.links)):i(a.data.message||"Failed to generate links")}catch(e){i(e.response?.data?.message||"Error generating links"),console.error("Error:",e)}finally{s(!1)}},[_,q]=(0,l.useState)(!1),[B,D]=(0,l.useState)(""),[O,M]=(0,l.useState)(""),[W,H]=(0,l.useState)(!1),z=async t=>{t.preventDefault(),H(!0);try{let t=await d.default.post("/api/vendors/create",{projectId:e.id,name:B,code:O});t.data.success&&(b([...g,t.data.vendor]),D(""),M(""),q(!1))}catch(e){i(e.response?.data?.message||"Failed to add vendor")}finally{H(!1)}},J=e=>{navigator.clipboard.writeText(e),u("Link copied to clipboard!"),setTimeout(()=>u(null),2e3)};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx(o(),{href:`/admin/projects/${e.id}`,className:"text-blue-600 hover:text-blue-800",children:"â† Back to project"}),a.jsx("h1",{className:"text-3xl font-bold mt-2",children:e.name}),a.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Generate Survey Links"})]}),r&&a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:r}),m&&a.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:m}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsx("h3",{className:"text-lg font-medium",children:"Link Generation Method"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>k(!1),className:`p-4 rounded-lg border-2 flex flex-col items-center ${N?"border-gray-200 hover:border-gray-300":"border-blue-500 bg-blue-50"}`,children:[a.jsx("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a.jsx("span",{className:"font-medium",children:"Manual Entry"}),a.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Create links one by one with form"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>k(!0),className:`p-4 rounded-lg border-2 flex flex-col items-center ${N?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),a.jsx("span",{className:"font-medium",children:"Batch Upload"}),a.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Upload CSV with multiple links"})]})]})]}),(0,a.jsxs)("form",{onSubmit:T($),children:[N?(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(x.Z,{onCSVProcessed:e=>{C(e),k(!0)},templateFields:["originalUrl","vendorCode","count","testCount","liveCount","geoRestriction"],className:"mb-4"}),w.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["Loaded ",w.length," entries from CSV"]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test/Live"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.slice(0,5).map((e,t)=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-6 py-2 text-sm text-gray-900",children:e.originalUrl}),a.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:e.vendorCode||"-"}),a.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?Number(e.testCount)+Number(e.liveCount):e.count||1}),a.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?`${e.testCount} / ${e.liveCount}`:"-"})]},t))})]})}),w.length>5&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Showing 5 of ",w.length," rows..."]})]}),t&&S.total>0&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Processing Batch"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${S.current/S.total*100}%`}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Processing ",S.current," of ",S.total," rows..."]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalUrl",children:"Original Survey URL"}),a.jsx("input",{id:"originalUrl",type:"url",placeholder:"https://example.com/survey",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...U("originalUrl",{required:!0})}),P.originalUrl&&a.jsx("p",{className:"text-red-500 text-xs italic",children:"Original URL is required"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"vendorId",children:"Vendor"}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsxs)("select",{id:"vendorId",className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline w-full",...U("vendorId"),children:[a.jsx("option",{value:"",children:"-- No Vendor --"}),g.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),a.jsx("button",{type:"button",className:"ml-2 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded",onClick:()=>q(!_),children:_?"Cancel":"Add Vendor"})]}),_&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:[a.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Add New Vendor"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorName",children:"Vendor Name"}),a.jsx("input",{id:"vendorName",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:B,onChange:e=>D(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorCode",children:"Vendor Code"}),a.jsx("input",{id:"vendorCode",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:O,onChange:e=>M(e.target.value),required:!0}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:'A short code to identify this vendor (e.g., "ABC_CORP")'})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded disabled:opacity-50",onClick:z,disabled:W||!B||!O,children:W?"Adding...":"Add Vendor"})})]})]})]}),a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{id:"splitLinkTypes",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:j,onChange:e=>f(e.target.checked)}),a.jsx("label",{htmlFor:"splitLinkTypes",className:"ml-2 block text-sm text-gray-700",children:"Generate both Test and Live links"})]})}),j?(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Distribution"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"testCount",children:"Test Links"}),a.jsx("input",{id:"testCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...U("testCount",{min:0,max:1e3})}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Test links have relaxed security for development purposes"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"liveCount",children:"Live Links"}),a.jsx("input",{id:"liveCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...U("liveCount",{min:0,max:1e3})}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Live links enforce all security checks for production use"})]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Total links to generate: ",a.jsx("span",{className:"font-medium",children:Number(E||0)+Number(R||0)})]}),Number(E||0)+Number(R||0)>1e3&&a.jsx("p",{className:"text-red-500 text-xs italic",children:"Total links must not exceed 1000"}),Number(E||0)+Number(R||0)===0&&a.jsx("p",{className:"text-red-500 text-xs italic",children:"You must generate at least 1 link"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"count",children:"Number of Links to Generate"}),a.jsx("input",{id:"count",type:"number",min:"1",max:"1000",defaultValue:"1",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...U("count",{min:1,max:1e3})}),P.count&&a.jsx("p",{className:"text-red-500 text-xs italic",children:"Please enter a number between 1 and 1000"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Type"}),(0,a.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{id:"linkTypeLIVE",type:"radio",value:"LIVE",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",defaultChecked:!0,...U("linkType")}),a.jsx("label",{htmlFor:"linkTypeLIVE",className:"ml-2 block text-sm text-gray-700",children:"Live (Production)"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{id:"linkTypeTEST",type:"radio",value:"TEST",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",...U("linkType")}),a.jsx("label",{htmlFor:"linkTypeTEST",className:"ml-2 block text-sm text-gray-700",children:"Test (Relaxed Security)"})]})]}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"LIVE"===F?"Live mode enforces all security checks and is meant for production use.":"Test mode relaxes security checks for development and testing purposes."})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{id:"restrictGeo",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",...U("restrictGeo"),onChange:e=>v(e.target.checked)}),a.jsx("label",{htmlFor:"restrictGeo",className:"ml-2 block text-sm text-gray-700",children:"Restrict by Geography"})]}),A&&y&&(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"countries",children:"Allowed Countries"}),a.jsx("select",{id:"countries",multiple:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...U("countries",{required:A}),size:5,children:[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"IN",name:"India"},{code:"BR",name:"Brazil"},{code:"ZA",name:"South Africa"}].map(e=>(0,a.jsxs)("option",{value:e.code,children:[e.name," (",e.code,")"]},e.code))}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Hold Ctrl/Cmd to select multiple countries"}),P.countries&&a.jsx("p",{className:"text-red-500 text-xs italic",children:"Please select at least one country"})]})]})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",disabled:t||j&&Number(E||0)+Number(R||0)===0,children:t?"Generating...":N?"Generate Batch Links":"Generate Links"})})]})]}),p.length>0&&(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Generated Links"}),(0,a.jsxs)("div",{className:"space-x-2",children:[a.jsx("button",{onClick:()=>{if(!p.length)return;let t=["URL,UID,Type,Status",...p.map(e=>[e.fullUrl,e.uid,e.linkType,e.status].join(","))].join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(s);r.setAttribute("href",a),r.setAttribute("download",`${e.name.replace(/\s+/g,"_")}_links_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded text-sm",children:"Export CSV"}),a.jsx("button",{onClick:()=>{let e=p.map(e=>e.fullUrl).join("\n");navigator.clipboard.writeText(e),u("All links copied to clipboard!"),setTimeout(()=>u(null),2e3)},className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded text-sm",children:"Copy All URLs"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UID"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.slice(0,50).map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.uid}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium ${"LIVE"===e.linkType?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:e.linkType})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsx("a",{href:e.fullUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.fullUrl.length>50?`${e.fullUrl.substring(0,50)}...`:e.fullUrl})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsx("button",{onClick:()=>J(e.fullUrl),className:"text-indigo-600 hover:text-indigo-900",children:"Copy"})})]},e.id))})]})}),p.length>50&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-4",children:["Showing 50 of ",p.length," links. Please use the export button to access all links."]})]})]})}async function h(e){let{id:t}=e.params;try{let e=(await m.K.projects.get(t)).data;if(!e)return{notFound:!0};return{props:{project:{id:e.id,name:e.name}}}}catch(e){return console.error("Error fetching project:",e),{notFound:!0}}}[d,c,m]=u.then?(await u)():u,r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},5838:e=>{e.exports=import("aws-amplify")},1534:e=>{e.exports=import("aws-amplify/api")},376:e=>{e.exports=import("aws-amplify/data")},9648:e=>{e.exports=import("axios")},5641:e=>{e.exports=import("react-hook-form")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[899,132,163,664,193],()=>s(9159));module.exports=r})();