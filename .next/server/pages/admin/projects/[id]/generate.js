(()=>{var e={};e.id=639,e.ids=[639,888,660],e.modules={9159:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>p,getStaticProps:()=>x,reportWebVitals:()=>y,routeModule:()=>N,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var r=s(7093),l=s(5244),n=s(1323),i=s(2899),o=s.n(i),d=s(3893),c=s(986),u=e([c]);c=(u.then?(await u)():u)[0];let m=(0,n.l)(c,"default"),x=(0,n.l)(c,"getStaticProps"),p=(0,n.l)(c,"getStaticPaths"),h=(0,n.l)(c,"getServerSideProps"),g=(0,n.l)(c,"config"),y=(0,n.l)(c,"reportWebVitals"),b=(0,n.l)(c,"unstable_getStaticProps"),f=(0,n.l)(c,"unstable_getStaticPaths"),j=(0,n.l)(c,"unstable_getStaticParams"),v=(0,n.l)(c,"unstable_getServerProps"),w=(0,n.l)(c,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/projects/[id]/generate",pathname:"/admin/projects/[id]/generate",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});a()}catch(e){a(e)}})},7290:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(997),r=s(6689);let l=require("papaparse");var n=s.n(l);let i=({onCSVProcessed:e,templateFields:t=["originalUrl","vendorCode","count","testCount","liveCount"],className:s=""})=>{let[l,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(null);return a.jsx("div",{className:`${s}`,children:(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"csvFile",className:"block text-gray-700 text-sm font-bold",children:"Upload CSV File:"}),a.jsx("button",{type:"button",onClick:()=>{let e=new Blob([t.join(",")+"\nhttps://example.com/survey,VENDOR1,10,5,5\nhttps://example.com/survey2,VENDOR2,5,0,5"],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),a=URL.createObjectURL(e);s.setAttribute("href",a),s.setAttribute("download","link_generation_template.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Download Template"})]}),(0,a.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-md p-6 hover:border-gray-400 transition-colors",children:[a.jsx("input",{id:"csvFile",name:"csvFile",type:"file",accept:".csv",onChange:t=>{d(null);let s=t.target.files?.[0];s&&(u(s.name),i(!0),n().parse(s,{header:!0,skipEmptyLines:!0,complete:t=>{if(t.errors.length>0){d(`CSV parsing error: ${t.errors[0].message}`),i(!1);return}let s=t.data,a=[];s.length>0&&!s[0].hasOwnProperty("originalUrl")&&a.push("CSV must have 'originalUrl' column"),a.length>0?d(a.join(", ")):e(s),i(!1)},error:e=>{d(`Error parsing CSV: ${e.message}`),i(!1)}}))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:l}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:a.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:c||"Drag and drop CSV file here, or click to select"}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"CSV file with survey URLs and parameters"})]})]}),l&&(0,a.jsxs)("div",{className:"flex justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500"}),a.jsx("span",{className:"ml-3 text-sm text-gray-600",children:"Processing file..."})]}),o&&a.jsx("div",{className:"text-red-500 text-sm",children:o})]})})}},2956:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{Ao:()=>o,nq:()=>n});var r=s(5838),l=e([r]);r=(l.then?(await l)():l)[0];let i=!1;function n(){if(i)return;let e=null;try{let t=s(2048),a=s(5315);for(let s of[a.join(process.cwd(),"amplify_outputs.json"),a.join(process.cwd(),".amplify","amplify_outputs.json"),a.join(process.cwd(),"src","amplify_outputs.json")])if(t.existsSync(s)){let a=t.readFileSync(s,"utf8");e=JSON.parse(a);break}}catch(e){console.warn("Failed to load amplify_outputs.json:",e)}e||(e={auth:{userPoolId:"us-east-1_QIwwMdokt",userPoolClientId:"your_client_id_here",identityPoolId:"your_identity_pool_id_here",region:"us-east-1"},api:{endpoint:"https://235kq6cpbbdyfizalvutob7vh4.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1"}});let t=e.auth?.region||"us-east-1";try{let s={Auth:{Cognito:{userPoolId:e.auth?.userPoolId||"",userPoolClientId:e.auth?.userPoolClientId||"",identityPoolId:e.auth?.identityPoolId||""}},API:{GraphQL:{endpoint:e.api?.endpoint||"",region:e.api?.region||t,defaultAuthMode:"userPool"}}};s.region=t,r.Amplify.configure(s),i=!0}catch(e){console.error("Error configuring Amplify:",e)}}let o={Auth:{Cognito:{userPoolId:"us-east-1_QIwwMdokt",userPoolClientId:"your_client_id_here",identityPoolId:"your_identity_pool_id_here"}},API:{GraphQL:{endpoint:"https://235kq6cpbbdyfizalvutob7vh4.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1",defaultAuthMode:"userPool"}},domains:{main:"protegeresearchsurvey.com",admin:"admin.protegeresearchsurvey.com"}};a()}catch(e){a(e)}})},5153:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{K:()=>c});var r=s(1534),l=s(5838),n=s(2956),i=e([r,l,n]);[r,l,n]=i.then?(await i)():i,l.Amplify.configure(n.Ao);let o=(0,r.generateClient)(),d=e=>e.data,c={projects:{create:async e=>{let t=await o.models.Project.create(e);return{data:d(t)}},get:async e=>{let t=await o.models.Project.get({id:e});return{data:d(t)}},list:async e=>({data:(await o.models.Project.list(e)).data||[]}),update:async(e,t)=>{let s=await o.models.Project.update({id:e,...t});return{data:d(s)}},delete:async e=>{let t=await o.models.Project.delete({id:e});return{data:d(t)}},getWithRelations:async e=>{let t=await o.models.Project.get({id:e});if(t.data){let s=await o.models.SurveyLink.list({filter:{projectId:{eq:e}}}),a=await o.models.Vendor.list({filter:{projectId:{eq:e}}}),r=await o.models.Question.list({filter:{projectId:{eq:e}}});return{data:{...t.data,surveyLinks:s.data||[],vendors:a.data||[],questions:r.data||[]}}}return{data:null}}},surveyLinks:{create:async e=>{let t=await o.models.SurveyLink.create(e);return{data:d(t)}},get:async e=>{let t=await o.models.SurveyLink.get({id:e});return{data:d(t)}},getByUid:async e=>{let t=await o.models.SurveyLink.list({filter:{uid:{eq:e}}});return{data:t.data&&t.data.length>0?t.data[0]:null}},update:async(e,t)=>{let s=await o.models.SurveyLink.update({id:e,...t});return{data:d(s)}},list:async e=>({data:(await o.models.SurveyLink.list(e)).data||[]}),listByProject:async e=>({data:(await o.models.SurveyLink.list({filter:{projectId:{eq:e}}})).data||[]}),delete:async e=>{let t=await o.models.SurveyLink.delete({id:e});return{data:d(t)}}},vendors:{create:async e=>{let t=await o.models.Vendor.create(e);return{data:d(t)}},get:async e=>{let t=await o.models.Vendor.get({id:e});return{data:d(t)}},list:async e=>({data:(await o.models.Vendor.list(e)).data||[]}),listByProject:async e=>({data:(await o.models.Vendor.list({filter:{projectId:{eq:e}}})).data||[]}),update:async(e,t)=>{let s=await o.models.Vendor.update({id:e,...t});return{data:d(s)}},delete:async e=>{let t=await o.models.Vendor.delete({id:e});return{data:d(t)}}},questions:{create:async e=>{let t=await o.models.Question.create(e);return{data:d(t)}},get:async e=>{let t=await o.models.Question.get({id:e});return{data:d(t)}},list:async e=>({data:(await o.models.Question.list(e)).data||[]}),listByProject:async e=>({data:(await o.models.Question.list({filter:{projectId:{eq:e}}})).data||[]}),update:async(e,t)=>{let s=await o.models.Question.update({id:e,...t});return{data:d(s)}},delete:async e=>{let t=await o.models.Question.delete({id:e});return{data:d(t)}}},responses:{create:async e=>{let t=await o.models.Response.create(e);return{data:d(t)}},get:async e=>{let t=await o.models.Response.get({id:e});return{data:d(t)}},list:async e=>({data:(await o.models.Response.list(e)).data||[]}),listByProject:async e=>({data:(await o.models.Response.list({filter:{projectId:{eq:e}}})).data||[]}),listBySurveyLink:async e=>({data:(await o.models.Response.list({filter:{surveyLinkId:{eq:e}}})).data||[]}),delete:async e=>{let t=await o.models.Response.delete({id:e});return{data:d(t)}}},flags:{create:async e=>{let t=await o.models.Flag.create(e);return{data:d(t)}},get:async e=>{let t=await o.models.Flag.get({id:e});return{data:d(t)}},list:async e=>({data:(await o.models.Flag.list(e)).data||[]}),listByProject:async e=>({data:(await o.models.Flag.list({filter:{projectId:{eq:e}}})).data||[]}),listBySurveyLink:async e=>({data:(await o.models.Flag.list({filter:{surveyLinkId:{eq:e}}})).data||[]}),delete:async e=>{let t=await o.models.Flag.delete({id:e});return{data:d(t)}}},transaction:{execute:async e=>{let t=[];for(let s of e){let e=await s;t.push(e)}return t}}};a()}catch(e){a(e)}})},3893:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(997),r=s(968),l=s.n(r);function n({Component:e,pageProps:t}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[a.jsx("title",{children:"Survey Link Wrapper"}),a.jsx("meta",{name:"description",content:"Wrapping third-party survey links with a validation layer"}),a.jsx("link",{rel:"icon",href:"/favicon.ico"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),a.jsx(e,{...t})]})}s(108)},986:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>p,getServerSideProps:()=>h});var r=s(997),l=s(6689),n=s(1163),i=s(1664),o=s.n(i),d=s(9648),c=s(5641),u=s(5153),m=s(7290),x=e([d,c,u]);function p({project:e}){(0,n.useRouter)();let[t,s]=(0,l.useState)(!1),[a,i]=(0,l.useState)(null),[u,x]=(0,l.useState)(null),[p,h]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),[b,f]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),[k,C]=(0,l.useState)([]),[S,L]=(0,l.useState)({current:0,total:0}),{register:P,handleSubmit:I,watch:V,formState:{errors:U},setValue:T}=(0,c.useForm)(),_=V("linkType","LIVE"),A=V("restrictGeo",!1);V("vendorId","");let F=V("testCount",0),q=V("liveCount",0),R=async()=>{if(0===k.length)return;s(!0),i(null),x(null),L({current:0,total:k.length});let t=[];for(let s=0;s<k.length;s++){let a=k[s];L({current:s+1,total:k.length});try{let s=null;if(a.vendorCode){let e=g.find(e=>e.code===a.vendorCode);e?s=e.id:console.warn(`Vendor with code ${a.vendorCode} not found, skipping vendor assignment`)}let r=null;if(a.geoRestriction)try{let e=JSON.parse(a.geoRestriction);Array.isArray(e)?r=e:"string"==typeof e&&(r=[e])}catch(e){r=a.geoRestriction.split(",").map(e=>e.trim())}let l={projectId:e.id,originalUrl:a.originalUrl,vendorId:s,geoRestriction:r};void 0!==a.testCount&&void 0!==a.liveCount?(l.testCount=parseInt(String(a.testCount))||0,l.liveCount=parseInt(String(a.liveCount))||0,l.count=l.testCount+l.liveCount):(l.count=parseInt(String(a.count))||1,l.linkType="LIVE");let n=await d.default.post("/api/links/generate",l);n.data.success&&n.data.links&&t.push(...n.data.links)}catch(e){console.error(`Error processing row ${s+1}:`,e)}}h(t),s(!1),x(`Successfully generated ${t.length} links from CSV data.`)},E=async t=>{if(w&&k.length>0){await R();return}s(!0),i(null),x(null);try{let s=null;t.restrictGeo&&t.countries?.length&&(s=Array.isArray(t.countries)?t.countries:[t.countries]);let a={projectId:e.id,originalUrl:t.originalUrl,vendorId:t.vendorId||null,geoRestriction:s};j?(a.testCount=parseInt(t.testCount)||0,a.liveCount=parseInt(t.liveCount)||0,a.count=a.testCount+a.liveCount):(a.count=parseInt(t.count)||1,a.linkType=t.linkType||"LIVE");let r=await d.default.post("/api/links/generate",a);r.data.success?(x(`Successfully generated ${r.data.count} links.`),h(r.data.links)):i(r.data.message||"Failed to generate links")}catch(e){i(e.response?.data?.message||"Error generating links"),console.error("Error:",e)}finally{s(!1)}},[B,G]=(0,l.useState)(!1),[$,M]=(0,l.useState)(""),[D,O]=(0,l.useState)(""),[Q,W]=(0,l.useState)(!1),z=async t=>{t.preventDefault(),W(!0);try{let t=await d.default.post("/api/vendors/create",{projectId:e.id,name:$,code:D});t.data.success&&(y([...g,t.data.vendor]),M(""),O(""),G(!1))}catch(e){i(e.response?.data?.message||"Failed to add vendor")}finally{W(!1)}},H=e=>{navigator.clipboard.writeText(e),x("Link copied to clipboard!"),setTimeout(()=>x(null),2e3)};return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx(o(),{href:`/admin/projects/${e.id}`,className:"text-blue-600 hover:text-blue-800",children:"â† Back to project"}),r.jsx("h1",{className:"text-3xl font-bold mt-2",children:e.name}),r.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Generate Survey Links"})]}),a&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:a}),u&&r.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:u}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("div",{className:"flex justify-between items-center mb-4",children:r.jsx("h3",{className:"text-lg font-medium",children:"Link Generation Method"})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>N(!1),className:`p-4 rounded-lg border-2 flex flex-col items-center ${w?"border-gray-200 hover:border-gray-300":"border-blue-500 bg-blue-50"}`,children:[r.jsx("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),r.jsx("span",{className:"font-medium",children:"Manual Entry"}),r.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Create links one by one with form"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>N(!0),className:`p-4 rounded-lg border-2 flex flex-col items-center ${w?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx("svg",{className:"w-8 h-8 text-gray-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),r.jsx("span",{className:"font-medium",children:"Batch Upload"}),r.jsx("span",{className:"text-xs text-gray-600 mt-1",children:"Upload CSV with multiple links"})]})]})]}),(0,r.jsxs)("form",{onSubmit:I(E),children:[w?(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(m.Z,{onCSVProcessed:e=>{C(e),N(!0)},templateFields:["originalUrl","vendorCode","count","testCount","liveCount","geoRestriction"],className:"mb-4"}),k.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-700 mb-2",children:["Loaded ",k.length," entries from CSV"]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test/Live"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.slice(0,5).map((e,t)=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-2 text-sm text-gray-900",children:e.originalUrl}),r.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:e.vendorCode||"-"}),r.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?Number(e.testCount)+Number(e.liveCount):e.count||1}),r.jsx("td",{className:"px-6 py-2 text-sm text-gray-500",children:void 0!==e.testCount&&void 0!==e.liveCount?`${e.testCount} / ${e.liveCount}`:"-"})]},t))})]})}),k.length>5&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Showing 5 of ",k.length," rows..."]})]}),t&&S.total>0&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Processing Batch"}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${S.current/S.total*100}%`}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Processing ",S.current," of ",S.total," rows..."]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"originalUrl",children:"Original Survey URL"}),r.jsx("input",{id:"originalUrl",type:"url",placeholder:"https://example.com/survey",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...P("originalUrl",{required:!0})}),U.originalUrl&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Original URL is required"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"vendorId",children:"Vendor"}),(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("select",{id:"vendorId",className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline w-full",...P("vendorId"),children:[r.jsx("option",{value:"",children:"-- No Vendor --"}),g.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),r.jsx("button",{type:"button",className:"ml-2 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded",onClick:()=>G(!B),children:B?"Cancel":"Add Vendor"})]}),B&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:[r.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Add New Vendor"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorName",children:"Vendor Name"}),r.jsx("input",{id:"vendorName",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:$,onChange:e=>M(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-1",htmlFor:"vendorCode",children:"Vendor Code"}),r.jsx("input",{id:"vendorCode",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:D,onChange:e=>O(e.target.value),required:!0}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:'A short code to identify this vendor (e.g., "ABC_CORP")'})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded disabled:opacity-50",onClick:z,disabled:Q||!$||!D,children:Q?"Adding...":"Add Vendor"})})]})]})]}),r.jsx("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"splitLinkTypes",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:j,onChange:e=>v(e.target.checked)}),r.jsx("label",{htmlFor:"splitLinkTypes",className:"ml-2 block text-sm text-gray-700",children:"Generate both Test and Live links"})]})}),j?(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Distribution"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"testCount",children:"Test Links"}),r.jsx("input",{id:"testCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...P("testCount",{min:0,max:1e3})}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Test links have relaxed security for development purposes"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"liveCount",children:"Live Links"}),r.jsx("input",{id:"liveCount",type:"number",min:"0",max:"1000",defaultValue:"0",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...P("liveCount",{min:0,max:1e3})}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Live links enforce all security checks for production use"})]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Total links to generate: ",r.jsx("span",{className:"font-medium",children:Number(F||0)+Number(q||0)})]}),Number(F||0)+Number(q||0)>1e3&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Total links must not exceed 1000"}),Number(F||0)+Number(q||0)===0&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"You must generate at least 1 link"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"count",children:"Number of Links to Generate"}),r.jsx("input",{id:"count",type:"number",min:"1",max:"1000",defaultValue:"1",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...P("count",{min:1,max:1e3})}),U.count&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Please enter a number between 1 and 1000"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Link Type"}),(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"linkTypeLIVE",type:"radio",value:"LIVE",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",defaultChecked:!0,...P("linkType")}),r.jsx("label",{htmlFor:"linkTypeLIVE",className:"ml-2 block text-sm text-gray-700",children:"Live (Production)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"linkTypeTEST",type:"radio",value:"TEST",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",...P("linkType")}),r.jsx("label",{htmlFor:"linkTypeTEST",className:"ml-2 block text-sm text-gray-700",children:"Test (Relaxed Security)"})]})]}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"LIVE"===_?"Live mode enforces all security checks and is meant for production use.":"Test mode relaxes security checks for development and testing purposes."})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{id:"restrictGeo",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",...P("restrictGeo"),onChange:e=>f(e.target.checked)}),r.jsx("label",{htmlFor:"restrictGeo",className:"ml-2 block text-sm text-gray-700",children:"Restrict by Geography"})]}),A&&b&&(0,r.jsxs)("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"countries",children:"Allowed Countries"}),r.jsx("select",{id:"countries",multiple:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",...P("countries",{required:A}),size:5,children:[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"IN",name:"India"},{code:"BR",name:"Brazil"},{code:"ZA",name:"South Africa"}].map(e=>(0,r.jsxs)("option",{value:e.code,children:[e.name," (",e.code,")"]},e.code))}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Hold Ctrl/Cmd to select multiple countries"}),U.countries&&r.jsx("p",{className:"text-red-500 text-xs italic",children:"Please select at least one country"})]})]})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded focus:outline-none focus:shadow-outline disabled:opacity-50",disabled:t||j&&Number(F||0)+Number(q||0)===0,children:t?"Generating...":w?"Generate Batch Links":"Generate Links"})})]})]}),p.length>0&&(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Generated Links"}),(0,r.jsxs)("div",{className:"space-x-2",children:[r.jsx("button",{onClick:()=>{if(!p.length)return;let t=["URL,UID,Type,Status",...p.map(e=>[e.fullUrl,e.uid,e.linkType,e.status].join(","))].join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(s);a.setAttribute("href",r),a.setAttribute("download",`${e.name.replace(/\s+/g,"_")}_links_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded text-sm",children:"Export CSV"}),r.jsx("button",{onClick:()=>{let e=p.map(e=>e.fullUrl).join("\n");navigator.clipboard.writeText(e),x("All links copied to clipboard!"),setTimeout(()=>x(null),2e3)},className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded text-sm",children:"Copy All URLs"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UID"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"URL"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.slice(0,50).map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.uid}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium ${"LIVE"===e.linkType?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:e.linkType})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.status}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("a",{href:e.fullUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.fullUrl.length>50?`${e.fullUrl.substring(0,50)}...`:e.fullUrl})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsx("button",{onClick:()=>H(e.fullUrl),className:"text-indigo-600 hover:text-indigo-900",children:"Copy"})})]},e.id))})]})}),p.length>50&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-4",children:["Showing 50 of ",p.length," links. Please use the export button to access all links."]})]})]})}async function h(e){let{id:t}=e.params;try{let e=(await u.K.projects.get(t)).data;if(!e)return{notFound:!0};return{props:{project:{id:e.id,name:e.name}}}}catch(e){return console.error("Error fetching project:",e),{notFound:!0}}}[d,c,u]=x.then?(await x)():x,a()}catch(e){a(e)}})},108:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},5838:e=>{"use strict";e.exports=import("aws-amplify")},1534:e=>{"use strict";e.exports=import("aws-amplify/api")},9648:e=>{"use strict";e.exports=import("axios")},5641:e=>{"use strict";e.exports=import("react-hook-form")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[899,132,163,664],()=>s(9159));module.exports=a})();